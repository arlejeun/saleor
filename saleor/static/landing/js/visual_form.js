â€‹function initTouchByPass(){$(".touch .header .navbar-nav a").on("touchend",function(t){$(window).width()<768&&$(t.currentTarget).attr("href")&&(window.location=$(t.currentTarget).attr("href"))})}(function(){window.QuelleEnergie={Simulators:{Validations:{}}}}).call(this),function(){window.Pages={}}.call(this),function(){var t,e,i,n,o,r,s,a,u,l,c,h,d,p,f,m,g,v,y,_,b,w,S,C,k,x,E,T,q,M,$,j,V=[].slice;g='<span class="odometer-value"></span>',p='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+g+"</span></span>",n='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+p+"</span></span>",s='<span class="odometer-formatting-mark"></span>',i="(,ddd).dd",a=/^\(?([^)]*)\)?(?:(.)(d+))?$/,u=30,r=2e3,t=20,l=2,o=.5,c=1e3/u,e=1e3/t,f="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",k=document.createElement("div").style,m=null!=k.transition||null!=k.webkitTransition||null!=k.mozTransition||null!=k.oTransition,S=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,h=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,y=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},w=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},v=function(t,e){return w(t,e),t.className+=" "+e},x=function(t,e){var i;return null!=document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(e,!0,!0),t.dispatchEvent(i)):void 0},b=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},C=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,t=Math.floor(t),t/=Math.pow(10,e)):Math.round(t)},E=function(t){return 0>t?Math.ceil(t):Math.floor(t)},_=function(t){return t-C(t)},q=!1,(T=function(){var t,e,i,n,o;if(!q&&null!=window.jQuery){for(q=!0,n=["html","text"],o=[],e=0,i=n.length;i>e;e++)t=n[e],o.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var i;return null==t||null==(null!=(i=this[0])?i.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return o}})(),setTimeout(T,0),d=function(){function t(e){var i,n,o,s,a,u,h,d,p,f,m=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;this.el.odometer=this,d=t.options;for(n in d)s=d[n],null==this.options[n]&&(this.options[n]=s);null==(a=this.options).duration&&(a.duration=r),this.MAX_VALUES=this.options.duration/c/l|0,this.resetFormat(),this.value=this.cleanValue(null!=(p=this.options.value)?p:""),this.renderInside(),this.render();try{for(f=["innerHTML","innerText","textContent"],u=0,h=f.length;h>u;u++)o=f[u],null!=this.el[o]&&!function(t){return Object.defineProperty(m.el,t,{get:function(){var e;return"innerHTML"===t?m.inside.outerHTML:null!=(e=m.inside.innerText)?e:m.inside.textContent},set:function(t){return m.update(t)}})}(o)}catch(g){i=g,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t,e=this;if(null!=h)try{return null==this.observer&&(this.observer=new h(function(){var t;return t=e.el.innerText,e.renderInside(),e.render(e.value),e.update(t)})),this.watchMutations=!0,this.startWatchingMutations()}catch(i){t=i}},t.prototype.startWatchingMutations=function(){return this.watchMutations?this.observer.observe(this.el,{childList:!0}):void 0},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),C(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,i,n,o,r,s=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,o=f.split(" "),r=[],i=0,n=o.length;n>i;i++)t=o[i],r.push(this.el.addEventListener(t,function(){return e?!0:(e=!0,setTimeout(function(){return s.render(),e=!1,x(s.el,"odometerdone")},0),!0)},!1));return r}},t.prototype.resetFormat=function(){var t,e,n,o,r,s,u,l;if(t=null!=(u=this.options.format)?u:i,t||(t="d"),n=a.exec(t),!n)throw new Error("Odometer: Unparsable digit format");return l=n.slice(1,4),s=l[0],r=l[1],e=l[2],o=(null!=e?e.length:void 0)||0,this.format={repeating:s,radix:r,precision:o}},t.prototype.render=function(t){var e,i,n,o,r,s,a,u,l,c,h,d;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",s=this.options.theme,e=this.el.className.split(" "),r=[],u=0,c=e.length;c>u;u++)i=e[u],i.length&&((o=/^odometer-theme-(.+)$/.exec(i))?s=o[1]:/^odometer(-|$)/.test(i)||r.push(i));for(r.push("odometer"),m||r.push("odometer-no-transitions"),r.push(s?"odometer-theme-"+s:"odometer-auto-theme"),this.el.className=r.join(" "),this.ribbons={},this.digits=[],a=!this.format.precision||!_(t)||!1,d=t.toString().split("").reverse(),l=0,h=d.length;h>l;l++)n=d[l],"."===n&&(a=!0),this.addDigit(n,a);return this.startWatchingMutations()},t.prototype.update=function(t){var e,i=this;return t=this.cleanValue(t),(e=t-this.value)?(w(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),e>0?v(this.el,"odometer-animating-up"):v(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return i.el.offsetHeight,v(i.el,"odometer-animating")},0),this.value=t):void 0},t.prototype.renderDigit=function(){return y(n)},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,i){var n;return n=y(s),n.innerHTML=t,i&&v(n,i),this.insertDigit(n,e)},t.prototype.addDigit=function(t,e){var i,n,o,r;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(r=this.format.radix)?r:".",null,"odometer-radix-mark");if(e)for(o=!1;;){if(!this.format.repeating.length){if(o)throw new Error("Bad odometer format without digits");this.resetFormat(),o=!0}if(i=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===i)break;this.addSpacer(i)}return n=this.renderDigit(),n.querySelector(".odometer-value").innerHTML=t,this.digits.push(n),this.insertDigit(n)},t.prototype.animate=function(t){return m&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var i,n,o,r,s,a=this;return(n=+t-this.value)?(r=o=b(),i=this.value,(s=function(){var u,l,c;return b()-r>a.options.duration?(a.value=t,a.render(),void x(a.el,"odometerdone")):(u=b()-o,u>e&&(o=b(),c=u/a.options.duration,l=n*c,i+=l,a.render(Math.round(i))),null!=S?S(s):setTimeout(s,e))})()):void 0},t.prototype.getDigitCount=function(){var t,e,i,n,o,r;for(n=1<=arguments.length?V.call(arguments,0):[],t=o=0,r=n.length;r>o;t=++o)i=n[t],n[t]=Math.abs(i);return e=Math.max.apply(Math,n),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,i,n,o,r,s;for(o=1<=arguments.length?V.call(arguments,0):[],e=/^\-?\d*\.(\d*?)0*$/,t=r=0,s=o.length;s>r;t=++r)n=o[t],o[t]=n.toString(),i=e.exec(o[t]),o[t]=null==i?0:i[1].length;return Math.max.apply(Math,o)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,i,n,r,s,a,u,l,c,h,d,p,f,m,g,y,_,b,w,S,C,k,x,T,q,M,$;if(y=this.value,l=this.getFractionalDigitCount(y,t),l&&(t*=Math.pow(10,l),y*=Math.pow(10,l)),n=t-y){for(this.bindTransitionEnd(),r=this.getDigitCount(y,t),s=[],e=0,d=w=0;r>=0?r>w:w>r;d=r>=0?++w:--w){if(_=E(y/Math.pow(10,r-d-1)),u=E(t/Math.pow(10,r-d-1)),a=u-_,Math.abs(a)>this.MAX_VALUES){for(h=[],p=a/(this.MAX_VALUES+this.MAX_VALUES*e*o),i=_;a>0&&u>i||0>a&&i>u;)h.push(Math.round(i)),i+=p;h[h.length-1]!==u&&h.push(u),e++}else h=function(){$=[];for(var t=_;u>=_?u>=t:t>=u;u>=_?t++:t--)$.push(t);return $}.apply(this);for(d=S=0,k=h.length;k>S;d=++S)c=h[d],h[d]=Math.abs(c%10);s.push(h)}for(this.resetDigits(),M=s.reverse(),d=C=0,x=M.length;x>C;d=++C)for(h=M[d],this.digits[d]||this.addDigit(" ",d>=l),null==(b=this.ribbons)[d]&&(b[d]=this.digits[d].querySelector(".odometer-ribbon-inner")),this.ribbons[d].innerHTML="",0>n&&(h=h.reverse()),f=q=0,T=h.length;T>q;f=++q)c=h[f],g=document.createElement("div"),g.className="odometer-value",g.innerHTML=c,this.ribbons[d].appendChild(g),f===h.length-1&&v(g,"odometer-last-value"),0===f&&v(g,"odometer-first-value");return 0>_&&this.addDigit("-"),m=this.inside.querySelector(".odometer-radix-mark"),null!=m&&m.parent.removeChild(m),l?this.addSpacer(this.format.radix,this.digits[l-1],"odometer-radix-mark"):void 0}},t}(),d.options=null!=($=window.odometerOptions)?$:{},setTimeout(function(){var t,e,i,n,o;if(window.odometerOptions){n=window.odometerOptions,o=[];for(t in n)e=n[t],o.push(null!=(i=d.options)[t]?(i=d.options)[t]:i[t]=e);return o}},0),d.init=function(){var t,e,i,n,o,r;if(null!=document.querySelectorAll){for(e=document.querySelectorAll(d.options.selector||".odometer"),r=[],i=0,n=e.length;n>i;i++)t=e[i],r.push(t.odometer=new d({el:t,value:null!=(o=t.innerText)?o:t.textContent}));return r}},null!=(null!=(j=document.documentElement)?j.doScroll:void 0)&&null!=document.createEventObject?(M=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&d.options.auto!==!1&&d.init(),null!=M?M.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){return d.options.auto!==!1?d.init():void 0},!1),"function"==typeof define&&define.amd?define(["jquery"],function(){return d}):typeof exports===!1?module.exports=d:window.Odometer=d}.call(this),function(t){var e=/iPhone/i,i=/iPod/i,n=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,r=/Android/i,s=/IEMobile/i,a=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,u=/BlackBerry/i,l=/Opera Mini/i,c=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,h=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),d=function(t,e){return t.test(e)},p=function(t){var p=t||navigator.userAgent;return this.apple={phone:d(e,p),ipod:d(i,p),tablet:d(n,p),device:d(e,p)||d(i,p)||d(n,p)},this.android={phone:d(o,p),tablet:!d(o,p)&&d(r,p),device:d(o,p)||d(r,p)},this.windows={phone:d(s,p),tablet:d(a,p),device:d(s,p)||d(a,p)},this.other={blackberry:d(u,p),opera:d(l,p),firefox:d(c,p),device:d(u,p)||d(l,p)||d(c,p)},this.seven_inch=d(h,p),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},f=function(){var t=new p;return t.Class=p,t};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=p:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=f():"function"==typeof define&&define.amd?define(f()):t.isMobile=f()}(this),function(){function t(t,e,i){for(var n=(i||0)-1,o=t?t.length:0;++n<o;)if(t[n]===e)return n;return-1}function e(e,i){var n=typeof i;if(e=e.cache,"boolean"==n||null==i)return e[i]?0:-1;"number"!=n&&"string"!=n&&(n="object");var o="number"==n?i:v+i;return e=(e=e[n])&&e[o],"object"==n?e&&t(e,i)>-1?0:-1:e?0:-1}function i(t){var e=this.cache,i=typeof t;if("boolean"==i||null==t)e[t]=!0;else{"number"!=i&&"string"!=i&&(i="object");var n="number"==i?t:v+t,o=e[i]||(e[i]={});"object"==i?(o[n]||(o[n]=[])).push(t):o[n]=!0}}function n(t){return t.charCodeAt(0)}function o(t,e){for(var i=t.criteria,n=e.criteria,o=-1,r=i.length;++o<r;){var s=i[o],a=n[o];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return t.index-e.index}function r(t){var e=-1,n=t.length,o=t[0],r=t[n/2|0],s=t[n-1];if(o&&"object"==typeof o&&r&&"object"==typeof r&&s&&"object"==typeof s)return!1;var a=u();a["false"]=a["null"]=a["true"]=a.undefined=!1;var l=u();for(l.array=t,l.cache=a,l.push=i;++e<n;)l.push(t[e]);return l}function s(t){return"\\"+J[t]}function a(){return f.pop()||[]}function u(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(t){t.length=0,f.length<_&&f.push(t)}function c(t){var e=t.cache;e&&c(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,m.length<_&&m.push(t)}function h(t,e,i){e||(e=0),"undefined"==typeof i&&(i=t?t.length:0);for(var n=-1,o=i-e||0,r=Array(0>o?0:o);++n<o;)r[n]=t[e+n];return r}function d(i){function f(t){return t&&"object"==typeof t&&!Yn(t)&&Pn.call(t,"__wrapped__")?t:new m(t)}function m(t,e){this.__chain__=!!e,this.__wrapped__=t}function _(t){function e(){if(n){var t=h(n);Rn.apply(t,arguments)}if(this instanceof e){var r=G(i.prototype),s=i.apply(r,t||arguments);return $e(s)?s:r}return i.apply(o,t||arguments)}var i=t[0],n=t[2],o=t[4];return Xn(e,t),e}function J(t,e,i,n,o){if(i){var r=i(t);if("undefined"!=typeof r)return r}var s=$e(t);if(!s)return t;var u=Tn.call(t);if(!F[u])return t;var c=Gn[u];switch(u){case Q:case I:return new c(+t);case H:case B:return new c(t);case z:return r=c(t.source,x.exec(t)),r.lastIndex=t.lastIndex,r}var d=Yn(t);if(e){var p=!n;n||(n=a()),o||(o=a());for(var f=n.length;f--;)if(n[f]==t)return o[f];r=d?c(t.length):{}}else r=d?h(t):ro({},t);return d&&(Pn.call(t,"index")&&(r.index=t.index),Pn.call(t,"input")&&(r.input=t.input)),e?(n.push(t),o.push(r),(d?Ke:uo)(t,function(t,s){r[s]=J(t,e,i,n,o)}),p&&(l(n),l(o)),r):r}function G(t){return $e(t)?Ln(t):{}}function K(t,e,i){if("function"!=typeof t)return Xi;if("undefined"==typeof e||!("prototype"in t))return t;var n=t.__bindData__;if("undefined"==typeof n&&(Kn.funcNames&&(n=!t.name),n=n||!Kn.funcDecomp,!n)){var o=Vn.call(t);Kn.funcNames||(n=!E.test(o)),n||(n=$.test(o),Xn(t,n))}if(n===!1||n!==!0&&1&n[1])return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,r){return t.call(e,i,n,o,r)}}return Pi(t,e)}function X(t){function e(){var t=u?s:this;if(o){var f=h(o);Rn.apply(f,arguments)}if((r||c)&&(f||(f=h(arguments)),r&&Rn.apply(f,r),c&&f.length<a))return n|=16,X([i,d?n:-4&n,f,null,s,a]);if(f||(f=arguments),l&&(i=t[p]),this instanceof e){t=G(i.prototype);var m=i.apply(t,f);return $e(m)?m:t}return i.apply(t,f)}var i=t[0],n=t[1],o=t[2],r=t[3],s=t[4],a=t[5],u=1&n,l=2&n,c=4&n,d=8&n,p=i;return Xn(e,t),e}function Y(i,n){var o=-1,s=ue(),a=i?i.length:0,u=a>=y&&s===t,l=[];if(u){var h=r(n);h?(s=e,n=h):u=!1}for(;++o<a;){var d=i[o];s(n,d)<0&&l.push(d)}return u&&c(n),l}function te(t,e,i,n){for(var o=(n||0)-1,r=t?t.length:0,s=[];++o<r;){var a=t[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Yn(a)||de(a))){e||(a=te(a,e,i));var u=-1,l=a.length,c=s.length;for(s.length+=l;++u<l;)s[c++]=a[u]}else i||s.push(a)}return s}function ee(t,e,i,n,o,r){if(i){var s=i(t,e);if("undefined"!=typeof s)return!!s}if(t===e)return 0!==t||1/t==1/e;var u=typeof t,c=typeof e;if(!(t!==t||t&&W[u]||e&&W[c]))return!1;if(null==t||null==e)return t===e;var h=Tn.call(t),d=Tn.call(e);if(h==P&&(h=L),d==P&&(d=L),h!=d)return!1;switch(h){case Q:case I:return+t==+e;case H:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case z:case B:return t==Sn(e)}var p=h==R;if(!p){var f=Pn.call(t,"__wrapped__"),m=Pn.call(e,"__wrapped__");if(f||m)return ee(f?t.__wrapped__:t,m?e.__wrapped__:e,i,n,o,r);if(h!=L)return!1;var g=t.constructor,v=e.constructor;if(g!=v&&!(Me(g)&&g instanceof g&&Me(v)&&v instanceof v)&&"constructor"in t&&"constructor"in e)return!1}var y=!o;o||(o=a()),r||(r=a());for(var _=o.length;_--;)if(o[_]==t)return r[_]==e;var b=0;if(s=!0,o.push(t),r.push(e),p){if(_=t.length,b=e.length,s=b==_,s||n)for(;b--;){var w=_,S=e[b];if(n)for(;w--&&!(s=ee(t[w],S,i,n,o,r)););else if(!(s=ee(t[b],S,i,n,o,r)))break}}else ao(e,function(e,a,u){return Pn.call(u,a)?(b++,s=Pn.call(t,a)&&ee(t[a],e,i,n,o,r)):void 0}),s&&!n&&ao(t,function(t,e,i){return Pn.call(i,e)?s=--b>-1:void 0});return o.pop(),r.pop(),y&&(l(o),l(r)),s}function ie(t,e,i,n,o){(Yn(e)?Ke:uo)(e,function(e,r){var s,a,u=e,l=t[r];if(e&&((a=Yn(e))||lo(e))){for(var c=n.length;c--;)if(s=n[c]==e){l=o[c];break}if(!s){var h;i&&(u=i(l,e),(h="undefined"!=typeof u)&&(l=u)),h||(l=a?Yn(l)?l:[]:lo(l)?l:{}),n.push(e),o.push(l),h||ie(l,e,i,n,o)}}else i&&(u=i(l,e),"undefined"==typeof u&&(u=e)),"undefined"!=typeof u&&(l=u);t[r]=l})}function ne(t,e){return t+jn(Un()*(e-t+1))}function oe(i,n,o){var s=-1,u=ue(),h=i?i.length:0,d=[],p=!n&&h>=y&&u===t,f=o||p?a():d;if(p){var m=r(f);u=e,f=m}for(;++s<h;){var g=i[s],v=o?o(g,s,i):g;(n?!s||f[f.length-1]!==v:u(f,v)<0)&&((o||p)&&f.push(v),d.push(g))}return p?(l(f.array),c(f)):o&&l(f),d}function re(t){return function(e,i,n){var o={};i=f.createCallback(i,n,3);var r=-1,s=e?e.length:0;if("number"==typeof s)for(;++r<s;){var a=e[r];t(o,a,i(a,r,e),e)}else uo(e,function(e,n,r){t(o,e,i(e,n,r),r)});return o}}function se(t,e,i,n,o,r){var s=1&e,a=2&e,u=4&e,l=16&e,c=32&e;if(!a&&!Me(t))throw new Cn;l&&!i.length&&(e&=-17,l=i=!1),c&&!n.length&&(e&=-33,c=n=!1);var d=t&&t.__bindData__;if(d&&d!==!0)return d=h(d),d[2]&&(d[2]=h(d[2])),d[3]&&(d[3]=h(d[3])),!s||1&d[1]||(d[4]=o),!s&&1&d[1]&&(e|=8),!u||4&d[1]||(d[5]=r),l&&Rn.apply(d[2]||(d[2]=[]),i),c&&On.apply(d[3]||(d[3]=[]),n),d[1]|=e,se.apply(null,d);var p=1==e||17===e?_:X;return p([t,e,i,n,o,r])}function ae(t){return eo[t]}function ue(){var e=(e=f.indexOf)===vi?t:e;return e}function le(t){return"function"==typeof t&&qn.test(t)}function ce(t){var e,i;return t&&Tn.call(t)==L&&(e=t.constructor,!Me(e)||e instanceof e)?(ao(t,function(t,e){i=e}),"undefined"==typeof i||Pn.call(t,i)):!1}function he(t){return io[t]}function de(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Tn.call(t)==P||!1}function pe(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i=e,e=!1),J(t,e,"function"==typeof i&&K(i,n,1))}function fe(t,e,i){return J(t,!0,"function"==typeof e&&K(e,i,1))}function me(t,e){var i=G(t);return e?ro(i,e):i}function ge(t,e,i){var n;return e=f.createCallback(e,i,3),uo(t,function(t,i,o){return e(t,i,o)?(n=i,!1):void 0}),n}function ve(t,e,i){var n;return e=f.createCallback(e,i,3),_e(t,function(t,i,o){return e(t,i,o)?(n=i,!1):void 0}),n}function ye(t,e,i){var n=[];ao(t,function(t,e){n.push(e,t)});var o=n.length;for(e=K(e,i,3);o--&&e(n[o--],n[o],t)!==!1;);return t}function _e(t,e,i){var n=to(t),o=n.length;for(e=K(e,i,3);o--;){var r=n[o];if(e(t[r],r,t)===!1)break}return t}function be(t){var e=[];return ao(t,function(t,i){Me(t)&&e.push(i)}),e.sort()}function we(t,e){return t?Pn.call(t,e):!1}function Se(t){for(var e=-1,i=to(t),n=i.length,o={};++e<n;){var r=i[e];o[t[r]]=r}return o}function Ce(t){return t===!0||t===!1||t&&"object"==typeof t&&Tn.call(t)==Q||!1}function ke(t){return t&&"object"==typeof t&&Tn.call(t)==I||!1}function xe(t){return t&&1===t.nodeType||!1}function Ee(t){var e=!0;if(!t)return e;var i=Tn.call(t),n=t.length;return i==R||i==B||i==P||i==L&&"number"==typeof n&&Me(t.splice)?!n:(uo(t,function(){return e=!1}),e)}function Te(t,e,i,n){return ee(t,e,"function"==typeof i&&K(i,n,2))}function qe(t){return Bn(t)&&!Fn(parseFloat(t))}function Me(t){return"function"==typeof t}function $e(t){return!(!t||!W[typeof t])}function je(t){return Ae(t)&&t!=+t}function Ve(t){return null===t}function Ae(t){return"number"==typeof t||t&&"object"==typeof t&&Tn.call(t)==H||!1}function Pe(t){return t&&"object"==typeof t&&Tn.call(t)==z||!1}function Re(t){return"string"==typeof t||t&&"object"==typeof t&&Tn.call(t)==B||!1}function Qe(t){return"undefined"==typeof t}function Ie(t,e,i){var n={};return e=f.createCallback(e,i,3),uo(t,function(t,i,o){n[i]=e(t,i,o)}),n}function Oe(t){var e=arguments,i=2;if(!$e(t))return t;if("number"!=typeof e[2]&&(i=e.length),i>3&&"function"==typeof e[i-2])var n=K(e[--i-1],e[i--],2);else i>2&&"function"==typeof e[i-1]&&(n=e[--i]);for(var o=h(arguments,1,i),r=-1,s=a(),u=a();++r<i;)ie(t,o[r],n,s,u);return l(s),l(u),t}function He(t,e,i){var n={};if("function"!=typeof e){var o=[];ao(t,function(t,e){o.push(e)}),o=Y(o,te(arguments,!0,!1,1));for(var r=-1,s=o.length;++r<s;){var a=o[r];n[a]=t[a]}}else e=f.createCallback(e,i,3),ao(t,function(t,i,o){e(t,i,o)||(n[i]=t)});return n}function Le(t){for(var e=-1,i=to(t),n=i.length,o=fn(n);++e<n;){var r=i[e];o[e]=[r,t[r]]}return o}function ze(t,e,i){var n={};if("function"!=typeof e)for(var o=-1,r=te(arguments,!0,!1,1),s=$e(t)?r.length:0;++o<s;){var a=r[o];a in t&&(n[a]=t[a])}else e=f.createCallback(e,i,3),ao(t,function(t,i,o){e(t,i,o)&&(n[i]=t)});return n}function Be(t,e,i,n){var o=Yn(t);if(null==i)if(o)i=[];else{var r=t&&t.constructor,s=r&&r.prototype;i=G(s)}return e&&(e=f.createCallback(e,n,4),(o?Ke:uo)(t,function(t,n,o){return e(i,t,n,o)})),i}function Fe(t){for(var e=-1,i=to(t),n=i.length,o=fn(n);++e<n;)o[e]=t[i[e]];return o}function De(t){for(var e=arguments,i=-1,n=te(e,!0,!1,1),o=e[2]&&e[2][e[1]]===t?1:n.length,r=fn(o);++i<o;)r[i]=t[n[i]];return r}function Ne(t,e,i){var n=-1,o=ue(),r=t?t.length:0,s=!1;return i=(0>i?Nn(0,r+i):i)||0,Yn(t)?s=o(t,e,i)>-1:"number"==typeof r?s=(Re(t)?t.indexOf(e,i):o(t,e,i))>-1:uo(t,function(t){return++n>=i?!(s=t===e):void 0}),s}function We(t,e,i){var n=!0;e=f.createCallback(e,i,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r&&(n=!!e(t[o],o,t)););else uo(t,function(t,i,o){return n=!!e(t,i,o)});return n}function Je(t,e,i){var n=[];e=f.createCallback(e,i,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r;){var s=t[o];e(s,o,t)&&n.push(s)}else uo(t,function(t,i,o){e(t,i,o)&&n.push(t)});return n}function Ue(t,e,i){e=f.createCallback(e,i,3);var n=-1,o=t?t.length:0;if("number"!=typeof o){var r;return uo(t,function(t,i,n){return e(t,i,n)?(r=t,!1):void 0}),r}for(;++n<o;){var s=t[n];if(e(s,n,t))return s}}function Ge(t,e,i){var n;return e=f.createCallback(e,i,3),Xe(t,function(t,i,o){return e(t,i,o)?(n=t,!1):void 0}),n}function Ke(t,e,i){var n=-1,o=t?t.length:0;if(e=e&&"undefined"==typeof i?e:K(e,i,3),"number"==typeof o)for(;++n<o&&e(t[n],n,t)!==!1;);else uo(t,e);return t}function Xe(t,e,i){var n=t?t.length:0;if(e=e&&"undefined"==typeof i?e:K(e,i,3),"number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var o=to(t);n=o.length,uo(t,function(t,i,r){return i=o?o[--n]:--n,e(r[i],i,r)})}return t}function Ye(t,e){var i=h(arguments,2),n=-1,o="function"==typeof e,r=t?t.length:0,s=fn("number"==typeof r?r:0);return Ke(t,function(t){s[++n]=(o?e:t[e]).apply(t,i)}),s}function Ze(t,e,i){var n=-1,o=t?t.length:0;if(e=f.createCallback(e,i,3),"number"==typeof o)for(var r=fn(o);++n<o;)r[n]=e(t[n],n,t);else r=[],uo(t,function(t,i,o){r[++n]=e(t,i,o)});return r}function ti(t,e,i){var o=-1/0,r=o;if("function"!=typeof e&&i&&i[e]===t&&(e=null),null==e&&Yn(t))for(var s=-1,a=t.length;++s<a;){var u=t[s];u>r&&(r=u)}else e=null==e&&Re(t)?n:f.createCallback(e,i,3),Ke(t,function(t,i,n){var s=e(t,i,n);s>o&&(o=s,r=t)});return r}function ei(t,e,i){var o=1/0,r=o;if("function"!=typeof e&&i&&i[e]===t&&(e=null),null==e&&Yn(t))for(var s=-1,a=t.length;++s<a;){var u=t[s];r>u&&(r=u)}else e=null==e&&Re(t)?n:f.createCallback(e,i,3),Ke(t,function(t,i,n){var s=e(t,i,n);o>s&&(o=s,r=t)});return r}function ii(t,e,i,n){if(!t)return i;var o=arguments.length<3;e=f.createCallback(e,n,4);var r=-1,s=t.length;if("number"==typeof s)for(o&&(i=t[++r]);++r<s;)i=e(i,t[r],r,t);else uo(t,function(t,n,r){i=o?(o=!1,t):e(i,t,n,r)});return i}function ni(t,e,i,n){var o=arguments.length<3;return e=f.createCallback(e,n,4),Xe(t,function(t,n,r){i=o?(o=!1,t):e(i,t,n,r)}),i}function oi(t,e,i){return e=f.createCallback(e,i,3),Je(t,function(t,i,n){return!e(t,i,n)})}function ri(t,e,i){if(t&&"number"!=typeof t.length&&(t=Fe(t)),null==e||i)return t?t[ne(0,t.length-1)]:p;var n=si(t);return n.length=Wn(Nn(0,e),n.length),n}function si(t){var e=-1,i=t?t.length:0,n=fn("number"==typeof i?i:0);return Ke(t,function(t){var i=ne(0,++e);n[e]=n[i],n[i]=t}),n}function ai(t){var e=t?t.length:0;return"number"==typeof e?e:to(t).length}function ui(t,e,i){var n;e=f.createCallback(e,i,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r&&!(n=e(t[o],o,t)););else uo(t,function(t,i,o){return!(n=e(t,i,o))});return!!n}function li(t,e,i){var n=-1,r=Yn(e),s=t?t.length:0,h=fn("number"==typeof s?s:0);for(r||(e=f.createCallback(e,i,3)),Ke(t,function(t,i,o){var s=h[++n]=u();r?s.criteria=Ze(e,function(e){return t[e]}):(s.criteria=a())[0]=e(t,i,o),s.index=n,s.value=t}),s=h.length,h.sort(o);s--;){var d=h[s];h[s]=d.value,r||l(d.criteria),c(d)}return h}function ci(t){return t&&"number"==typeof t.length?h(t):Fe(t)}function hi(t){for(var e=-1,i=t?t.length:0,n=[];++e<i;){var o=t[e];o&&n.push(o)}return n}function di(t){return Y(t,te(arguments,!0,!0,1))}function pi(t,e,i){var n=-1,o=t?t.length:0;for(e=f.createCallback(e,i,3);++n<o;)if(e(t[n],n,t))return n;return-1}function fi(t,e,i){var n=t?t.length:0;for(e=f.createCallback(e,i,3);n--;)if(e(t[n],n,t))return n;return-1}function mi(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=-1;for(e=f.createCallback(e,i,3);++r<o&&e(t[r],r,t);)n++}else if(n=e,null==n||i)return t?t[0]:p;return h(t,0,Wn(Nn(0,n),o))}function gi(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=i&&(t=Ze(t,i,n)),te(t,e)}function vi(e,i,n){if("number"==typeof n){var o=e?e.length:0;n=0>n?Nn(0,o+n):n||0}else if(n){var r=Ei(e,i);return e[r]===i?r:-1}return t(e,i,n)}function yi(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=f.createCallback(e,i,3);r--&&e(t[r],r,t);)n++}else n=null==e||i?1:e||n;return h(t,0,Wn(Nn(0,o-n),o))}function _i(){for(var i=[],n=-1,o=arguments.length,s=a(),u=ue(),h=u===t,d=a();++n<o;){var p=arguments[n];(Yn(p)||de(p))&&(i.push(p),s.push(h&&p.length>=y&&r(n?i[n]:d)))}var f=i[0],m=-1,g=f?f.length:0,v=[];t:for(;++m<g;){var _=s[0];if(p=f[m],(_?e(_,p):u(d,p))<0){for(n=o,(_||d).push(p);--n;)if(_=s[n],(_?e(_,p):u(i[n],p))<0)continue t;v.push(p)}}for(;o--;)_=s[o],_&&c(_);return l(s),l(d),v}function bi(t,e,i){var n=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=f.createCallback(e,i,3);r--&&e(t[r],r,t);)n++}else if(n=e,null==n||i)return t?t[o-1]:p;return h(t,Nn(0,o-n))}function wi(t,e,i){var n=t?t.length:0;for("number"==typeof i&&(n=(0>i?Nn(0,n+i):Wn(i,n-1))+1);n--;)if(t[n]===e)return n;return-1}function Si(t){for(var e=arguments,i=0,n=e.length,o=t?t.length:0;++i<n;)for(var r=-1,s=e[i];++r<o;)t[r]===s&&(In.call(t,r--,1),o--);return t}function Ci(t,e,i){t=+t||0,i="number"==typeof i?i:+i||1,null==e&&(e=t,t=0);for(var n=-1,o=Nn(0,Mn((e-t)/(i||1))),r=fn(o);++n<o;)r[n]=t,t+=i;return r}function ki(t,e,i){var n=-1,o=t?t.length:0,r=[];for(e=f.createCallback(e,i,3);++n<o;){var s=t[n];e(s,n,t)&&(r.push(s),In.call(t,n--,1),o--)}return r}function xi(t,e,i){if("number"!=typeof e&&null!=e){var n=0,o=-1,r=t?t.length:0;for(e=f.createCallback(e,i,3);++o<r&&e(t[o],o,t);)n++}else n=null==e||i?1:Nn(0,e);return h(t,n)}function Ei(t,e,i,n){var o=0,r=t?t.length:o;for(i=i?f.createCallback(i,n,1):Xi,e=i(e);r>o;){var s=o+r>>>1;i(t[s])<e?o=s+1:r=s}return o}function Ti(){return oe(te(arguments,!0,!0))}function qi(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=i&&(i=f.createCallback(i,n,3)),oe(t,e,i)}function Mi(t){return Y(t,h(arguments,1))}function $i(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Yn(i)||de(i))var n=n?oe(Y(n,i).concat(Y(i,n))):i}return n||[]}function ji(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,i=t?ti(fo(t,"length")):0,n=fn(0>i?0:i);++e<i;)n[e]=fo(t,e);return n}function Vi(t,e){var i=-1,n=t?t.length:0,o={};for(e||!n||Yn(t[0])||(e=[]);++i<n;){var r=t[i];e?o[r]=e[i]:r&&(o[r[0]]=r[1])}return o}function Ai(t,e){if(!Me(e))throw new Cn;return function(){return--t<1?e.apply(this,arguments):void 0}}function Pi(t,e){return arguments.length>2?se(t,17,h(arguments,2),null,e):se(t,1,null,null,e)}function Ri(t){for(var e=arguments.length>1?te(arguments,!0,!1,1):be(t),i=-1,n=e.length;++i<n;){var o=e[i];t[o]=se(t[o],1,null,null,t)}return t}function Qi(t,e){return arguments.length>2?se(e,19,h(arguments,2),null,t):se(e,3,null,null,t)}function Ii(){for(var t=arguments,e=t.length;e--;)if(!Me(t[e]))throw new Cn;return function(){for(var e=arguments,i=t.length;i--;)e=[t[i].apply(this,e)];return e[0]}}function Oi(t,e){return e="number"==typeof e?e:+e||t.length,se(t,4,null,null,null,e)}function Hi(t,e,i){var n,o,r,s,a,u,l,c=0,h=!1,d=!0;if(!Me(t))throw new Cn;if(e=Nn(0,e)||0,i===!0){var f=!0;d=!1}else $e(i)&&(f=i.leading,h="maxWait"in i&&(Nn(e,i.maxWait)||0),d="trailing"in i?i.trailing:d);var m=function(){var i=e-(go()-s);if(0>=i){o&&$n(o);var h=l;o=u=l=p,h&&(c=go(),r=t.apply(a,n),u||o||(n=a=null))}else u=Qn(m,i)},g=function(){u&&$n(u),o=u=l=p,(d||h!==e)&&(c=go(),r=t.apply(a,n),u||o||(n=a=null))};return function(){if(n=arguments,s=go(),a=this,l=d&&(u||!f),h===!1)var i=f&&!u;else{o||f||(c=s);var p=h-(s-c),v=0>=p;v?(o&&(o=$n(o)),c=s,r=t.apply(a,n)):o||(o=Qn(g,p))}return v&&u?u=$n(u):u||e===h||(u=Qn(m,e)),i&&(v=!0,r=t.apply(a,n)),!v||u||o||(n=a=null),r}}function Li(t){if(!Me(t))throw new Cn;var e=h(arguments,1);return Qn(function(){t.apply(p,e)},1)}function zi(t,e){if(!Me(t))throw new Cn;var i=h(arguments,2);return Qn(function(){t.apply(p,i)},e)}function Bi(t,e){if(!Me(t))throw new Cn;var i=function(){var n=i.cache,o=e?e.apply(this,arguments):v+arguments[0];return Pn.call(n,o)?n[o]:n[o]=t.apply(this,arguments)};return i.cache={},i}function Fi(t){var e,i;if(!Me(t))throw new Cn;return function(){return e?i:(e=!0,i=t.apply(this,arguments),t=null,i)}}function Di(t){return se(t,16,h(arguments,1))}function Ni(t){return se(t,32,null,h(arguments,1))}function Wi(t,e,i){var n=!0,o=!0;if(!Me(t))throw new Cn;return i===!1?n=!1:$e(i)&&(n="leading"in i?i.leading:n,o="trailing"in i?i.trailing:o),D.leading=n,D.maxWait=e,D.trailing=o,Hi(t,e,D)}function Ji(t,e){return se(e,16,[t])}function Ui(t){return function(){return t}}function Gi(t,e,i){var n=typeof t;if(null==t||"function"==n)return K(t,e,i);if("object"!=n)return en(t);var o=to(t),r=o[0],s=t[r];return 1!=o.length||s!==s||$e(s)?function(e){for(var i=o.length,n=!1;i--&&(n=ee(e[o[i]],t[o[i]],null,!0)););return n}:function(t){var e=t[r];return s===e&&(0!==s||1/s==1/e)}}function Ki(t){return null==t?"":Sn(t).replace(oo,ae)}function Xi(t){return t}function Yi(t,e,i){var n=!0,o=e&&be(e);e&&(i||o.length)||(null==i&&(i=e),r=m,e=t,t=f,o=be(e)),i===!1?n=!1:$e(i)&&"chain"in i&&(n=i.chain);var r=t,s=Me(r);Ke(o,function(i){var o=t[i]=e[i];s&&(r.prototype[i]=function(){var e=this.__chain__,i=this.__wrapped__,s=[i];Rn.apply(s,arguments);var a=o.apply(t,s);if(n||e){if(i===a&&$e(a))return this;a=new r(a),a.__chain__=e}return a})})}function Zi(){return i._=En,this}function tn(){}function en(t){return function(e){return e[t]}}function nn(t,e,i){var n=null==t,o=null==e;if(null==i&&("boolean"==typeof t&&o?(i=t,t=1):o||"boolean"!=typeof e||(i=e,o=!0)),n&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,i||t%1||e%1){var r=Un();return Wn(t+r*(e-t+parseFloat("1e-"+((r+"").length-1))),e)}return ne(t,e)}function on(t,e){if(t){var i=t[e];return Me(i)?t[e]():i}}function rn(t,e,i){var n=f.templateSettings;t=Sn(t||""),i=so({},i,n);var o,r=so({},i.imports,n.imports),a=to(r),u=Fe(r),l=0,c=i.interpolate||M,h="__p += '",d=wn((i.escape||M).source+"|"+c.source+"|"+(c===T?k:M).source+"|"+(i.evaluate||M).source+"|$","g");t.replace(d,function(e,i,n,r,a,u){return n||(n=r),h+=t.slice(l,u).replace(j,s),i&&(h+="' +\n__e("+i+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var m=i.variable,g=m;g||(m="obj",h="with ("+m+") {\n"+h+"\n}\n"),h=(o?h.replace(w,""):h).replace(S,"$1").replace(C,"$1;"),h="function("+m+") {\n"+(g?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(i.sourceURL||"/lodash/template/source["+A++ +"]")+"\n*/";try{var y=vn(a,"return "+h+v).apply(p,u)}catch(_){throw _.source=h,_}return e?y(e):(y.source=h,y)}function sn(t,e,i){t=(t=+t)>-1?t:0;var n=-1,o=fn(t);for(e=K(e,i,1);++n<t;)o[n]=e(n);return o}function an(t){return null==t?"":Sn(t).replace(no,he)}function un(t){var e=++g;return Sn(null==t?"":t)+e}function ln(t){return t=new m(t),t.__chain__=!0,t
}function cn(t,e){return e(t),t}function hn(){return this.__chain__=!0,this}function dn(){return Sn(this.__wrapped__)}function pn(){return this.__wrapped__}i=i?Z.defaults(U.Object(),i,Z.pick(U,V)):U;var fn=i.Array,mn=i.Boolean,gn=i.Date,vn=i.Function,yn=i.Math,_n=i.Number,bn=i.Object,wn=i.RegExp,Sn=i.String,Cn=i.TypeError,kn=[],xn=bn.prototype,En=i._,Tn=xn.toString,qn=wn("^"+Sn(Tn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Mn=yn.ceil,$n=i.clearTimeout,jn=yn.floor,Vn=vn.prototype.toString,An=le(An=bn.getPrototypeOf)&&An,Pn=xn.hasOwnProperty,Rn=kn.push,Qn=i.setTimeout,In=kn.splice,On=kn.unshift,Hn=function(){try{var t={},e=le(e=bn.defineProperty)&&e,i=e(t,t,t)&&e}catch(n){}return i}(),Ln=le(Ln=bn.create)&&Ln,zn=le(zn=fn.isArray)&&zn,Bn=i.isFinite,Fn=i.isNaN,Dn=le(Dn=bn.keys)&&Dn,Nn=yn.max,Wn=yn.min,Jn=i.parseInt,Un=yn.random,Gn={};Gn[R]=fn,Gn[Q]=mn,Gn[I]=gn,Gn[O]=vn,Gn[L]=bn,Gn[H]=_n,Gn[z]=wn,Gn[B]=Sn,m.prototype=f.prototype;var Kn=f.support={};Kn.funcDecomp=!le(i.WinRTError)&&$.test(d),Kn.funcNames="string"==typeof vn.name,f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:T,variable:"",imports:{_:f}},Ln||(G=function(){function t(){}return function(e){if($e(e)){t.prototype=e;var n=new t;t.prototype=null}return n||i.Object()}}());var Xn=Hn?function(t,e){N.value=e,Hn(t,"__bindData__",N)}:tn,Yn=zn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Tn.call(t)==R||!1},Zn=function(t){var e,i=t,n=[];if(!i)return n;if(!W[typeof t])return n;for(e in i)Pn.call(i,e)&&n.push(e);return n},to=Dn?function(t){return $e(t)?Dn(t):[]}:Zn,eo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io=Se(eo),no=wn("("+to(io).join("|")+")","g"),oo=wn("["+to(eo).join("")+"]","g"),ro=function(t,e,i){var n,o=t,r=o;if(!o)return r;var s=arguments,a=0,u="number"==typeof i?2:s.length;if(u>3&&"function"==typeof s[u-2])var l=K(s[--u-1],s[u--],2);else u>2&&"function"==typeof s[u-1]&&(l=s[--u]);for(;++a<u;)if(o=s[a],o&&W[typeof o])for(var c=-1,h=W[typeof o]&&to(o),d=h?h.length:0;++c<d;)n=h[c],r[n]=l?l(r[n],o[n]):o[n];return r},so=function(t,e,i){var n,o=t,r=o;if(!o)return r;for(var s=arguments,a=0,u="number"==typeof i?2:s.length;++a<u;)if(o=s[a],o&&W[typeof o])for(var l=-1,c=W[typeof o]&&to(o),h=c?c.length:0;++l<h;)n=c[l],"undefined"==typeof r[n]&&(r[n]=o[n]);return r},ao=function(t,e,i){var n,o=t,r=o;if(!o)return r;if(!W[typeof o])return r;e=e&&"undefined"==typeof i?e:K(e,i,3);for(n in o)if(e(o[n],n,t)===!1)return r;return r},uo=function(t,e,i){var n,o=t,r=o;if(!o)return r;if(!W[typeof o])return r;e=e&&"undefined"==typeof i?e:K(e,i,3);for(var s=-1,a=W[typeof o]&&to(o),u=a?a.length:0;++s<u;)if(n=a[s],e(o[n],n,t)===!1)return r;return r},lo=An?function(t){if(!t||Tn.call(t)!=L)return!1;var e=t.valueOf,i=le(e)&&(i=An(e))&&An(i);return i?t==i||An(t)==i:ce(t)}:ce,co=re(function(t,e,i){Pn.call(t,i)?t[i]++:t[i]=1}),ho=re(function(t,e,i){(Pn.call(t,i)?t[i]:t[i]=[]).push(e)}),po=re(function(t,e,i){t[i]=e}),fo=Ze,mo=Je,go=le(go=gn.now)&&go||function(){return(new gn).getTime()},vo=8==Jn(b+"08")?Jn:function(t,e){return Jn(Re(t)?t.replace(q,""):t,e||0)};return f.after=Ai,f.assign=ro,f.at=De,f.bind=Pi,f.bindAll=Ri,f.bindKey=Qi,f.chain=ln,f.compact=hi,f.compose=Ii,f.constant=Ui,f.countBy=co,f.create=me,f.createCallback=Gi,f.curry=Oi,f.debounce=Hi,f.defaults=so,f.defer=Li,f.delay=zi,f.difference=di,f.filter=Je,f.flatten=gi,f.forEach=Ke,f.forEachRight=Xe,f.forIn=ao,f.forInRight=ye,f.forOwn=uo,f.forOwnRight=_e,f.functions=be,f.groupBy=ho,f.indexBy=po,f.initial=yi,f.intersection=_i,f.invert=Se,f.invoke=Ye,f.keys=to,f.map=Ze,f.mapValues=Ie,f.max=ti,f.memoize=Bi,f.merge=Oe,f.min=ei,f.omit=He,f.once=Fi,f.pairs=Le,f.partial=Di,f.partialRight=Ni,f.pick=ze,f.pluck=fo,f.property=en,f.pull=Si,f.range=Ci,f.reject=oi,f.remove=ki,f.rest=xi,f.shuffle=si,f.sortBy=li,f.tap=cn,f.throttle=Wi,f.times=sn,f.toArray=ci,f.transform=Be,f.union=Ti,f.uniq=qi,f.values=Fe,f.where=mo,f.without=Mi,f.wrap=Ji,f.xor=$i,f.zip=ji,f.zipObject=Vi,f.collect=Ze,f.drop=xi,f.each=Ke,f.eachRight=Xe,f.extend=ro,f.methods=be,f.object=Vi,f.select=Je,f.tail=xi,f.unique=qi,f.unzip=ji,Yi(f),f.clone=pe,f.cloneDeep=fe,f.contains=Ne,f.escape=Ki,f.every=We,f.find=Ue,f.findIndex=pi,f.findKey=ge,f.findLast=Ge,f.findLastIndex=fi,f.findLastKey=ve,f.has=we,f.identity=Xi,f.indexOf=vi,f.isArguments=de,f.isArray=Yn,f.isBoolean=Ce,f.isDate=ke,f.isElement=xe,f.isEmpty=Ee,f.isEqual=Te,f.isFinite=qe,f.isFunction=Me,f.isNaN=je,f.isNull=Ve,f.isNumber=Ae,f.isObject=$e,f.isPlainObject=lo,f.isRegExp=Pe,f.isString=Re,f.isUndefined=Qe,f.lastIndexOf=wi,f.mixin=Yi,f.noConflict=Zi,f.noop=tn,f.now=go,f.parseInt=vo,f.random=nn,f.reduce=ii,f.reduceRight=ni,f.result=on,f.runInContext=d,f.size=ai,f.some=ui,f.sortedIndex=Ei,f.template=rn,f.unescape=an,f.uniqueId=un,f.all=We,f.any=ui,f.detect=Ue,f.findWhere=Ue,f.foldl=ii,f.foldr=ni,f.include=Ne,f.inject=ii,Yi(function(){var t={};return uo(f,function(e,i){f.prototype[i]||(t[i]=e)}),t}(),!1),f.first=mi,f.last=bi,f.sample=ri,f.take=mi,f.head=mi,uo(f,function(t,e){var i="sample"!==e;f.prototype[e]||(f.prototype[e]=function(e,n){var o=this.__chain__,r=t(this.__wrapped__,e,n);return o||null!=e&&(!n||i&&"function"==typeof e)?new m(r,o):r})}),f.VERSION="2.4.1",f.prototype.chain=hn,f.prototype.toString=dn,f.prototype.value=pn,f.prototype.valueOf=pn,Ke(["join","pop","shift"],function(t){var e=kn[t];f.prototype[t]=function(){var t=this.__chain__,i=e.apply(this.__wrapped__,arguments);return t?new m(i,t):i}}),Ke(["push","reverse","sort","unshift"],function(t){var e=kn[t];f.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Ke(["concat","slice","splice"],function(t){var e=kn[t];f.prototype[t]=function(){return new m(e.apply(this.__wrapped__,arguments),this.__chain__)}}),f}var p,f=[],m=[],g=0,v=+new Date+"",y=75,_=40,b=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",w=/\b__p \+= '';/g,S=/\b(__p \+=) '' \+/g,C=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,x=/\w*$/,E=/^\s*function[ \n\r\t]+\w/,T=/<%=([\s\S]+?)%>/g,q=RegExp("^["+b+"]*0+(?=.$)"),M=/($^)/,$=/\bthis\b/,j=/['\n\r\t\u2028\u2029\\]/g,V=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],A=0,P="[object Arguments]",R="[object Array]",Q="[object Boolean]",I="[object Date]",O="[object Function]",H="[object Number]",L="[object Object]",z="[object RegExp]",B="[object String]",F={};F[O]=!1,F[P]=F[R]=F[Q]=F[I]=F[H]=F[L]=F[z]=F[B]=!0;var D={leading:!1,maxWait:0,trailing:!1},N={configurable:!1,enumerable:!1,value:null,writable:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},U=W[typeof window]&&window||this,G=W[typeof exports]&&exports&&!exports.nodeType&&exports,K=W[typeof module]&&module&&!module.nodeType&&module,X=K&&K.exports===G&&G,Y=W[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(U=Y);var Z=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(U._=Z,define(function(){return Z})):G&&K?X?(K.exports=Z)._=Z:G._=Z:U._=Z}.call(this),function(){window.initDropdowns=function(){return $(".dropdown").on("mouseover",function(){return $(this).children(".dropdown-menu").show()}).on("mouseout",function(){return $(this).children(".dropdown-menu").hide()})},$(function(){return $("form, .results").on("mouseover","span.icon-info",function(){return $(this).next("span.msg").removeClass("no-display")}).on("mouseout","span.icon-info",function(){return $(this).next("span.msg").addClass("no-display")}),initDropdowns()})}.call(this),function(){$(function(){var t,e;return $(".subdropdown").each(function(t,e){var i;return i=$(e),i.find(".subdropdown-menu").toggle(),i.on("touchdown click",'span[class*="icon-white"], .subdropdown-link, .caret-wrap',function(){var t,e;return t=i.find(".caret-wrap"),e=t.prop("title"),t.prop("title",t.data("title")),t.data("title",e),i.find(".caret").toggleClass("up"),i.find(".subdropdown-menu").toggle(),!1})}),t=$("body > .menu.light-bg2"),t.length&&window.innerWidth<768?(e=t.offset().top,$(window).on("scroll",function(){return $(window).scrollTop()>e?t.addClass("fixit"):t.removeClass("fixit")})):void 0})}.call(this),function(){QuelleEnergie.Simulators.Validations.Base=function(){function t(t){this.el=t,this.$el=$(t),this.bindUIElements(),this.delegateEvents(),this.autoValidations&&this.delegateValidationsEvents(),void 0!==this.initialize&&this.initialize()}return t.prototype.$=jQuery,t.prototype.autoValidations=!1,t.prototype.checkPreviousValidations=!1,t.prototype.ui={},t.prototype.uiRanking=[],t.prototype.events={},t.prototype.validations={},t.prototype.afterValidations={},t.prototype.locales={},t.prototype.bindUIElements=function(){var t,e,i,n;t=this.ui,this.ui={},i=[];for(e in t)n=t[e],i.push(this.createUiElements(e,n));return i},t.prototype.createUiElements=function(t,e,i){var n,o,r;if(void 0!==i&&(t=""+i+t.charAt(0).toUpperCase()+t.slice(1)),_.isObject(e)){o=[];for(n in e)r=e[n],o.push(this.createUiElements(n,r,t));return o}return this.ui[t]=this.$el.find(e),this.ui[t].validate=function(e){return function(){return e.validateUi(t)}}(this),this.ui[t].validatePrevious=function(e){return function(){return e.validatePreviousUi(t)}}(this),this.uiRanking.push(t)},t.prototype.delegateEvents=function(){return this.events?this.$.each(this.events,function(t){return function(e){var i,n,o,r;return o=t.events[e],n=e.match(/^(\S+)\s*(.*)$/),i=n[1],r=n[2],t.ui[r].on(i,t.$.proxy(t[o],t))}}(this)):void 0},t.prototype.delegateValidationsEvents=function(){return _.each(this.validations,function(t){return function(e,i){var n;if(n=t.ui[i],n.exist())switch(n.prop("tagName")){case"SELECT":return n.on("change",function(e){return!e.isTrigger&&(n.validate(),t.checkPreviousValidations)?n.validatePrevious():void 0});case"INPUT":if("text"===n.attr("type"))return n.on("blur",function(){return n.validate()}),n.on("focus",function(){return t.checkPreviousValidations?n.validatePrevious():void 0});if("radio"===n.attr("type"))return n.on("click",function(){return n.validate(),t.checkPreviousValidations?n.validatePrevious():void 0})}}}(this))},t.prototype.validate=function(){return _.each(this.validations,function(t){return function(e,i){return t.validateUi(i)}}(this))},t.prototype.validateUi=function(t){var e,i,n,o,r,s,a,u,l,c;if(u=this.validations[t],!_.isEmpty(u)){if(e=this.ui[t],void 0===e.val())return!1;if(u&&u["if"]&&_.isFunction(u["if"])&&!u["if"].apply(this))return!0;n=[];for(a in u)l=u[a],"if"!==a&&("custom"===a?u.custom.apply(this)||n.push("custom"):QuelleEnergie.Validators[a](e,l)||n.push(a));if(r=_.isEmpty(n),r?this.hideErrors(t):this.showErrors(t,n),this.afterValidations[t]&&_.isFunction(this.afterValidations[t])&&this.afterValidations[t].call(this,e.val(),r,e),i=_.valuesIncludedInBoth(_.keys(u),_.keys(this.afterValidations)),!_.isEmpty(i))for(o=0,s=i.length;s>o;o++)c=i[o],this.afterValidations[c]&&_.isFunction(this.afterValidations[c])&&this.afterValidations[c].call(this,e.val(),r,e);return r}},t.prototype.validatePreviousUi=function(t){var e,i,n;i=this.uiRanking.indexOf(t),n=[];for(e in this.ui)this.uiRanking.indexOf(e)<i&&n.push(this.validateUi(e));return n},t.prototype.errorsMessage=function(t,e){var i;return i=t[0],this.locales[e]&&this.locales[e][i]?this.locales[e][i]:this.locales[i]?this.locales[i]:i},t.prototype.showErrors=function(t,e){var i,n,o,r,s,a;return i=this.ui[t],o=i.parents(".form-line"),o.find(".form-label").parent().addClass("field_with_warning"),o.find(".help-question img").removeClass("img-question").addClass("img-warning"),o.find(".help-text").removeClass("form-info-window").addClass("form-info-window-warning"),o.find(".form-info-arrow").removeClass("form-info-arrow").addClass("form-info-arrow-warning"),0===o.find(".help-content .error-indication").length&&o.find(".help-content").prepend("<p class='error-indication'>N'oubliez pas de r\xe9pondre \xe0 cette question !</p>"),a=this.errorsMessage(e,t),o.find(".form-field:first p").length?(r=o.find(".form-field:first p"),r.find("span").text(a),r.show()):(r=this.$("<p />").addClass("form-warning"),n=this.$("<img />").attr({alt:"error",src:"/images/home/clear.gif"}).addClass("img img-warning").css({verticalAlign:"middle"}),s=this.$("<span />").text(a).css({paddingLeft:5}),r.append(n).append(s),o.find(".form-field:first").append(r))},t.prototype.hideErrors=function(t){var e,i,n,o,r;for(e=this.ui[t],n=e.parents(".form-line"),n.removeClass("line-error"),n.find(".help-question img").removeClass("img-warning img-question").addClass("img-ok"),n.find(".help-text").removeClass("form-info-window-warning").addClass("form-info-window-good"),n.find(".form-info-arrow").removeClass("form-info-arrow-warning form-info-arrow").addClass("form-info-arrow-good"),n.find(".form-info-arrow-warning").removeClass("form-info-arrow").addClass("form-info-arrow-good"),n.find(".help-content .error-indication").remove(),r=o=0;3>=o;r=++o)n.find("label").removeClass("with_error");return n.find("label.form-radio").removeClass("with_error"),i=n.find(".form-label").parent(),i.hasClass("field_with_warning")?i.removeClass("field_with_warning").addClass("field_with_ok"):i.hasClass("field_with_errors")&&i.removeClass("field_with_errors").addClass("field_with_ok"),n.find(".form-field:first .form-warning").hide()},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Simulators.Validations.Global=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autoValidations=!0,i.prototype.checkPreviousValidations=!0,i.prototype.locales={required:"Ce champ est obligatoire",number:"Ce champ doit \xeatre un nombre. Utilisez le point comme s\xe9parateur de d\xe9cimale plut\xf4t que la virgule",surfaceArea:{max:"La surface ne doit pas \xeatre sup\xe9rieur \xe0 1000 m\xb2"},zipcode:{format:"Le code postal n'est pas valide"},email:{format:"L'email semble invalide"},telephone:{format:"Le num\xe9ro de t\xe9l\xe9phone semble invalide"}},i.prototype.afterValidations={number:function(t,e,i){return e?i.val(t.replace(",",".")):void 0},telephone:function(t,e,i){return e?i.val(t.replace("+33","0")):void 0}},i.prototype.ui={housingType:"input[name='accommodation[housing_type]']",apartmentFloor:"input[name='accommodation[apartment_floor]']",apartmentBalcony:"input[name='accommodation[apartment_balcony]']",apartmentPosition:"input[name='accommodation[apartment_position]']",apartmentThrough:"input[name='accommodation[apartment_through]']",shape:"input[name='accommodation[shape]']",adjoining:"input[name='accommodation[adjoining]']",exterior:"#accommodation_exterior",gardenArea:"#accommodation_garden_area",zipcode:"#accommodation_zip_code",yearOfConstruction:"#accommodation_year_of_construction",buildingPermit:"#accommodation_building_permit",surfaceArea:"#accommodation_surface_area",apartmentType:"#accommodation_apartment_type",roofType:"input[name='accommodation[roof_type]']",humanLevels:"input[name='accommodation[human_levels]']",ceilingHeight:"#accommodation_ceiling_height",sunnyRoof:"input[name='accommodation[sunny_roof]']",roofOrientation:"#accommodation_roof_orientation",sunnyRoofSurface:"#accommodation_sunny_roof_surface",roofPitch:"#accommodation_roof_pitch",basement:"input[name='accommodation[basement]']",wall:{material:"input[name='accommodation[wall_material]']",thickness:"#accommodation_wall_thickness",insulation:"input[name='accommodation[wall_insulation]']",insulationType:"input[name='accommodation[wall_insulation_type]']",insulationMaterial:"#accommodation_wall_insulation_material",insulationThickness:"#accommodation_wall_insulation_thickness"},roof:{insulation:"input[name='accommodation[roof_insulation]']",insulationMaterial:"#accommodation_roof_insulation_material",insulationThickness:"#accommodation_roof_insulation_thickness"},floor:{insulation:"input[name='accommodation[floor_insulation]']",insulationMaterial:"#accommodation_floor_insulation_material",insulationThickness:"#accommodation_floor_insulation_thickness"},glazing:{type:"#accommodation_glazing_1_attributes_glazing_type",material:"input[name='accommodation[glazing_1_attributes][material]']",windowShutter:"input[name='accommodation[window_shutter]']"},facingSouthGlazing:"input[name='accommodation[facing_south_glazing]']",ventilationSystem:"#accommodation_ventilation_system",airLeaksWindows:"input[name='accommodation[air_leaks]']",airLeaks:{house:"[data-hash='65aa4711af8f30b1330eb3eb64d4a325'] #accommodation_air_leaks",apartment:"[data-hash='eb444c9d2df679908137c80420fcc5db'] #accommodation_air_leaks"},heatingSystem:{category:"#accommodation_heating_system_1_attributes_category",house:{heatingMode:"#accommodation_heating_system_1_attributes_heating_mode"},apartment:{sharingHeatingMode:"input[name='accommodation[heating_system_1_attributes][sharing_heating_mode]']",individualMeter:"input[name='accommodation[heating_system_1_attributes][individual_meter]']",individualHeatingMode:"[data-hash='e0457471ddca6880c14fa1a3d0ca5c48'] #accommodation_heating_system_1_attributes_heating_mode",collectiveHeatingMode:"[data-hash='13ec4fc20b1763b09e6e98df605e7714'] #accommodation_heating_system_1_attributes_heating_mode"},radiators:"#accommodation_heating_system_1_attributes_radiators",thermostaticValve:"input[name='accommodation[heating_system_1_attributes][thermostatic_valve]']'",scheduler:"input[name='accommodation[heating_system_1_attributes][scheduler]']"},hasSecondHeatingSystem:"input[name='accommodation[has_heating_system_2]']",secondHeatingSystem:{category:"#accommodation_heating_system_2_attributes_category",heatingMode:"#accommodation_heating_system_2_attributes_heating_mode",radiators:"#accommodation_heating_system_2_attributes_radiators",thermostaticValve:"input[name='accommodation[heating_system_2_attributes][thermostatic_valve]']'",scheduler:"input[name='accommodation[heating_system_2_attributes][scheduler]']",numberOfRooms:"#accommodation_heating_system_2_attributes_number_of_rooms"},heatingSystemNumberOfRooms:"#accommodation_heating_system_1_attributes_number_of_rooms",sharingDhwMode:"input[name='accommodation[sharing_dhw_mode]']",dhwIndividualMeter:"input[name='accommodation[dhw_individual_meter]']",dhwSystem:"#accommodation_dhw_system",solarPanels:"input[name='accommodation[has_solar_panels]']",panels:{type:"#accommodation_panels_type",power:"#accommodation_pv_panels_power"},numberOfOccupiers:"#accommodation_number_of_occupiers",mainGas:"input[name='accommodation[mains_gas]']",qualification:"input[name='accommodation[user_attributes][qualification]']",deadline:"#accommodation_user_attributes_project_deadline",civilite:"#accommodation_user_attributes_civilite",lastname:"#accommodation_user_attributes_nom",firstname:"#accommodation_user_attributes_prenom",email:"#accommodation_user_attributes_email",telephone:"#accommodation_user_attributes_telephone_perso"},i.prototype.validations={housingType:{required:!0},apartmentFloor:{required:!0,"if":function(){return this.hasApartment()}},apartmentBalcony:{required:!0,"if":function(){return this.hasApartment()&&_.contains(["intermediate_floor","top_floor"],this.ui.apartmentFloor.checked().val())}},apartmentPosition:{required:!0,"if":function(){return this.hasApartment()}},apartmentThrough:{required:!0,"if":function(){return this.hasApartment()}},shape:{required:!0,"if":function(){return this.hasHouse()}},adjoining:{required:!0,"if":function(){return this.hasHouse()}},exterior:{required:!0,"if":function(){return this.hasHouse()||this.hasApartment()&&"ground_floor"===this.ui.apartmentFloor.checked().val()}},gardenArea:{required:!0,number:!0,"if":function(){return this.hasHouse()&&_.contains(["garden","garden_and_courtyard"],this.ui.exterior.val())}},zipcode:{required:!0,format:"zipcode"},yearOfConstruction:{required:!0},buildingPermit:{required:!0,"if":function(){return"under_construction"===this.ui.yearOfConstruction.val()}},surfaceArea:{required:!0,number:!0,max:999},apartmentType:{required:!0,"if":function(){return this.hasApartment()}},roofType:{required:!0},humanLevels:{required:!0,"if":function(){return this.hasHouse()}},ceilingHeight:{required:!0},sunnyRoof:{required:!0,"if":function(){return this.hasHouse()}},roofOrientation:{required:!0,"if":function(){return this.hasSunnyRoof()}},sunnyRoofSurface:{required:!0,number:!0,"if":function(){return this.hasSunnyRoof()}},roofPitch:{required:!0,"if":function(){return this.hasSunnyRoof()}},basement:{required:!0},wallMaterial:{required:!0},wallThickness:{required:!0},wallInsulation:{required:!0},wallInsulationType:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationMaterial:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationThickness:{required:!0,"if":function(){return this.hasWallInsulation()}},roofInsulation:{required:!0},roofInsulationMaterial:{required:!0,"if":function(){return this.hasRoofInsulation()}},roofInsulationThickness:{required:!0,"if":function(){return this.hasRoofInsulation()}},floorInsulation:{required:!0},floorInsulationMaterial:{required:!0,"if":function(){return this.hasFloorInsulation()}},floorInsulationThickness:{required:!0,"if":function(){return this.hasFloorInsulation()}},glazingType:{required:!0},glazingMaterial:{required:!0},glazingWindowShutter:{required:!0},facingSouthGlazing:{required:!0},ventilationSystem:{required:!0},airLeaksWindows:{required:!0},airLeaksHouse:{required:!0,"if":function(){return this.hasHouse()}},airLeaksApartment:{required:!0,"if":function(){return this.hasApartment()}},heatingSystemApartmentSharingHeatingMode:{required:!0,"if":function(){return this.hasApartment()}},heatingSystemApartmentIndividualMeter:{required:!0,"if":function(){return this.hasCollectiveHeatingMode()}},heatingSystemCategory:{required:!0,"if":function(){return this.hasHouse()||this.hasApartment()&&this.ui.heatingSystemApartmentSharingHeatingMode.validate()}},heatingSystemApartmentCollectiveHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemCategory.validate()&&this.hasCollectiveHeatingMode()}},heatingSystemApartmentIndividualHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemCategory.validate()&&this.hasIndividualHeatingMode()}},heatingSystemHouseHeatingMode:{required:!0,"if":function(){return this.hasHouse()&&this.ui.heatingSystemCategory.validate()}},heatingSystemRadiators:{required:!0,"if":function(){return this.hasHeatingModeWithRadiators()}},heatingSystemThermostaticValve:{required:!0,"if":function(){return this.ui.heatingSystemCategory.validate()&&_.contains(["high_temp_radiators","low_temp_radiators"],this.ui.heatingSystemRadiators.val())}},heatingSystemScheduler:{required:!0},secondHeatingSystemCategory:{required:!0,"if":function(){return this.hasSecondHeatingSystem()}},secondHeatingSystemHeatingMode:{required:!0,"if":function(){return this.hasSecondHeatingSystem()&&this.ui.secondHeatingSystemCategory.validate()}},secondHeatingSystemRadiators:{required:!0,"if":function(){return this.hasHeatingModeWithRadiators("second")}},secondHeatingSystemThermostaticValve:{required:!0,"if":function(){return this.ui.secondHeatingSystemCategory.validate()&&_.contains(["high_temp_radiators","low_temp_radiators"],this.ui.secondHeatingSystemRadiators.val())}},secondHeatingSystemScheduler:{required:!0,"if":function(){return this.hasSecondHeatingSystem()}},secondHeatingSystemNumberOfRooms:{required:!0,number:!0,"if":function(){return this.hasSecondHeatingSystem()}},heatingSystemNumberOfRooms:{required:!0,number:!0,"if":function(){return this.hasSecondHeatingSystem()}},sharingDhwMode:{required:!0,"if":function(){return this.hasApartment()}},dhwIndividualMeter:{required:!0,"if":function(){return this.hasApartment()&&"collective"===this.ui.sharingDhwMode.checked().val()}},dhwSystem:{required:!0},solarPanels:{required:!0,"if":function(){return this.hasHouse()}},panelsType:{required:!0,"if":function(){return"true"===this.ui.solarPanels.checked().val()}},panelsPower:{required:!0,number:!0,"if":function(){return"photovoltaic"===this.ui.panelsType.val()}},numberOfOccupiers:{required:!0},mainGas:{required:!0},qualification:{required:!0},deadline:{required:!0,"if":function(){return _.contains(["projet_avec_devis","projet_sans_devis"],this.ui.qualification.checked().val())}},civilite:{required:!0,"if":function(){return this.ui.qualification.validate()}},lastname:{required:!0,"if":function(){return this.ui.qualification.validate()}},firstname:{required:!0,"if":function(){return this.ui.qualification.validate()}},email:{required:!0,format:"email","if":function(){return this.ui.qualification.validate()}},telephone:{required:!0,format:"telephone","if":function(){return this.ui.qualification.validate()}}},i.prototype.hasSunnyRoof=function(){return"true"===this.ui.sunnyRoof.checked().val()},i.prototype.hasWallInsulation=function(){return"yes"===this.ui.wallInsulation.checked().val()},i.prototype.hasRoofInsulation=function(){return"yes"===this.ui.roofInsulation.checked().val()},i.prototype.hasFloorInsulation=function(){return"yes"===this.ui.floorInsulation.checked().val()},i.prototype.hasCollectiveHeatingMode=function(){return this.hasApartment&&"collective"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()},i.prototype.hasIndividualHeatingMode=function(){return this.hasApartment&&"individual"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()},i.prototype.hasHeatingModeWithRadiators=function(t){var e;if(null==t&&(t="first"),e=["electric_boiler","condensing_oil_boiler","low_temp_oil_boiler","oil_boiler_1989","oil_boiler_1989_2000","oil_boiler_2000","condensing_lpg_boiler","low_temp_lpg_boiler","lpg_boiler_1989","lpg_boiler_1989_2000","lpg_boiler_2000","condensing_gas_boiler","low_temp_gas_boiler","gas_boiler_1989","gas_boiler_1989_2000","gas_boiler_2000","air_water_heat_pump","water_water_heat_pump","geothermal_heat_pump","wood_burning_boiler","pellet_boiler","coal_fired_boiler"],"first"===t){if(this.hasCollectiveHeatingMode())return!_.isEmpty(this.ui.heatingSystemApartmentCollectiveHeatingMode.val())&&_.contains(e,this.ui.heatingSystemApartmentCollectiveHeatingMode.val());if(this.hasIndividualHeatingMode())return!_.isEmpty(this.ui.heatingSystemApartmentIndividualHeatingMode.val())&&_.contains(e,this.ui.heatingSystemApartmentIndividualHeatingMode.val());if(this.ui.heatingSystemHouseHeatingMode.validate())return _.contains(e,this.ui.heatingSystemHouseHeatingMode.val())}else if("second"===t&&this.ui.secondHeatingSystemHeatingMode.validate())return _.contains(e,this.ui.secondHeatingSystemHeatingMode.val())},i.prototype.hasSecondHeatingSystem=function(){return this.hasHouse()&&"true"===this.ui.hasSecondHeatingSystem.checked().val()},i.prototype.hasHouse=function(){return"radio"===this.ui.housingType.attr("type")?"house"===this.ui.housingType.checked().val():"house"===this.ui.housingType.val()},i.prototype.hasApartment=function(){return"radio"===this.ui.housingType.attr("type")?"apartment"===this.ui.housingType.checked().val():"apartment"===this.ui.housingType.val()},i.prototype.initialize=function(){return this.ui.telephone.attr("maxlength",10)},i}(QuelleEnergie.Simulators.Validations.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Simulators.Validations.Heating=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autoValidations=!0,i.prototype.checkPreviousValidations=!0,i.prototype.locales={required:"Ce champ est obligatoire",number:"Ce champ doit \xeatre un nombre. Utilisez le point comme s\xe9parateur de d\xe9cimale plut\xf4t que la virgule",surfaceArea:{max:"La surface ne doit pas \xeatre sup\xe9rieur \xe0 1000 m\xb2"},zipcode:{format:"Le code postal n'est pas valide"},email:{format:"L'email semble invalide"},telephone:{format:"Le num\xe9ro de t\xe9l\xe9phone semble invalide"}},i.prototype.ui={housingType:"input[name='accommodation[housing_type]']",mainHome:"input[name='accommodation[main_home]']",shape:"input[name='accommodation[shape]']",yearOfConstruction:"#accommodation_year_of_construction",buildingPermit:"#accommodation_building_permit",surfaceArea:"#accommodation_surface_area",apartmentFloor:"input[name='accommodation[apartment_floor]']",apartmentBalcony:"input[name='accommodation[apartment_balcony]']",exterior:"#accommodation_exterior",gardenArea:"#accommodation_garden_area",heatingSystem:{house:{heatingMode:"#accommodation_heating_system_1_attributes_heating_mode"},apartment:{sharingHeatingMode:"input[name='accommodation[heating_system_1_attributes][sharing_heating_mode]']",individualMeter:"input[name='accommodation[heating_system_1_attributes][individual_meter]']",individualHeatingMode:"[data-hash='e0457471ddca6880c14fa1a3d0ca5c48'] #accommodation_heating_system_1_attributes_heating_mode",collectiveHeatingMode:"[data-hash='13ec4fc20b1763b09e6e98df605e7714'] #accommodation_heating_system_1_attributes_heating_mode"},category:"#accommodation_heating_system_1_attributes_category",radiators:"#accommodation_heating_system_1_attributes_radiators",thermostaticValve:"input[name='accommodation[heating_system_1_attributes][thermostatic_valve]']'",scheduler:"input[name='accommodation[heating_system_1_attributes][scheduler]']",numberOfRooms:"#accommodation_heating_system_1_attributes_number_of_rooms",annualInvoiceKnown:"input[name='accommodation[heating_system_1_attributes][annual_invoice_known]']",annualInvoice:"#accommodation_heating_system_1_attributes_annual_invoice"},hasSecondHeatingSystem:"input[name='accommodation[has_heating_system_2]']",secondHeatingSystem:{category:"#accommodation_heating_system_2_attributes_category",heatingMode:"#accommodation_heating_system_2_attributes_heating_mode",radiators:"#accommodation_heating_system_2_attributes_radiators",thermostaticValve:"input[name='accommodation[heating_system_2_attributes][thermostatic_valve]']'",scheduler:"input[name='accommodation[heating_system_2_attributes][scheduler]']",numberOfRooms:"#accommodation_heating_system_2_attributes_number_of_rooms",annualInvoice:"#accommodation_heating_system_2_attributes_annual_invoice"},sharingDhwMode:"input[name='accommodation[sharing_dhw_mode]']",dhwIndividualMeter:"input[name='accommodation[dhw_individual_meter]']",dhwSystem:"#accommodation_dhw_system",solarPanels:"input[name='accommodation[has_solar_panels]']",panels:{type:"#accommodation_panels_type",power:"#accommodation_pv_panels_power"},numberOfOccupiers:"#accommodation_number_of_occupiers",heatingTemperature:"#accommodation_heating_temperature",mainGas:"input[name='accommodation[mains_gas]']",zipcode:"#accommodation_zip_code",qualification:"#accommodation_user_attributes_qualification",deadline:"#accommodation_user_attributes_project_deadline",civilite:"#accommodation_user_attributes_civilite",lastname:"#accommodation_user_attributes_nom",firstname:"#accommodation_user_attributes_prenom",email:"#accommodation_user_attributes_email",telephone:"#accommodation_user_attributes_telephone_perso"},i.prototype.validations={mainHome:{required:!0},shape:{required:!0},yearOfConstruction:{required:!0},buildingPermit:{required:!0,"if":function(){return this.isUnderContruction()}},surfaceArea:{required:!0,number:!0,size:3},apartmentFloor:{required:!0,"if":function(){return this.hasApartment()}},apartmentBalcony:{required:!0,"if":function(){return this.hasApartment()&&_.contains(["intermediate_floor","top_floor"],this.ui.apartmentFloor.checked().val())}},exterior:{required:!0,"if":function(){return this.hasHouse()||this.hasApartment()&&"ground_floor"===this.ui.apartmentFloor.checked().val()}},gardenArea:{required:!0,number:!0,"if":function(){return this.hasHouse()&&this.hasGarden()}},heatingSystemApartmentSharingHeatingMode:{required:!0,"if":function(){return this.hasApartment()}},heatingSystemApartmentIndividualMeter:{required:!0,"if":function(){return this.hasCollectiveHeatingMode()}},heatingSystemCategory:{required:!0,"if":function(){return this.hasHouse()||this.hasApartment()&&this.ui.heatingSystemApartmentSharingHeatingMode.validate()}},heatingSystemApartmentCollectiveHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemCategory.validate()&&this.hasCollectiveHeatingMode()}},heatingSystemApartmentIndividualHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemCategory.validate()&&this.hasIndividualHeatingMode()
}},heatingSystemHouseHeatingMode:{required:!0,"if":function(){return this.hasHouse()&&this.ui.heatingSystemCategory.validate()}},heatingSystemRadiators:{required:!0,"if":function(){return this.hasHeatingModeWithRadiators()}},heatingSystemThermostaticValve:{required:!0,"if":function(){return this.ui.heatingSystemCategory.validate()&&_.contains(["high_temp_radiators","low_temp_radiators"],this.ui.heatingSystemRadiators.val())}},heatingSystemScheduler:{required:!0},heatingSystemAnnualInvoiceKnown:{required:!0},heatingSystemAnnualInvoice:{required:!0,number:!0,"if":function(){return"true"===this.ui.heatingSystemAnnualInvoiceKnown.checked().val()}},secondHeatingSystemCategory:{required:!0,"if":function(){return this.hasSecondHeatingSystem()}},secondHeatingSystemHeatingMode:{required:!0,"if":function(){return this.hasSecondHeatingSystem()&&this.ui.secondHeatingSystemCategory.validate()}},secondHeatingSystemRadiators:{required:!0,"if":function(){return this.hasHeatingModeWithRadiators("second")}},secondHeatingSystemThermostaticValve:{required:!0,"if":function(){return this.ui.secondHeatingSystemCategory.validate()&&_.contains(["high_temp_radiators","low_temp_radiators"],this.ui.secondHeatingSystemRadiators.val())}},secondHeatingSystemScheduler:{required:!0,"if":function(){return this.hasSecondHeatingSystem()}},secondHeatingSystemNumberOfRooms:{required:!0,number:!0,"if":function(){return this.hasSecondHeatingSystem()}},secondHeatingSystemAnnualInvoice:{required:!0,number:!0,"if":function(){return"true"===this.ui.heatingSystemAnnualInvoiceKnown.checked().val()}},heatingSystemNumberOfRooms:{required:!0,number:!0,"if":function(){return this.hasSecondHeatingSystem()}},sharingDhwMode:{required:!0,"if":function(){return this.hasApartment()}},dhwIndividualMeter:{required:!0,"if":function(){return this.hasApartment()&&"collective"===this.ui.sharingDhwMode.checked().val()}},dhwSystem:{required:!0},solarPanels:{required:!0,"if":function(){return this.hasHouse()}},panelsType:{required:!0,"if":function(){return"true"===this.ui.solarPanels.checked().val()}},panelsPower:{required:!0,number:!0,"if":function(){return"photovoltaic"===this.ui.panelsType.val()}},numberOfOccupiers:{required:!0},heatingTemperature:{required:!0},mainGas:{required:!0},zipcode:{required:!0,format:"zipcode"},civilite:{required:!0},lastname:{required:!0},firstname:{required:!0},email:{required:!0,format:"email"},telephone:{required:!0,format:"telephone"},qualification:{required:!0},deadline:{required:!0,"if":function(){return _.contains(["projet_avec_devis","projet_sans_devis"],this.ui.qualification.checked().val())}}},i.prototype.hasHouse=function(){return"house"===this.ui.housingType.checked().val()},i.prototype.hasApartment=function(){return"apartment"===this.ui.housingType.checked().val()},i.prototype.isUnderContruction=function(){return"under_construction"===this.ui.yearOfConstruction.val()},i.prototype.hasGarden=function(){return _.contains(["garden","garden_and_courtyard"],this.ui.exterior.val())},i.prototype.hasCollectiveHeatingMode=function(){return this.hasApartment&&"collective"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()},i.prototype.hasIndividualHeatingMode=function(){return this.hasApartment&&"individual"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()},i.prototype.hasHeatingModeWithRadiators=function(t){var e;if(null==t&&(t="first"),e=["electric_boiler","condensing_oil_boiler","low_temp_oil_boiler","oil_boiler_1989","oil_boiler_1989_2000","oil_boiler_2000","condensing_lpg_boiler","low_temp_lpg_boiler","lpg_boiler_1989","lpg_boiler_1989_2000","lpg_boiler_2000","condensing_gas_boiler","low_temp_gas_boiler","gas_boiler_1989","gas_boiler_1989_2000","gas_boiler_2000","air_water_heat_pump","water_water_heat_pump","geothermal_heat_pump","wood_burning_boiler","pellet_boiler","coal_fired_boiler"],"first"===t){if(this.hasCollectiveHeatingMode())return!_.isEmpty(this.ui.heatingSystemApartmentCollectiveHeatingMode.val())&&_.contains(e,this.ui.heatingSystemApartmentCollectiveHeatingMode.val());if(this.hasIndividualHeatingMode())return!_.isEmpty(this.ui.heatingSystemApartmentIndividualHeatingMode.val())&&_.contains(e,this.ui.heatingSystemApartmentIndividualHeatingMode.val());if(this.ui.heatingSystemHouseHeatingMode.validate())return _.contains(e,this.ui.heatingSystemHouseHeatingMode.val())}else if("second"===t&&this.ui.secondHeatingSystemHeatingMode.validate())return _.contains(e,this.ui.secondHeatingSystemHeatingMode.val())},i.prototype.hasSecondHeatingSystem=function(){return this.hasHouse()&&"true"===this.ui.hasSecondHeatingSystem.checked().val()},i}(QuelleEnergie.Simulators.Validations.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Simulators.Validations.Insulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autoValidations=!0,i.prototype.checkPreviousValidations=!0,i.prototype.locales={required:"Ce champ est obligatoire",number:"Ce champ doit \xeatre un nombre. Utilisez le point comme s\xe9parateur de d\xe9cimale plut\xf4t que la virgule",surfaceArea:{max:"La surface ne doit pas \xeatre sup\xe9rieur \xe0 1000 m\xb2"},zipcode:{format:"Le code postal n'est pas valide"},email:{format:"L'email semble invalide"},telephone:{format:"Le num\xe9ro de t\xe9l\xe9phone semble invalide"}},i.prototype.ui={housingType:"input[name='accommodation[housing_type]']",apartmentFloor:"input[name='accommodation[apartment_floor]']",apartmentBalcony:"input[name='accommodation[apartment_balcony]']",apartmentPosition:"input[name='accommodation[apartment_position]']",apartmentThrough:"input[name='accommodation[apartment_through]']",apartmentType:"#accommodation_apartment_type",shape:"input[name='accommodation[shape]']",adjoining:"input[name='accommodation[adjoining]']",surfaceArea:"#accommodation_surface_area",ceilingHeight:"#accommodation_ceiling_height",yearOfConstruction:"#accommodation_year_of_construction",buildingPermit:"#accommodation_building_permit",roofType:"input[name='accommodation[roof_type]']",humanLevels:"input[name='accommodation[human_levels]']",basement:"input[name='accommodation[basement]']",wall:{material:"input[name='accommodation[wall_material]']",thickness:"#accommodation_wall_thickness",insulation:"input[name='accommodation[wall_insulation]']",insulationType:"input[name='accommodation[wall_insulation_type]']",insulationMaterial:"#accommodation_wall_insulation_material",insulationThickness:"#accommodation_wall_insulation_thickness"},roof:{insulation:"input[name='accommodation[roof_insulation]']",insulationMaterial:"#accommodation_roof_insulation_material",insulationThickness:"#accommodation_roof_insulation_thickness"},floor:{insulation:"input[name='accommodation[floor_insulation]']",insulationMaterial:"#accommodation_floor_insulation_material",insulationThickness:"#accommodation_floor_insulation_thickness"},glazing:{type:"#accommodation_glazing_1_attributes_glazing_type",material:"input[name='accommodation[glazing_1_attributes][material]']",windowShutter:"input[name='accommodation[window_shutter]']"},facingSouthGlazing:"input[name='accommodation[facing_south_glazing]']",invoice:"#accommodation_invoice",ventilationSystem:"#accommodation_ventilation_system",airLeaks:"#accommodation_air_leaks",airLeaksWindows:"input[name='accommodation[air_leaks]']",noise:{pollution:"input[name='accommodation[noise_pollution]']",type:"#accommodation_noise_type",location:"#accommodation_noise_location"},zipcode:"#accommodation_zip_code",civilite:"#accommodation_user_attributes_civilite",lastname:"#accommodation_user_attributes_nom",firstname:"#accommodation_user_attributes_prenom",email:"#accommodation_user_attributes_email",telephone:"#accommodation_user_attributes_telephone_perso",qualification:"accommodation_user_attributes_qualification",deadline:"#accommodation_user_attributes_project_deadline"},i.prototype.validations={apartmentFloor:{required:!0,"if":function(){return this.hasApartment()}},apartmentBalcony:{required:!0,"if":function(){return this.hasApartment()&&_.contains(["intermediate_floor","top_floor"],this.ui.apartmentFloor.checked().val())}},apartmentPosition:{required:!0,"if":function(){return this.hasApartment()}},apartmentThrough:{required:!0,"if":function(){return this.hasApartment()}},apartmentType:{required:!0,"if":function(){return this.hasApartment()}},shape:{required:!0,"if":function(){return this.hasHouse()}},adjoining:{required:!0,"if":function(){return this.hasHouse()}},surfaceArea:{required:!0,number:!0,size:3},ceilingHeight:{required:!0},yearOfConstruction:{required:!0},buildingPermit:{required:!0,"if":function(){return"under_construction"===this.ui.yearOfConstruction.val()}},roofType:{required:!0},humanLevels:{required:!0,"if":function(){return this.hasHouse()}},basement:{required:!0,"if":function(){return this.hasHouse()||this.hasApartment()&&this.ui.apartmentFloor.validate()}},wallMaterial:{required:!0},wallThickness:{required:!0},wallInsulation:{required:!0},wallInsulationType:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationMaterial:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationThickness:{required:!0,"if":function(){return this.hasWallInsulation()}},roofInsulation:{required:!0},roofInsulationMaterial:{required:!0,"if":function(){return this.hasRoofInsulation()}},roofInsulationThickness:{required:!0,"if":function(){return this.hasRoofInsulation()}},floorInsulation:{required:!0},floorInsulationMaterial:{required:!0,"if":function(){return this.hasFloorInsulation()}},floorInsulationThickness:{required:!0,"if":function(){return this.hasFloorInsulation()}},glazingType:{required:!0},glazingMaterial:{required:!0},glazingWindowShutter:{required:!0},facingSouthGlazing:{required:!0},invoice:{required:!0,number:!0},ventilationSystem:{required:!0},airLeaks:{required:!0,"if":function(){return this.hasHouse()}},airLeaksWindows:{required:!0,"if":function(){return this.hasApartment()}},noisePollution:{required:!0},noiseType:{required:!0,"if":function(){return"true"===this.ui.noisePollution.checked().val()}},noiseLocation:{required:!0,"if":function(){return"true"===this.ui.noisePollution.checked().val()}},zipcode:{required:!0,format:"zipcode"},civilite:{required:!0},lastname:{required:!0},firstname:{required:!0},email:{required:!0,format:"email"},telephone:{required:!0,format:"telephone"},qualification:{required:!0},deadline:{required:!0,"if":function(){return _.contains(["projet_avec_devis","projet_sans_devis"],this.ui.qualification.checked().val())}}},i.prototype.hasWallInsulation=function(){return"yes"===this.ui.wallInsulation.checked().val()},i.prototype.hasRoofInsulation=function(){return"yes"===this.ui.roofInsulation.checked().val()},i.prototype.hasFloorInsulation=function(){return"yes"===this.ui.floorInsulation.checked().val()},i.prototype.hasHouse=function(){return"house"===this.ui.housingType.checked().val()},i.prototype.hasApartment=function(){return"apartment"===this.ui.housingType.checked().val()},i}(QuelleEnergie.Simulators.Validations.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Simulators.Validations.Subsidies=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autoValidations=!0,i.prototype.checkPreviousValidations=!0,i.prototype.locales={required:"Ce champ est obligatoire",number:"Ce champ doit \xeatre un nombre. Utilisez le point comme s\xe9parateur de d\xe9cimale plut\xf4t que la virgule",alternateCustodyChildren:{custom:"Le nombre de personnes \xe0 charge doit \xeatre sup\xe9rieur au nombre d'enfants en garde altern\xe9e"},surfaceArea:{max:"La surface ne doit pas \xeatre sup\xe9rieur \xe0 1000 m\xb2"},zipcode:{format:"Le code postal n'est pas valide"},taxRevenue:{range:"Vos revenus fiscaux doivent \xeatre compris entre 0 et 1.000.000"},email:{format:"L'email semble invalide"},telephone:{format:"Le num\xe9ro de t\xe9l\xe9phone semble invalide"}},i.prototype.ui={ownerStatus:"#personal_information_owner_status",maritalStatus:"#personal_information_marital_status",jointTaxation:"input[name='personal_information[joint_taxation]']",dependantPersons:"#personal_information_dependant_persons",alternateCustodyChildren:"#personal_information_alternate_custody_children",taxRevenue:"#personal_information_tax_revenue",zipcode:"#accommodation_zip_code",exactYearOfConstruction:"#personal_information_exact_year_of_construction",surfaceArea:"#accommodation_surface_area",housingType:"input[name='accommodation[housing_type]']",heatingSystem:{house:{category:"[data-hash='65aa4711af8f30b1330eb3eb64d4a325'] #accommodation_heating_system_1_attributes_category",heatingMode:"[data-hash='65aa4711af8f30b1330eb3eb64d4a325'] #accommodation_heating_system_1_attributes_heating_mode"},apartment:{sharingHeatingMode:"input[name='accommodation[heating_system_1_attributes][sharing_heating_mode]']",category:"[data-hash='e6ebe7de6988b9c27eb4d647bfe27fce'] #accommodation_heating_system_1_attributes_category",individualHeatingMode:"[data-hash='e0457471ddca6880c14fa1a3d0ca5c48'] #accommodation_heating_system_1_attributes_heating_mode",collectiveHeatingMode:"[data-hash='13ec4fc20b1763b09e6e98df605e7714'] #accommodation_heating_system_1_attributes_heating_mode"}},taxCredit:{"boolean":"input[name='personal_information[tax_credit_boolean]']",year:"#personal_information_tax_credit_year"},changedMaritalStatus:"input[name='personal_information[changed_marital_status]']",presentedAmount:"#personal_information_presented_amount",ecoLoan:{"boolean":"input[name='personal_information[eco_loan_boolean]']",year:"#personal_information_eco_loan_year"},anah:{"boolean":"input[name='personal_information[better_living_anah_boolean]']",year:"#personal_information_better_living_anah_year"},firstWork:{solutionName:"#simulation_work_1_solution_name",firstCondition:"#simulation_work_1_first_condition",secondCondition:"#simulation_work_1_second_condition",amountEquipment:"#simulation_work_1_amount_equipment",amountInstallation:"#simulation_work_1_amount_installation"},secondWork:{solutionName:"#simulation_work_2_solution_name",firstCondition:"#simulation_work_2_first_condition",secondCondition:"#simulation_work_2_second_condition",amount:{equipment:"#simulation_work_2_amount_equipment",installation:"#simulation_work_2_amount_installation"}},thirdWork:{solutionName:"#simulation_work_3_solution_name",firstCondition:"#simulation_work_3_first_condition",secondCondition:"#simulation_work_3_second_condition",amount:{equipment:"#simulation_work_3_amount_equipment",installation:"#simulation_work_3_amount_installation"}},sunnyRoof:"input[name='accommodation[sunny_roof]']",roof:{orientation:"#accommodation_roof_orientation",surface:"#accommodation_sunny_roof_surface",pitch:"#accommodation_roof_pitch"},dhwSystem:"#accommodation_dhw_system",exterior:"#accommodation_exterior",gardenArea:"#accommodation_garden_area",apartmentBalcony:"input[name='accommodation[apartment_balcony]']",apartmentFloor:"input[name='accommodation[apartment_floor]']",roofInsulation:"input[name='accommodation[roof_insulation]']",roofInsulationMaterial:"#accommodation_roof_insulation_material",roofInsulationThickness:"#accommodation_roof_insulation_thickness",wall:{material:"input[name='accommodation[wall_material]']",thickness:"#accommodation_wall_thickness",insulation:"input[name='accommodation[wall_insulation]']",insulationType:"input[name='accommodation[wall_insulation_type]']",insulationMaterial:"#accommodation_wall_insulation_material",insulationThickness:"#accommodation_wall_insulation_thickness"},glazing:{type:"#accommodation_glazing_1_attributes_glazing_type",material:"input[name='accommodation[glazing_1_attributes][material]']"},civilite:"#accommodation_user_attributes_civilite",lastname:"#accommodation_user_attributes_nom",firstname:"#accommodation_user_attributes_prenom",email:"#accommodation_user_attributes_email",telephone:"#accommodation_user_attributes_telephone_perso",qualification:"#accommodation_user_attributes_qualification"},i.prototype.validations={ownerStatus:{required:!0},maritalStatus:{required:!0},jointTaxation:{required:!0,"if":function(){return _.contains(["married","civil_union"],this.ui.maritalStatus.val())}},dependantPersons:{required:!0},alternateCustodyChildren:{custom:function(){return this.ui.dependantPersons.val()>=this.ui.alternateCustodyChildren.val()},"if":function(){return this.ui.dependantPersons.validate()}},taxRevenue:{required:!0,range:[0,1e6]},zipcode:{required:!0,format:"zipcode"},exactYearOfConstruction:{required:!0},surfaceArea:{required:!0,number:!0,size:3},housingType:{required:!0},heatingSystemHouseCategory:{required:!0,"if":function(){return this.hasHouse()}},heatingSystemHouseHeatingMode:{required:!0,"if":function(){return this.hasHouse()&&this.ui.heatingSystemHouseCategory.validate()}},heatingSystemApartmentSharingHeatingMode:{required:!0,"if":function(){return this.hasApartment()}},heatingSystemApartmentCategory:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemApartmentSharingHeatingMode.validate()}},heatingSystemApartmentCollectiveHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemApartmentCategory.validate()&&"collective"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()}},heatingSystemApartmentIndividualHeatingMode:{required:!0,"if":function(){return this.hasApartment()&&this.ui.heatingSystemApartmentCategory.validate()&&"individual"===this.ui.heatingSystemApartmentSharingHeatingMode.checked().val()}},taxCreditYear:{required:!0,"if":function(){return"true"===this.ui.taxCreditBoolean.checked().val()}},changedMaritalStatus:{required:!0,"if":function(){return"true"===this.ui.taxCreditBoolean.checked().val()&&this.ui.taxCreditYear.validate()}},presentedAmount:{required:!0,number:!0,"if":function(){return"false"===this.ui.changedMaritalStatus.checked().val()}},ecoLoanYear:{required:!0,"if":function(){return"true"===this.ui.ecoLoanBoolean.checked().val()}},anahYear:{required:!0,"if":function(){return"true"===this.ui.anahBoolean.checked().val()}},firstWorkSolutionName:{required:!0},firstWorkFirstCondition:{required:!0,"if":function(){return this.firstConditionRequired("firstWork")}},firstWorkSecondCondition:{required:!0,"if":function(){return this.secondConditionRequired("firstWork")}},firstWorkAmountEquipment:{required:!0},firstWorkAmountInstallation:{required:!0},secondWorkFirstCondition:{required:!0,"if":function(){return this.hasSecondWork()&&this.firstConditionRequired("secondWork")}},secondWorkSecondCondition:{required:!0,"if":function(){return this.hasSecondWork()&&this.secondConditionRequired("secondWork")}},secondWorkAmountEquipment:{required:!0,"if":function(){return this.hasSecondWork()}},secondWorkAmountInstallation:{required:!0,"if":function(){return this.hasSecondWork()}},thirdWorkFirstCondition:{required:!0,"if":function(){return this.hasThirdWork&&this.firstConditionRequired("thirdWork")}},thirdWorkSecondCondition:{required:!0,"if":function(){return this.hasThirdWork&&this.secondConditionRequired("thirdWork")}},thirdWorkAmountEquipment:{required:!0,"if":function(){return this.hasThirdWork}},thirdWorkAmountInstallation:{required:!0,"if":function(){return this.hasThirdWork}},sunnyRoof:{required:!0,"if":function(){return this.hasHouse()&&this.hasSunnySolutions}},roofOrientation:{required:!0,"if":function(){return this.hasSunnyRoof()}},roofSurface:{required:!0,number:!0,"if":function(){return this.hasSunnyRoof()}},roofPitch:{required:!0,"if":function(){return this.hasSunnyRoof()}},dhwSystem:{required:!0,"if":function(){return this.hasSolutions("thermodynamic_water_heater")}},exterior:{required:!0,"if":function(){return this.hasSolutions(["air_air_heat_pump","air_water_heat_pump","geothermal_heat_pump"])}},gardenArea:{required:!0,number:!0,"if":function(){return this.hasHouse()&&_.contains(["garden","garden_and_courtyard"],this.ui.exterior.checked().val())}},apartmentBalcony:{required:!0,"if":function(){return this.hasApartment()&&"nothing"===this.ui.exterior.checked().val()}},apartmentFloor:{required:!0,"if":function(){return this.hasApartment()&&this.hasSolutions("attic_isolation")}},roofInsulation:{required:!0,"if":function(){return this.hasSolutions("attic_isolation")}},roofInsulationMaterial:{required:!0,"if":function(){return this.hasRoofInsulation}},roofInsulationThickness:{required:!0,"if":function(){return this.hasRoofInsulation}},wallMaterial:{required:!0,"if":function(){return this.hasInsulationSolutions()}},wallThickness:{required:!0,"if":function(){return this.hasInsulationSolutions()}},wallInsulation:{required:!0,"if":function(){return this.hasInsulationSolutions()}},wallInsulationType:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationMaterial:{required:!0,"if":function(){return this.hasWallInsulation()}},wallInsulationThickness:{required:!0,"if":function(){return this.hasWallInsulation()}},glazingType:{required:!0,"if":function(){return this.hasSolutions("double_glazing")}},glazingMaterial:{required:!0,"if":function(){return this.hasSolutions("double_glazing")}},civilite:{required:!0},lastname:{required:!0},firstname:{required:!0},email:{required:!0,format:"email"},telephone:{required:!0,format:"telephone"},qualification:{required:!0}},i.prototype.firstConditionRequired=function(t){return void 0===this.ui.housingType.checked().val()?!0:this.hasHouse()?_.contains(["solar_water_heater","combined_solar_system","attic_isolation","internal_wall_insulation","floor_insulation ","double_glazing"],this.ui[t+"SolutionName"].val()):this.hasApartment()?_.contains(["solar_water_heater","combined_solar_system","attic_isolation","internal_wall_insulation","floor_insulation ","double_glazing","external_wall_insulation"],this.ui[t+"SolutionName"].val()):void 0},i.prototype.secondConditionRequired=function(t){return"double_glazing"===this.ui[t+"SolutionName"].val()},i.prototype.hasSolutions=function(t){return t=_.isString(t)?[t]:t,_.contains(t,this.ui.firstWorkSolutionName.val())||_.contains(t,this.ui.secondWorkSolutionName.val())||_.contains(t,this.ui.thirdWorkSolutionName.val())?!0:!1},i.prototype.hasSunnySolutions=function(){var t;return t=["solar_water_heater","combined_solar_system","photovoltaic_panel"],this.hasSolutions(t)},i.prototype.hasSunnyRoof=function(){return"true"===this.ui.sunnyRoof.checked().val()},i.prototype.hasWallInsulation=function(){return"yes"===this.ui.wallInsulation.checked().val()},i.prototype.hasInsulationSolutions=function(){var t;return t=["internal_wall_insulation","external_wall_insulation"],this.hasSolutions(t)},i.prototype.hasRoofInsulation=function(){return"yes"===this.ui.roofInsulation.checked().val()},i.prototype.hasSecondWork=function(){return!_.isEmpty(this.ui.secondWorkSolutionName.checked().val())},i.prototype.hasThirdWork=function(){return!_.isEmpty(this.ui.thirdWorkSolutionName.checked().val())},i.prototype.hasHouse=function(){return"house"===this.ui.housingType.checked().val()},i.prototype.hasApartment=function(){return"apartment"===this.ui.housingType.checked().val()},i}(QuelleEnergie.Simulators.Validations.Base)}.call(this),function(){jQuery(function(t){return window.data_conditionnal_help=function(){return t("[data-conditionnal-help]").each(function(){var e;return e=t(this),t.each(e.data("conditionnal-help"),function(i,n){var o;return o=t("[name='"+i+"']"),o.change(function(){var t;return t=n[this.value],e.text(t)})})})},window.data_conditionnal_help()})}.call(this),function(t,e){var i;t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},handleRemote:function(n){var o,r,s,a,u=n.data("cross-domain")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType;if(i.fire(n,"ajax:before")){if(n.is("form")){o=n.attr("method"),r=n.attr("action"),s=n.serializeArray();var c=n.data("ujs:submit-button");c&&(s.push(c),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=n.attr("href"),s=n.data("params")||null);return a={type:o||"GET",data:s,dataType:l,crossDomain:u,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[t,o])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])}},r&&(a.url=r),i.ajax(a)}return!1},handleMethod:function(i){var n=i.attr("href"),o=i.data("method"),r=i.attr("target"),s=t("meta[name=csrf-token]").attr("content"),a=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+n+'"></form>'),l='<input name="_method" value="'+o+'" type="hidden" />';a!==e&&s!==e&&(l+='<input name="'+a+'" value="'+s+'" type="hidden" />'),r&&u.attr("target",r),u.hide().append(l).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),o=!1;return n?(i.fire(t,"confirm")&&(o=i.confirm(n),e=i.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,i,n){var o,r=t(),s=i||"input,textarea";return e.find(s).each(function(){o=t(this),(n?o.val():!o.val())&&(r=r.add(o))}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var o=i.data("events"),r=!0;return o!==e&&o.submit!==e&&t.each(o.submit,function(t,e){return"function"==typeof e.handler?r=e.handler(n):void 0}),r},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),t(document).delegate(i.linkClickSelector,"click.rails",function(n){var o=t(this),r=o.data("method"),s=o.data("params");return i.allowAction(o)?(o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==e?!n.metaKey&&!n.ctrlKey||r&&"GET"!==r||s?(i.handleRemote(o)===!1&&i.enableElement(o),!1):!0:o.data("method")?(i.handleMethod(o),!1):void 0):i.stopEverything(n)}),t(document).delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),t(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var o=t(this),r=o.data("remote")!==e,s=i.blankInputs(o,i.requiredInputSelector),a=i.nonBlankInputs(o,i.fileInputSelector);return i.allowAction(o)?s&&o.attr("novalidate")==e&&i.fire(o,"ajax:aborted:required",[s])?i.stopEverything(n):r?a?i.fire(o,"ajax:aborted:file",[a]):!t.support.submitBubbles&&t().jquery<"1.7"&&i.callFormSubmitBindings(o,n)===!1?i.stopEverything(n):(i.handleRemote(o),!1):void setTimeout(function(){i.disableFormElements(o)},13):i.stopEverything(n)}),t(document).delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),t(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),t(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))})}(jQuery),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,o){t.Backbone=e(t,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var o=t.Backbone,r=[],s=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var o=this,r=i.once(function(){o.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var o,r,s,a,u,c,h,d;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),u=0,c=a.length;c>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=o=[],e||n)for(h=0,d=s.length;d>h;h++)r=s[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var o=this._listeningTo;if(!o)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((o={})[t._listenId]=t);for(var s in o)t=o[s],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[s];return this}},u=/\s+/,l=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(u.test(i)){for(var r=i.split(u),s=0,a=r.length;a>s;s++)t[e].apply(t,[r[s]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(t,e){a[e]=function(e,n,o){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=i.uniqueId("l"));return r[s]=e,o||"object"!=typeof n||(o=this),e[t](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var o,r,s,a,u,l,c,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;s=n.unset,u=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);
for(o in r)e=r[o],i.isEqual(h[o],e)||a.push(o),i.isEqual(c[o],e)?delete this.changed[o]:this.changed[o]=e,s?delete h[o]:h[o]=e;if(!u){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(l)return this;if(!u)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(o[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},I(this,t),this.sync("read",this,t)},save:function(t,e,n){var o,r,s,a=this.attributes;if(null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var u=this,l=n.success;return n.success=function(t){u.attributes=a;var e=u.parse(t,n);return n.wait&&(e=i.extend(o||{},e)),i.isObject(e)&&!u.set(e,n)?!1:(l&&l(u,t,n),void u.trigger("sync",u,t,n))},I(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=o),s=this.sync(r,this,n),o&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&o(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;I(this,t);var r=this.sync("delete",this,t);return t.wait||o(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||Q();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var o,r,s,a;for(o=0,r=t.length;r>o;o++)a=t[o]=this.get(t[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var o,r,s,a,u,l,c,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},b=e.add,w=e.merge,S=e.remove,C=!f&&b&&S?[]:!1;for(o=0,r=t.length;r>o;o++){if(u=t[o]||{},s=u instanceof d?a=u:u[p.prototype.idAttribute||"id"],l=this.get(s))S&&(_[l.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),f&&!c&&l.hasChanged(g)&&(c=!0)),t[o]=l;else if(b){if(a=t[o]=this._prepareModel(u,e),!a)continue;v.push(a),this._addReference(a,e)}a=l||a,!C||!a.isNew()&&_[a.id]||C.push(a),_[a.id]=!0}if(S){for(o=0,r=this.length;r>o;++o)_[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(f&&(c=!0),this.length+=v.length,null!=h)for(o=0,r=v.length;r>o;o++)this.models.splice(h+o,0,v[o]);else{C&&(this.models.length=0);var k=C||v;for(o=0,r=k.length;r>o;o++)this.models.push(k[o])}if(c&&this.sort({silent:!0}),!e.silent){for(o=0,r=v.length;r>o;o++)(a=v[o]).trigger("add",a,this,e);(c||C&&C.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,o=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),o&&o(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var o=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,o,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var o=e.match(b),r=o[1],s=o[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,o){var r=C[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||Q()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&S&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=o.xhr=e.ajax(i.extend(s,o));return n.trigger("request",n,u,o),u};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,T=/\*\w+/g,q=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,a,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return e.history.route(t,function(i){var s=r._extractParameters(t,i);r.execute(o,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(q,"\\$&").replace(x,"(?:$1)?").replace(E,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,V=/msie [\w.]+/,A=/\/$/,P=/#.*$/;M.started=!1,i.extend(M.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(A,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace($,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,r=V.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(j,"/"),r&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace($,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!M.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new M;var R=function(t,e){var n,o=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=o.prototype,n};d.extend=f.extend=k.extend=_.extend=M.extend=R;var Q=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,n){return t.Marionette=e(t,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(t,i,n)}else t.Marionette=e(t,t.Backbone,t._)}(this,function(t,e,i){"use strict";function n(t,e){var i=new Error(t);throw i.name=e||"Error",i}!function(t,e){var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.4",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}(e,i),function(t,e){var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.1",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,i,n){var o=this.storage.getCommands(t);e.each(o.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(n),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(){var i=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var o="vent"===t?"on":"setHandler";e.each(i,function(i,r){this[t][o](r,e.bind(i,n))},this)}}}),i}(n),n.radio=function(t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=o(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(t,e,i){return function(n){var o=t._getChannel(n)[e],r=Array.prototype.slice.call(arguments,1);return o[i].apply(o,r)}};return new i}(n),t.Wreqr}(e,i);var o=t.Marionette,r=e.Marionette={};r.VERSION="2.1.0",r.noConflict=function(){return t.Marionette=o,this},e.Marionette=r,r.Deferred=e.$.Deferred;var s=Array.prototype.slice;return r.extend=e.Model.extend,r.getOption=function(t,e){if(t&&e){var i;return i=t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},r.proxyGetOption=function(t){return r.getOption(this,t)},r.normalizeMethods=function(t){var e={};return i.each(t,function(t,n){i.isFunction(t)||(t=this[t]),t&&(e[n]=t)},this),e},r.normalizeUIKeys=function(t,e){return"undefined"!=typeof t?(i.each(i.keys(t),function(i){var n=/@ui\.[a-zA-Z_$0-9]*/g;i.match(n)&&(t[i.replace(n,function(t){return e[t.slice(4)]})]=t[i],delete t[i])}),t):void 0},r.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),o=[t].concat(i.toArray(arguments));return i[n].apply(i,o)}})},r.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi,n=function(n){var o,r="on"+n.replace(e,t),s=this[r];return i.isFunction(s)&&(o=s.apply(this,i.tail(arguments))),i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),o};return n}(),r.MonitorDOMRefresh=function(t){function n(t){t._isShown=!0,r(t)}function o(t){t._isRendered=!0,r(t)}function r(t){t._isShown&&t._isRendered&&s(t)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function s(i){return e.$.contains(t,i.el)}return function(t){t.listenTo(t,"show",function(){n(t)}),t.listenTo(t,"render",function(){o(t)})}}(document.documentElement),function(t){function e(t,e,o,r){var s=r.split(/\s+/);i.each(s,function(i){var r=t[i];r||n('Method "'+i+'" was configured as an event handler, but does not exist.'),t.listenTo(e,o,r)})}function o(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,o){var r=o.split(/\s+/);i.each(r,function(i){var o=t[i];t.stopListening(e,n,o)})}function s(t,e,i,n){t.stopListening(e,i,n)}function a(t,e,n,o,r){e&&n&&(i.isFunction(n)&&(n=n.call(t)),i.each(n,function(n,s){i.isFunction(n)?o(t,e,s,n):r(t,e,s,n)}))}t.bindEntityEvents=function(t,i,n){a(t,i,n,o,e)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,s,r)},t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)},t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}}(r),r.Callbacks=function(){this._deferred=r.Deferred(),this._callbacks=[]},i.extend(r.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e}),n.then(function(i){e&&(i.context=e),t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=r.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),r.Controller=function(t){this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,i.extend(r.Controller.prototype,e.Events,{destroy:function(){var t=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.triggerMethod.apply(this,["destroy"].concat(t)),this.stopListening(),this.off(),this},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption}),r.Object=function(t){this.options=i.extend({},i.result(this,"options"),t),this.initialize(this.options)},r.Object.extend=r.extend,i.extend(r.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),i.extend(r.Object.prototype,e.Events),r.Region=function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,this.el||n('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el),this.initialize){var i=s.apply(arguments);this.initialize.apply(this,i)}},i.extend(r.Region,{buildRegion:function(t,e){return i.isString(t)?this._buildRegionFromSelector(t,e):t.selector||t.el||t.regionClass?this._buildRegionFromObject(t,e):i.isFunction(t)?this._buildRegionFromRegionClass(t):void n("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,n){var o=t.regionClass||n,r=i.omit(t,"selector","regionClass");t.selector&&!r.el&&(r.el=t.selector);var s=new o(r);return t.parentEl&&(s.getEl=function(n){if(i.isObject(n))return e.$(n);var o=t.parentEl;return i.isFunction(o)&&(o=o()),o.find(n)}),s},_buildRegionFromRegionClass:function(t){return new t}}),i.extend(r.Region.prototype,e.Events,{show:function(t,e){this._ensureElement();var n=e||{},o=t!==this.currentView,r=!!n.preventDestroy,s=!!n.forceShow,a=!!this.currentView,u=!r&&o;u&&this.empty();var l=o||s;return l?(t.once("destroy",i.bind(this.empty,this)),t.render(),a&&this.triggerMethod("before:swap",t),this.triggerMethod("before:show",t),i.isFunction(t.triggerMethod)?t.triggerMethod("before:show"):this.triggerMethod.call(t,"before:show"),this.attachHtml(t),this.currentView=t,a&&this.triggerMethod("swap",t),this.triggerMethod("show",t),i.isFunction(t.triggerMethod)?t.triggerMethod("show"):this.triggerMethod.call(t,"show"),this):this},_ensureElement:function(){i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),this.$el&&0!==this.$el.length||n('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(t){return e.$(t)},attachHtml:function(t){this.el.innerHTML="",this.el.appendChild(t.el)},empty:function(){var t=this.currentView;if(t)return this.triggerMethod("before:empty",t),this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,this},_destroyView:function(){var t=this.currentView;t.destroy&&!t.isDestroyed?t.destroy():t.remove&&t.remove()},attachView:function(t){return this.currentView=t,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this},getOption:r.proxyGetOption,triggerMethod:r.triggerMethod}),r.Region.extend=r.extend,r.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.call(this,e)},addRegions:function(t,e){i.isFunction(t)&&(t=t.apply(this,arguments));var n={};return i.each(t,function(t,o){i.isString(t)&&(t={selector:t}),t.selector&&(t=i.defaults({},t,e));var r=this.addRegion(o,t);n[o]=r},this),n},addRegion:function(e,n){var o,r=i.isObject(n),s=i.isString(n),a=!!n.selector;return o=s||r&&a?t.Region.buildRegion(n,t.Region):i.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this.triggerMethod("before:add:region",e,o),this._store(e,o),this.triggerMethod("add:region",e,o),o},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];return this._remove(t,e),e},removeRegions:function(){var t=this.getRegions();return i.each(this._regions,function(t,e){this._remove(e,t)},this),t},emptyRegions:function(){var t=this.getRegions();return i.each(t,function(t){t.empty()},this),t},destroy:function(){return this.removeRegions(),t.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e),e.empty(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("remove:region",t,e)},_setLength:function(){this.length=i.size(this._regions)}});return t.actAsCollection(e.prototype,"_regions"),e}(r),r.TemplateCache=function(t){this.templateId=t},i.extend(r.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new r.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=s.call(arguments),i=e.length;if(i>0)for(t=0;i>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var i=e.$(t).html();return i&&0!==i.length||n('Could not find template: "'+t+'"',"NoTemplateError"),i},compileTemplate:function(t){return i.template(t)}}),r.Renderer={render:function(t,e){t||n("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof t?t:r.TemplateCache.get(t))(e)}},r.View=e.View.extend({constructor:function(t){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new r.Behaviors(this),e.View.apply(this,arguments),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,s.call(arguments,1))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return i.isFunction(e)&&(e=e.call(this)),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"ui"),n=i.result(this,"_uiBindings");return r.normalizeUIKeys(t,n||e)},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(e,function(e,n){var o=i.isObject(e),r=o?e.event:e;t[n]=function(t){if(t){var i=t.preventDefault,n=t.stopPropagation,s=o?e.preventDefault:i,a=o?e.stopPropagation:n;s&&i&&i.apply(t),a&&n&&n.apply(t)}var u={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,u)}},this),t}},delegateEvents:function(t){return this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),this},_delegateDOMEvents:function(t){t=t||this.events,i.isFunction(t)&&(t=t.call(this)),t=this.normalizeUIKeys(t);var n={},o=i.result(this,"behaviorEvents")||{},r=this.configureTriggers();i.extend(n,o,t,r),e.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=s.call(arguments);return e.View.prototype.undelegateEvents.apply(this,t),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var t=new Error("Cannot use a view thats already been destroyed.");throw t.name="ViewDestroyedError",t}},destroy:function(){if(!this.isDestroyed){var t=s.call(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.remove(),this
}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:r.triggerMethod,normalizeMethods:r.normalizeMethods,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.ItemView=r.View.extend({constructor:function(){r.View.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=i.partial(this.serializeModel,this.model).apply(this,arguments):this.collection&&(t={items:i.partial(this.serializeCollection,this.collection).apply(this,arguments)}),t},serializeCollection:function(t){return t.toJSON.apply(t,s.call(arguments,1))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var t=this.getTemplate();if(t!==!1){t||n("Cannot render the template since it is null or undefined.","UndefinedTemplateError");var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=r.Renderer.render(t,e,this);return this.attachElContent(i),this}},attachElContent:function(t){return this.$el.html(t),this},destroy:function(){return this.isDestroyed?void 0:r.View.prototype.destroy.apply(this,arguments)}}),r.CollectionView=r.View.extend({childViewEventPrefix:"childview",constructor:function(t){var e=t||{};this.sort=i.isUndefined(e.sort)?!0:e.sort,this._initChildViewStorage(),r.View.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.invoke(this._bufferedChildren,"triggerMethod","before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):r.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t){this.destroyEmptyView();var e=this.getChildView(t),i=this.collection.indexOf(t);this.addChild(t,e,i)},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},onShowCalled:function(){this.children.each(function(t){i.isFunction(t.triggerMethod)?t.triggerMethod("show"):r.triggerMethod.call(t,"show")})},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var t=this.collection.find(function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this);t&&this.resortView()},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getChildView(e),this.addChild(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new e.Model;this.addEmptyView(i,t),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this));var o=this.buildChildView(t,e,n);this._isShown&&this.triggerMethod.call(o,"before:show"),this.children.add(o),this.renderChildView(o,-1),this._isShown&&this.triggerMethod.call(o,"show")},getChildView:function(){var t=this.getOption("childView");return t||n('A "childView" must be specified',"NoChildViewError"),t},addChild:function(t,e,n){var o=this.getOption("childViewOptions");i.isFunction(o)&&(o=o.call(this,t,n));var r=this.buildChildView(t,e,o);return this._updateIndices(r,!0,n),this._addChildView(r,n),r},_updateIndices:function(t,e,i){this.sort&&(e?(t._index=i,this.children.each(function(e){e._index>=t._index&&e._index++})):this.children.each(function(e){e._index>=t._index&&e._index--}))},_addChildView:function(t,e){this.proxyChildEvents(t),this.triggerMethod("before:add:child",t),this.children.add(t),this.renderChildView(t,e),this._isShown&&!this.isBuffering&&(i.isFunction(t.triggerMethod)?t.triggerMethod("show"):r.triggerMethod.call(t,"show")),this.triggerMethod("add:child",t)},renderChildView:function(t,e){return t.render(),this.attachHtml(this,t,e),t},buildChildView:function(t,e,n){var o=i.extend({model:t},n);return new e(o)},removeChildView:function(t){return t&&(this.triggerMethod("before:remove:child",t),t.destroy?t.destroy():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t),this.triggerMethod("remove:child",t),this._updateIndices(t,!1)),t},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(t,e){t.$el.append(e)},attachHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,e){var i,n=this.sort&&e<this.children.length-1;return n&&(i=this.children.find(function(t){return t._index===e+1})),i?(i.$el.before(t.el),!0):!1},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){return this.isDestroyed?void 0:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),r.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var t=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),t},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=s.call(arguments),o=n[0],r=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+o,n.splice(1,0,t),"undefined"!=typeof r&&i.isFunction(r[o])&&r[o].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var t=this.getOption("childView")||this.constructor;return t||n('A "childView" must be specified',"NoChildViewError"),t},serializeData:function(){var t={};return this.model&&(t=i.partial(this.serializeModel,this.model).apply(this,arguments)),t},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&r.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate(),i=r.Renderer.render(e,t,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(t){return this.$el.html(t),this},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);i.append(e)},_insertAfter:function(t){var e=this.getChildViewContainer(this);e.append(t.el)},getChildViewContainer:function(t){if("$childViewContainer"in t)return t.$childViewContainer;var e,o=r.getOption(t,"childViewContainer");if(o){var s=i.isFunction(o)?o.call(t):o;e="@"===s.charAt(0)&&t.ui?t.ui[s.substr(4)]:t.$(s),e.length<=0&&n('The specified "childViewContainer" was not found: '+t.childViewContainer,"ChildViewContainerMissingError")}else e=t.$el;return t.$childViewContainer=e,e},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),r.LayoutView=r.ItemView.extend({regionClass:r.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),r.ItemView.call(this,t)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),r.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),r.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(t,e){this.triggerMethod("before:region:add",t);var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return this.triggerMethod("before:region:remove",t),delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e=this,i={regionClass:this.getOption("regionClass"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var e;this._initRegionManager(),e=i.isFunction(this.regions)?this.regions(t):this.regions||{};var n=this.getOption.call(t,"regions");i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.emptyRegions(),this.regionManager.each(function(t){t.reset()})},getRegionManager:function(){return new r.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})}}),r.Behavior=function(t,e){function i(e,i){this.view=i,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(i.prototype,e.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),i.extend=r.extend,i}(i,e),r.Behaviors=function(t,e){function i(t,o){o=i.parseBehaviors(t,o||e.result(t,"behaviors")),i.wrap(t,o,e.keys(n))}var n={setElement:function(t,i){return t.apply(this,e.tail(arguments,2)),e.each(i,function(t){t.$el=this.$el,t.el=this.el},this),this},destroy:function(t,i){var n=e.tail(arguments,2);return t.apply(this,n),e.invoke(i,"destroy",n),this},bindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},unbindUIElements:function(t,i){t.apply(this),e.invoke(i,t)},triggerMethod:function(t,i){var n=e.tail(arguments,2);t.apply(this,n),e.each(i,function(e){t.apply(e,n)})},delegateEvents:function(i,n){var o=e.tail(arguments,2);return i.apply(this,o),e.each(n,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this),this},undelegateEvents:function(i,n){var o=e.tail(arguments,2);return i.apply(this,o),e.each(n,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this),this},behaviorEvents:function(i,n){var o={},r=e.result(this,"ui");return e.each(n,function(i,n){var s={},a=e.clone(e.result(i,"events"))||{},u=e.result(i,"ui"),l=e.extend({},r,u);a=t.normalizeUIKeys(a,l),e.each(e.keys(a),function(t){var o=new Array(n+2).join(" "),r=t+o,u=e.isFunction(a[t])?a[t]:i[a[t]];s[r]=e.bind(u,i)}),o=e.extend(o,s)}),o}};return e.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,o){var r=i.getBehaviorClass(n,o),s=new r(n,t),a=i.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,o){e.each(o,function(o){t[o]=e.partial(n[o],t[o],i)})}}),i}(r,i),r.AppRouter=e.Router.extend({constructor:function(t){e.Router.apply(this,arguments),this.options=t||{};var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){var n=i.invert(this.getOption("appRoutes"))[t];i.isFunction(this.onRoute)&&this.onRoute(t,n,e)},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,o){var r=t[o];r||n('Method "'+o+'" was not found on the controller'),this.route(e,o,i.bind(r,t))},getOption:r.proxyGetOption}),r.Application=function(t){this._initializeRegions(t),this._initCallbacks=new r.Callbacks,this.submodules={},i.extend(this,t),this._initChannel()},i.extend(r.Application.prototype,e.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t),this._initCallbacks.run(t,this),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var i=r.Module.getClass(e),n=s.call(arguments);return n.unshift(this),i.create.apply(i,n)},getRegionManager:function(){return new r.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=r.getOption(t,"regions");return i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this.listenTo(this._regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this._regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this._regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption}),r.Application.extend=r.extend,r.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,i.isFunction(this.initialize)&&this.initialize(t,e,this.options)},r.Module.extend=r.extend,i.extend(r.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var o=i.flatten([this,this.app,e,r,e.$,i,n]);t.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks},triggerMethod:r.triggerMethod}),i.extend(r.Module,{create:function(t,e,n){var o=t,r=s.call(arguments);r.splice(0,3),e=e.split(".");var a=e.length,u=[];return u[a-1]=n,i.each(e,function(e,i){var s=o;o=this._getModule(s,e,t,n),this._addModuleDefinition(s,o,u[i],r)},this),o},_getModule:function(t,e,n,o){var r=i.extend({},o),s=this.getClass(o),a=t[e];return a||(a=new s(e,n,r),t[e]=a,t.submodules[e]=a),a},getClass:function(t){var e=r.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var o=this._getDefine(i),r=this._getStartWithParent(i,e);o&&e.addDefinition(o,n),this._addStartWithParent(t,e,r)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof r.Module?(n=e.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(t)?(n=t.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof r.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),r}),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","backbone","jquery"],function(t,i,n){return e(t,i,n)});else if("undefined"!=typeof exports){var i=require("underscore"),n=require("backbone"),o=require("jquery");module.exports=e(i,n,o)}else e(t._,t.Backbone,t.jQuery)}(this,function(t,e,i){"use strict";var n=e.Syphon,o=e.Syphon={};o.VERSION="0.5.0",o.noConflict=function(){return e.Syphon=n,this},o.ignoredTypes=["button","submit","reset","fieldset"],o.serialize=function(e,n){var o={},a=u(n),c=r(e,a);return t.each(c,function(t){var e=i(t),n=s(e),r=a.keyExtractors.get(n),u=r(e),c=a.inputReaders.get(n),h=c(e),d=a.keyAssignmentValidators.get(n);if(d(e,u,h)){var p=a.keySplitter(u);o=l(o,p,h)}}),o},o.deserialize=function(e,n,o){var a=u(o),l=r(e,a),h=c(a,n);t.each(l,function(t){var e=i(t),n=s(e),o=a.keyExtractors.get(n),r=o(e),u=a.inputWriters.get(n),l=h[r];u(e,l)})};var r=function(e,n){var o=a(e),r=o.elements;return r=t.reject(r,function(e){var o,r=s(e),a=n.keyExtractors.get(r),u=a(i(e)),l=t.include(n.ignoredTypes,r),c=t.include(n.include,u),h=t.include(n.exclude,u);return o=c?!1:n.include?!0:h||l})},s=function(t){var e,n=i(t),o=n[0].tagName,r=o;return"input"===o.toLowerCase()&&(e=n.attr("type"),r=e?e:"text"),r.toLowerCase()},a=function(e){return t.isUndefined(e.$el)&&"form"===e.tagName.toLowerCase()?e:e.$el.is("form")?e.el:e.$("form")[0]},u=function(e){var i=t.clone(e)||{};return i.ignoredTypes=t.clone(o.ignoredTypes),i.inputReaders=i.inputReaders||o.InputReaders,i.inputWriters=i.inputWriters||o.InputWriters,i.keyExtractors=i.keyExtractors||o.KeyExtractors,i.keySplitter=i.keySplitter||o.KeySplitter,i.keyJoiner=i.keyJoiner||o.KeyJoiner,i.keyAssignmentValidators=i.keyAssignmentValidators||o.KeyAssignmentValidators,i},l=function(e,i,n){if(!i)return e;var o=i.shift();return e[o]||(e[o]=t.isArray(o)?[]:{}),0===i.length&&(t.isArray(e[o])?e[o].push(n):e[o]=n),i.length>0&&l(e[o],i,n),e},c=function(e,i,n){var o={};return t.each(i,function(i,r){var s={};n&&(r=e.keyJoiner(n,r)),t.isArray(i)?(r+="[]",s[r]=i):t.isObject(i)?s=c(e,i,r):s[r]=i,t.extend(o,s)}),o},h=o.TypeRegistry=function(){this.registeredTypes={}};h.extend=e.Model.extend,t.extend(h.prototype,{get:function(t){return this.registeredTypes[t]||this.registeredTypes["default"]},register:function(t,e){this.registeredTypes[t]=e},registerDefault:function(t){this.registeredTypes["default"]=t},unregister:function(t){this.registeredTypes[t]&&delete this.registeredTypes[t]}});var d=o.KeyExtractorSet=h.extend(),p=o.KeyExtractors=new d;p.registerDefault(function(t){return t.prop("name")||""});var f=o.InputReaderSet=h.extend(),m=o.InputReaders=new f;m.registerDefault(function(t){return t.val()}),m.register("checkbox",function(t){return t.prop("checked")});var g=o.InputWriterSet=h.extend(),v=o.InputWriters=new g;v.registerDefault(function(t,e){t.val(e)}),v.register("checkbox",function(t,e){t.prop("checked",e)}),v.register("radio",function(t,e){t.prop("checked",t.val()===e.toString())});var y=o.KeyAssignmentValidatorSet=h.extend(),_=o.KeyAssignmentValidators=new y;return _.registerDefault(function(){return!0}),_.register("radio",function(t){return t.prop("checked")}),o.KeySplitter=function(t){var e,i=t.match(/[^\[\]]+/g);return t.indexOf("[]")===t.length-2&&(e=i.pop(),i.push([e])),i},o.KeyJoiner=function(t,e){return t+"["+e+"]"},e.Syphon}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),r="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,r)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.top,a=r.bottom;"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var u=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=e-a?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==u){null!=this.unpin&&this.$element.css("top","");var l="affix"+(u?"-"+u:""),c=t.Event(l+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(t.Event(l.replace("affix","affixed"))),"bottom"==u&&this.$element.offset({top:e-this.$element.height()-a}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var n=t(this),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t(o);e&&e.preventDefault(),r.length||(r=n.hasClass("alert")?n:n.parent()),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,r)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[o]()),n[o](null==r[e]?this.options[e]:r[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;o||n.data("bs.carousel",o=new i(this,r)),"number"==typeof e?o.to(e):s?o[s]():r.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),o=i||n[e](),r=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",u=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,n.addClass(s),o.addClass(s),n.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,o=t(this),r=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),e.call(r,s),a&&r.data("bs.carousel").to(a),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&r.toggle&&"show"==e&&(e=!e),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var o=n.data("bs.collapse");if(o&&o.transitioning)return;e.call(n,"hide"),o||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var a=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(350)[r](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()
};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,o=t(this),r=o.attr("data-target")||i.preventDefault()||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r),a=s.data("bs.collapse"),u=a?"toggle":o.data(),l=o.attr("data-parent"),c=l&&t(l);a&&a.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+l+'"]').not(o).addClass("collapsed"),o[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(s,u)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(r).each(function(){var n=i(t(this)),o={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",o))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.2.0",s.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var r=i(o),s=r.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var o=i(n),s=o.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&o.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",u=o.find('[role="menu"]'+a+', [role="listbox"]'+a);if(u.length){var l=u.index(u.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<u.length-1&&l++,~l||(l=0),u.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r+', [role="menu"], [role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a")[0],r=t.Event("show.bs.tab",{relatedTarget:o});if(e.trigger(r),!r.isDefaultPrevented()){var s=t(n);this.activate(e.closest("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},i.prototype.activate=function(e,i,n){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var r=i.find("> .active"),s=n&&t.support.transition&&r.hasClass("fade");s?r.one("bsTransitionEnd",o).emulateTransitionEnd(150):o(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(i,n){var o=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),r="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,r)),"string"==typeof i&&o[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),o=n.data("target")||n.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[e]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<=o[0])return s!=(t=r[0])&&this.activate(t);for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new i(this,s)),"string"==typeof e?r[e](n):s.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),r=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),r="object"==typeof e&&e;(o||"destroy"!=e)&&(o||n.data("bs.tooltip",o=new i(this,r)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",u="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,o=this.tip(),r=this.getUID(this.type);this.setContent(),o.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,u=a.test(s);u&&(s=s.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var l=this.getPosition(),c=o[0].offsetWidth,h=o[0].offsetHeight;if(u){var d=s,p=this.$element.parent(),f=this.getPosition(p);s="bottom"==s&&l.top+l.height+h-f.scroll>f.height?"top":"top"==s&&l.top-f.scroll-h<0?"bottom":"right"==s&&l.right+c>f.width?"left":"left"==s&&l.left-c<f.left?"right":s,o.removeClass(d).addClass(s)}var m=this.getCalculatedOffset(s,l,c,h);this.applyPlacement(m,s);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var u=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=r&&(e.top=e.top+r-l);var c=this.getViewportAdjustedDelta(i,e,u,l);c.left?e.left+=c.left:e.top+=c.top;var h=c.left?2*c.left-o+u:2*c.top-r+l,d=c.left?"left":"top",p=c.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(h,n[0][p],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(o),o.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,u=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:u>s.top+s.height&&(o.top=s.top+s.height-u)}else{var l=e.left-r,c=e.left+r+i;l<s.left?o.left=s.left-l:c>s.width&&(o.left=s.left+s.width-c)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof e&&e;(o||"destroy"!=e)&&(o||n.data("bs.popover",o=new i(this,r)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";var e=t.jCarousel={};e.version="0.3.1";var i=/^([+\-]=)?(.+)$/;e.parseTarget=function(t){var e=!1,n="object"!=typeof t?i.exec(t):null;return n?(t=parseInt(n[2],10)||0,n[1]&&(e=!0,"-="===n[1]&&(t*=-1))):"object"!=typeof t&&(t=parseInt(t,10)||0),{target:t,relative:e}},e.detectCarousel=function(t){for(var e;t.length>0;){if(e=t.filter("[data-jcarousel]"),e.length>0)return e;if(e=t.find("[data-jcarousel]"),e.length>0)return e;t=t.parent()}return null},e.base=function(i){return{version:e.version,_options:{},_element:null,_carousel:null,_init:t.noop,_create:t.noop,_destroy:t.noop,_reload:t.noop,create:function(){return this._element.attr("data-"+i.toLowerCase(),!0).data(i,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(i).removeAttr("data-"+i.toLowerCase()),this)},reload:function(t){return!1===this._trigger("reload")?this:(t&&this.options(t),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(e,i){if(0===arguments.length)return t.extend({},this._options);if("string"==typeof e){if("undefined"==typeof i)return"undefined"==typeof this._options[e]?null:this._options[e];this._options[e]=i}else this._options=t.extend({},this._options,e);return this},carousel:function(){return this._carousel||(this._carousel=e.detectCarousel(this.options("carousel")||this._element),this._carousel||t.error('Could not detect carousel for plugin "'+i+'"')),this._carousel},_trigger:function(e,n,o){var r,s=!1;return o=[this].concat(o||[]),(n||this._element).each(function(){r=t.Event((i+":"+e).toLowerCase()),t(this).trigger(r,o),r.isDefaultPrevented()&&(s=!0)}),!s}}},e.plugin=function(i,n){var o=t[i]=function(e,i){this._element=t(e),this.options(i),this._init(),this.create()};return o.fn=o.prototype=t.extend({},e.base(i),n),t.fn[i]=function(e){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each("string"==typeof e?function(){var o=t(this).data(i);if(!o)return t.error("Cannot call methods on "+i+' prior to initialization; attempted to call method "'+e+'"');if(!t.isFunction(o[e])||"_"===e.charAt(0))return t.error('No such method "'+e+'" for '+i+" instance");var s=o[e].apply(o,n);return s!==o&&"undefined"!=typeof s?(r=s,!1):void 0}:function(){var n=t(this).data(i);n instanceof o?n.reload(e):new o(this,e)}),r},o}}(jQuery),function(t,e){"use strict";var i=function(t){return parseFloat(t)||0};t.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_init:function(){var t=this;return this.onWindowResize=function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.reload()},100)},this},_create:function(){this._reload(),t(e).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){t(e).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(e){if("rtl"===(""+e.attr("dir")).toLowerCase())return!0;var i=!1;return e.parents("[dir]").each(function(){return/rtl/i.test(t(this).attr("dir"))?(i=!0,!1):void 0}),i}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var e=this._target&&this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var i={left:0,top:0};return e.length>0&&(this._prepare(e),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,i[this.lt]=this._position(e)+"px"),this.move(i),this},list:function(){if(null===this._list){var e=this.options("list");this._list=t.isFunction(e)?e.call(this):this._element.find(e)}return this._list},items:function(){if(null===this._items){var e=this.options("items");this._items=(t.isFunction(e)?e.call(this):this.list().find(e)).not("[data-jcarousel-clone]")}return this._items},index:function(t){return this.items().index(t)},closest:function(){var e,n=this,o=this.list().position()[this.lt],r=t(),s=!1,a=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(o+=this.list().width()-this.clipping()),this.items().each(function(){if(r=t(this),s)return!1;var u=n.dimension(r);if(o+=u,o>=0){if(e=u-i(r.css("margin-"+a)),!(Math.abs(o)-u+e/2<=0))return!1;s=!0}}),r},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var t=this.options("wrap"),e=this.items().length-1;return e>=0&&!this.underflow&&(t&&"first"!==t||this.index(this._last)<e||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var t=this.options("wrap");return this.items().length>0&&!this.underflow&&(t&&"last"!==t||this.index(this._first)>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(t){return t["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(e,i,n){if(this.animating)return this;if(!1===this._trigger("scroll",null,[e,i]))return this;t.isFunction(i)&&(n=i,i=!0);var o=t.jCarousel.parseTarget(e);if(o.relative){var r,s,a,u,l,c,h,d,p=this.items().length-1,f=Math.abs(o.target),m=this.options("wrap");if(o.target>0){var g=this.index(this._last);if(g>=p&&this.tail)this.inTail?"both"===m||"last"===m?this._scroll(0,i,n):t.isFunction(n)&&n.call(this,!1):this._scrollTail(i,n);else if(r=this.index(this._target),this.underflow&&r===p&&("circular"===m||"both"===m||"last"===m)||!this.underflow&&g===p&&("both"===m||"last"===m))this._scroll(0,i,n);else if(a=r+f,this.circular&&a>p){for(d=p,l=this.items().get(-1);d++<a;)l=this.items().eq(0),c=this._visible.index(l)>=0,c&&l.after(l.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(l),c||(h={},h[this.lt]=this.dimension(l),this.moveBy(h)),this._items=null;this._scroll(l,i,n)}else this._scroll(Math.min(a,p),i,n)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-f+1,0),i,n);else if(s=this.index(this._first),r=this.index(this._target),u=this.underflow?r:s,a=u-f,0>=u&&(this.underflow&&"circular"===m||"both"===m||"first"===m))this._scroll(p,i,n);else if(this.circular&&0>a){for(d=a,l=this.items().get(0);d++<0;){l=this.items().eq(-1),c=this._visible.index(l)>=0,c&&l.after(l.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(l),this._items=null;var v=this.dimension(l);h={},h[this.lt]=-v,this.moveBy(h)}this._scroll(l,i,n)}else this._scroll(Math.max(a,0),i,n)}else this._scroll(o.target,i,n);return this._trigger("scrollend"),this},moveBy:function(t,e){var n=this.list().position(),o=1,r=0;return this.rtl&&!this.vertical&&(o=-1,this.relative&&(r=this.list().width()-this.clipping())),t.left&&(t.left=n.left+r+i(t.left)*o+"px"),t.top&&(t.top=n.top+r+i(t.top)*o+"px"),this.move(t,e)},move:function(e,i){i=i||{};var n=this.options("transitions"),o=!!n,r=!!n.transforms,s=!!n.transforms3d,a=i.duration||0,u=this.list();if(!o&&a>0)return void u.animate(e,i);var l=i.complete||t.noop,c={};if(o){var h=u.css(["transitionDuration","transitionTimingFunction","transitionProperty"]),d=l;l=function(){t(this).css(h),d.call(this)},c={transitionDuration:(a>0?a/1e3:0)+"s",transitionTimingFunction:n.easing||i.easing,transitionProperty:a>0?function(){return r||s?"all":e.left?"left":"top"}():"none",transform:"none"}}s?c.transform="translate3d("+(e.left||0)+","+(e.top||0)+",0)":r?c.transform="translate("+(e.left||0)+","+(e.top||0)+")":t.extend(c,e),o&&a>0&&u.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",l),u.css(c),0>=a&&u.each(function(){l.call(this)})},_scroll:function(e,i,n){if(this.animating)return t.isFunction(n)&&n.call(this,!1),this;if("object"!=typeof e?e=this.items().eq(e):"undefined"==typeof e.jquery&&(e=t(e)),0===e.length)return t.isFunction(n)&&n.call(this,!1),this;this.inTail=!1,this._prepare(e);var o=this._position(e),r=this.list().position()[this.lt];if(o===r)return t.isFunction(n)&&n.call(this,!1),this;var s={};return s[this.lt]=o+"px",this._animate(s,i,n),this},_scrollTail:function(e,i){if(this.animating||!this.tail)return t.isFunction(i)&&i.call(this,!1),this;var n=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(n+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?n+=this.tail:n-=this.tail,this.inTail=!0;var o={};return o[this.lt]=n+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(o,e,i),this},_animate:function(e,i,n){if(n=n||t.noop,!1===this._trigger("animate"))return n.call(this,!1),this;this.animating=!0;var o=this.options("animation"),r=t.proxy(function(){this.animating=!1;var t=this.list().find("[data-jcarousel-clone]");t.length>0&&(t.remove(),this._reload()),this._trigger("animateend"),n.call(this,!0)},this),s="object"==typeof o?t.extend({},o):{duration:o},a=s.complete||t.noop;return i===!1?s.duration=0:"undefined"!=typeof t.fx.speeds[s.duration]&&(s.duration=t.fx.speeds[s.duration]),s.complete=function(){r(),a.call(this)},this.move(e,s),this},_prepare:function(e){var n,o,r,s,a=this.index(e),u=a,l=this.dimension(e),c=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",d=this.options("center"),p={target:e,first:e,last:e,visible:e,fullyvisible:c>=l?e:t()};if(d&&(l/=2,c/=2),c>l)for(;;){if(n=this.items().eq(++u),0===n.length){if(!this.circular)break;if(n=this.items().eq(0),e.get(0)===n.get(0))break;if(o=this._visible.index(n)>=0,o&&n.after(n.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(n),!o){var f={};f[this.lt]=this.dimension(n),this.moveBy(f)}this._items=null}if(s=this.dimension(n),0===s)break;if(l+=s,p.last=n,p.visible=p.visible.add(n),r=i(n.css("margin-"+h)),c>=l-r&&(p.fullyvisible=p.fullyvisible.add(n)),l>=c)break}if(!this.circular&&!d&&c>l)for(u=a;;){if(--u<0)break;if(n=this.items().eq(u),0===n.length)break;if(s=this.dimension(n),0===s)break;if(l+=s,p.first=n,p.visible=p.visible.add(n),r=i(n.css("margin-"+h)),c>=l-r&&(p.fullyvisible=p.fullyvisible.add(n)),l>=c)break}return this._update(p),this.tail=0,d||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(p.last)!==this.items().length-1||(l-=i(p.last.css("margin-"+h)),l>c&&(this.tail=l-c)),this},_position:function(t){var e=this._first,i=e.position()[this.lt],n=this.options("center"),o=n?this.clipping()/2-this.dimension(e)/2:0;return this.rtl&&!this.vertical?(i-=this.relative?this.list().width()-this.dimension(e):this.clipping()-this.dimension(e),i+=o):i-=o,!n&&(this.index(t)>this.index(e)||this.inTail)&&this.tail?(i=this.rtl&&!this.vertical?i-this.tail:i+this.tail,this.inTail=!0):this.inTail=!1,-i
},_update:function(e){var i,n=this,o={target:this._target||t(),first:this._first||t(),last:this._last||t(),visible:this._visible||t(),fullyvisible:this._fullyvisible||t()},r=this.index(e.first||o.first)<this.index(o.first),s=function(i){var s=[],a=[];e[i].each(function(){o[i].index(this)<0&&s.push(this)}),o[i].each(function(){e[i].index(this)<0&&a.push(this)}),r?s=s.reverse():a=a.reverse(),n._trigger(i+"in",t(s)),n._trigger(i+"out",t(a)),n["_"+i]=e[i]};for(i in e)s(i);return this}})}(jQuery,window),function(t){"use strict";t.jcarousel.fn.scrollIntoView=function(e,i,n){var o,r=t.jCarousel.parseTarget(e),s=this.index(this._fullyvisible.first()),a=this.index(this._fullyvisible.last());if(o=r.relative?r.target<0?Math.max(0,s+r.target):a+r.target:"object"!=typeof r.target?r.target:this.index(r.target),s>o)return this.scroll(o,i,n);if(o>=s&&a>=o)return t.isFunction(n)&&n.call(this,!1),this;for(var u,l=this.items(),c=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",d=0;;){if(u=l.eq(o),0===u.length)break;if(d+=this.dimension(u),d>=c){var p=parseFloat(u.css("margin-"+h))||0;d-p!==c&&o++;break}if(0>=o)break;o--}return this.scroll(o,i,n)}}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onEvent=t.proxy(function(e){e.preventDefault();var i=this.options("method");t.isFunction(i)?i.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var e,i=t.jCarousel.parseTarget(this.options("target")),n=this.carousel();if(i.relative)e=n.jcarousel(i.target>0?"hasNext":"hasPrev");else{var o="object"!=typeof i.target?n.jcarousel("items").eq(i.target):i.target;e=n.jcarousel("target").index(o)>=0}return this._active!==e&&(this._trigger(e?"active":"inactive"),this._active=e),this}})}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(t){return'<a href="#'+t+'">'+t+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onScroll=t.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var e=this.options("perPage");if(this._pages={},this._items={},t.isFunction(e)&&(e=e.call(this)),null==e)this._pages=this._calculatePages();else for(var i,n=parseInt(e,10)||0,o=this._getCarouselItems(),r=1,s=0;;){if(i=o.eq(s++),0===i.length)break;this._pages[r]=this._pages[r]?this._pages[r].add(i):i,s%n===0&&r++}this._clear();var a=this,u=this.carousel().data("jcarousel"),l=this._element,c=this.options("item"),h=this._getCarouselItems().length;t.each(this._pages,function(e,i){var n=a._items[e]=t(c.call(a,e,i));n.on(a.options("event")+".jcarouselpagination",t.proxy(function(){var t=i.eq(0);if(u.circular){var n=u.index(u.target()),o=u.index(t);parseFloat(e)>parseFloat(a._currentPage)?n>o&&(t="+="+(h-n+o)):o>n&&(t="-="+(n+(h-o)))}u[this.options("method")](t)},a)),l.append(n)}),this._update()},_update:function(){var e,i=this.carousel().jcarousel("target");t.each(this._pages,function(t,n){return n.each(function(){return i.is(this)?(e=t,!1):void 0}),e?!1:void 0}),this._currentPage!==e&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[e])),this._currentPage=e},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var t,e=this.carousel().data("jcarousel"),i=this._getCarouselItems(),n=e.clipping(),o=0,r=0,s=1,a={};;){if(t=i.eq(r++),0===t.length)break;a[s]=a[s]?a[s].add(t):t,o+=e.dimension(t),o>=n&&(s++,o=0)}return a},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onAnimateEnd=t.proxy(this.start,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),this.options("autostart")&&this.start()},_destroy:function(){this.stop(),this.carousel().off("jcarousel:destroy",this.onDestroy)},start:function(){return this.stop(),this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(t.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this}})}(jQuery),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var r,s,a=this,u=arguments;return r=function(){n=null,i||(o=t.apply(a,u))},s=i&&!n,clearTimeout(n),n=setTimeout(r,e),s&&(o=t.apply(a,u)),o}},throttle:function(t,e){var i,n,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=t.apply(i,n)},function(){var u=new Date,l=e-(u-s);return i=this,n=arguments,0>=l?(clearTimeout(o),o=null,s=u,r=t.apply(i,n)):o||(o=setTimeout(a,l)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var o=[];return e.each(i,function(i){o=o.concat(t(e.toStr(n[i])))}),o}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),o=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function o(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new o(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),r=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function o(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(e){return t.parseJSON(e)}function s(t){var e,i,n=[],o=a.length;for(e=0;o>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(u){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(t,i,r){return e.isNumber(r)?this._safeSet(this._ttlKey(t),o(n()+r)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),o(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=r(this.ls.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}),i}(),s=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new o(0):a}var n=0,r={},s=6,a=new o(10);return i.setMaxPendingRequests=function(t){s=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),c._cache.set(u,t)}function o(){e(!0)}function a(){n--,delete r[u],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var u,l,c=this;u=this._fingerprint(t),this.cancelled||u!==this.lastReq||((l=r[u])?l.done(i).fail(o):s>n?(n++,r[u]=this._send(t).done(i).fail(o).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var o,r;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},r=this._fingerprint(i),this.cancelled=!1,this.lastReq=r,(o=this._cache.get(r))?n(null,o):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function o(){var t={};return t[u]=[],t[a]={},t}function r(t){for(var e={},i=[],n=0,o=t.length;o>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function s(t,e){var i=0,n=0,o=[];t=t.sort(),e=e.sort();for(var r=t.length,s=e.length;r>i&&s>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(o.push(t[i]),i++,n++);return o}var a="c",u="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,s;i.datums[r=i.identify(t)]=t,s=n(i.datumTokenizer(t)),e.each(s,function(t){var e,n,s;for(e=i.trie,n=t.split("");s=n.shift();)e=e[a][s]||(e[a][s]=o()),e[u].push(r)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,o,l=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,r;if(o&&0===o.length)return!1;for(e=l.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(r=e[u].slice(0),void(o=o?s(o,r):r)):(o=[],!1)}),o?e.map(r(o),function(t){return l.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,o.transform(e))}var n,o=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),l=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:o.transform(i))}var n,o=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function n(n){var o;return n?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(o,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function o(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=r(i),i.limiter=s(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function r(t){function e(t,e){return e.url=r(e.url,t),e}function i(t,e){return e.url=e.url.replace(s,encodeURIComponent(t)),e}function n(t,e){return e}var o,r,s;return o=t.prepare,r=t.replace,s=t.wildcard,o?o:o=r?e:t.wildcard?i:n}function s(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var o,r,s;return o=t.limiter,r=t.rateLimitBy,s=t.rateLimitWait,o||(o=/^throttle$/i.test(r)?n(s):i(s)),o}function a(i){return function(n){function o(t){e.defer(function(){s.resolve(t)})}function r(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return i(n,o,r),s}}return function(i){var r,s;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(r,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),s=i.sorter,i.sorter=s?function(t){return t.sort(s)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=o(i.remote),i}}(),h=function(){"use strict";function i(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new l(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var o;return o=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=o),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(o.add(e),o.prefetch.store(o.index.serialize()),void i.resolve())}var i,n,o=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function o(t){var i=[];e.each(t,function(t){!e.some(r,function(e){return s.identify(t)===s.identify(e)})&&i.push(t)}),n&&n(i)}var r,s=this;return r=this.sorter(this.index.search(t)),i(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,o):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var r,s,a=this,u=arguments;return r=function(){n=null,i||(o=t.apply(a,u))},s=i&&!n,clearTimeout(n),n=setTimeout(r,e),s&&(o=t.apply(a,u)),o}},throttle:function(t,e){var i,n,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=t.apply(i,n)},function(){var u=new Date,l=e-(u-s);return i=this,n=arguments,0>=l?(clearTimeout(o),o=null,s=u,r=t.apply(i,n)):o||(o=setTimeout(a,l)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var s,a;return a=e.mixin({},r,t),s={css:o(),classes:a,html:i(a),selectors:n(a)},{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(t){e.mixin(t,s)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function o(){var t={wrapper:{position:"relative",display:"inline-block","max-width":"90%"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,o;return n="typeahead:",o={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var o;return o=t.Event(n+e),(i=i||[]).unshift(o),this.$el.trigger.apply(this.$el,i),o},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=o[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),o=function(){"use strict";function t(t,e,i,n){var o;if(!i)return this;for(e=e.split(u),i=n?a(i,n):i,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,i,n,o,s;if(!this._callbacks)return this;for(t=t.split(u),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)o=r(i.sync,this,[e].concat(n)),s=r(i.async,this,[e].concat(n)),o()&&l(s);return this}function r(t,e,i){function n(){for(var n,o=0,r=t.length;!n&&r>o;o+=1)n=t[o].apply(e,i)===!1;return!n}return n}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,l=s();return{onSync:i,onAsync:e,off:n,trigger:o}}(),r=function(t){"use strict";function i(t,i,n){for(var o,r=[],s=0,a=t.length;a>s;s++)r.push(e.escapeRegExChars(t[s]));return o=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(o):new RegExp(o,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function r(e){var i,n,r;return(i=a.exec(e.data))&&(r=t.createElement(o.tagName),o.className&&(r.className=o.className),n=e.splitText(i.index),n.splitText(i[0].length),r.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(r,n)),!!i}function s(t,e){for(var i,n=3,o=0;o<t.childNodes.length;o++)i=t.childNodes[o],i.nodeType===n?o+=e(i)?1:0:s(i,e)}var a;o=e.mixin({},n,o),o.node&&o.pattern&&(o.pattern=e.isArray(o.pattern)?o.pattern:[o.pattern],a=i(o.pattern,o.caseSensitive,o.wordsOnly),s(o.node,r))}}(window.document),s=function(){"use strict";function i(i,o){i=i||{},i.input||t.error("input is missing"),o.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!s(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!s(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=r(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,o,r=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),o=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,o){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),o.mixin(this),this.highlight=!!i.highlight,this.name=i.name||l(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function s(i,n){function o(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||o}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,l;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},l=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(u.obj)?{val:i.data(u.val)||"",obj:i.data(u.obj)||null}:null},e.mixin(i.prototype,o,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var o,s=this;return o=document.createDocumentFragment(),e.each(n,function(e){var n,r;r=s._injectQuery(i,e),n=t(s.templates.suggestion(r)).data(u.obj,e).data(u.val,s.displayFn(e)).addClass(s.classes.suggestion+" "+s.classes.selectable),o.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:o,pattern:i}),t(o)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){s||(s=!0,t=(t||[]).slice(0,o.limit),a=t.length,o._overwrite(e,t),a<o.limit&&o.async&&o.trigger("asyncRequested",e))}function n(i){i=i||[],!r&&a<o.limit&&(o.cancel=t.noop,a+=i.length,o._append(e,i.slice(0,o.limit-a)),o.async&&o.trigger("asyncReceived",e))}var o=this,r=!1,s=!1,a=0;this.cancel(),this.cancel=function(){r=!0,o.cancel=t.noop,o.async&&o.trigger("asyncCanceled",e)},this.source(e,i,n),!s&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),u=function(){"use strict";function i(i,n){function o(e){var i=r.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(r.$node),new a(e,n)}var r=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,o)}return e.mixin(i.prototype,o,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)
},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,o;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>o&&this.$node.scrollTop(n+(i-o))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,o;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,o=n+t,o=(o+1)%(e.length+1)-1,o=-1>o?e.length-1:o,-1===o?null:e.eq(o)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),l=function(){"use strict";function t(){u.apply(this,[].slice.call(arguments,0))}var i=u.prototype;return e.mixin(t.prototype,u.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),c=function(){"use strict";function i(i,o){var r,s,a,u,l,c,h,d,p,f,m;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),o.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),u=n(this,"isActive","isOpen","_onTabKeyed"),l=n(this,"isActive","_onEscKeyed"),c=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),d=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),m=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",u,this).onSync("escKeyed",l,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var o,r,s;o=document.activeElement,r=n.is(o),s=n.has(o).length>0,e.isMsie()&&(r||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,o,r,a,u;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(o=s.normalizeQuery(n),r=e.escapeRegExChars(o),a=new RegExp("^(?:"+r+")(.+$)","i"),u=a.exec(i.val),u&&this.input.setHint(n+u[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,o,r;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),o=n?n.obj:null,r=this._minLengthMet()&&this.menu.update(e),r||this.eventBus.before("cursorchange",o)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function o(e,i){e.each(function(){var e,n=t(this);(e=n.data(m.typeahead))&&i(e,n)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(m.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var i,n;i=t.data(m.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(m.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,o;return n=e.isJQuery(i)||e.isElement(i),o=n?t(i).first():[],o.length?o:null}var f,m,g;f=t.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function(o,h){function d(){var i,d,g,v,y,_,b,w,S,C,k;e.each(h,function(t){t.highlight=!!o.highlight}),i=t(this),d=t(f.html.wrapper),g=p(o.hint),v=p(o.menu),y=o.hint!==!1&&!g,_=o.menu!==!1&&!v,y&&(g=r(i,f)),_&&(v=t(f.html.menu).css(f.css.menu)),g&&g.val(""),i=a(i,f),(y||_)&&(d.css(f.css.wrapper),i.css(y?f.css.input:f.css.inputWithNoHint),i.wrap(d).parent().prepend(y?g:null).append(_?v:null)),k=_?l:u,b=new n({el:i}),w=new s({hint:g,input:i},f),S=new k({node:v,datasets:h},f),C=new c({input:w,menu:S,eventBus:b,minLength:o.minLength},f),i.data(m.www,f),i.data(m.typeahead,C)}var f;return h=e.isArray(h)?h:[].slice.call(arguments,1),o=o||{},f=i(o.classNames),this.each(d)},isEnabled:function(){var t;return o(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return o(this,function(t){t.enable()}),this},disable:function(){return o(this,function(t){t.disable()}),this},isActive:function(){var t;return o(this.first(),function(e){t=e.isActive()}),t},activate:function(){return o(this,function(t){t.activate()}),this},deactivate:function(){return o(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return o(this.first(),function(e){t=e.isOpen()}),t},open:function(){return o(this,function(t){t.open()}),this},close:function(){return o(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return o(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return o(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(o(this,function(e){e.setVal(t)}),this):(o(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return o(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),function(){window.QuelleEnergie=new Backbone.Marionette.Application,QuelleEnergie.Lib={Mixins:{}},QuelleEnergie.Components={},QuelleEnergie.Routers={},QuelleEnergie.Controllers={},QuelleEnergie.Models={},QuelleEnergie.Collections={},QuelleEnergie.Helpers={},QuelleEnergie.Views={},QuelleEnergie.simulator_paths={GLOBAL:"bilan-energetique",HEATING:"simulateur-chauffage",THERMAL:"simulateur-isolation",PRICE:"simulateur-prix-travaux"},QuelleEnergie.on("start",function(){var t;return new QuelleEnergie.Routers.GlobalSimulation,new QuelleEnergie.Routers.HeatingSimulation,new QuelleEnergie.Routers.QuoteRequest,new QuelleEnergie.Routers.SubsidiesSimulation,new QuelleEnergie.Routers.ThermalSimulation,new QuelleEnergie.Routers.PriceSimulation,window.history&&history.pushState?Backbone.history.start({pushState:!0}):(Backbone.history.start({pushState:!1,silent:!0}),t=window.location.pathname.substr(Backbone.history.options.root.length),Backbone.history.navigate(t,{trigger:!0}))}),jQuery(function(t){return t("body.v3").length?QuelleEnergie.start():void 0})}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/backbone/modal"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog">\n  <button type="button" class="close" data-dismiss="modal">\n    <span aria-hidden="true">&times;</span>\n    <span class="sr-only">Fermer</span>\n  </button>\n  <div class="modal-content">\n    <div class="modal-header">\n      <h4 class="modal-title">Que va-t-il se passer maintenant ?</h4>\n    </div>\n\n    <div class="modal-body"></div>\n\n    <div class="modal-footer">\n      <input type="submit" class="btn btn-primary submit" name="Valider mon num\xe9ro"/>\n    </div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/components/checkbox"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="item-choice '),i.push(n(this.checked)),i.push(" "),this.icon||i.push(n("tiny")),i.push('"\n  data-value="'),i.push(n(this.value)),i.push('"\n  data-name="'),i.push(n(this.name)),i.push('">\n\n  '),this.icon&&(i.push('\n  <div class="picto-wrapper">\n    <span class="'),i.push(n(this.icon)),i.push('"></span>\n  </div>\n  ')),i.push('\n\n  <span class="'),this.stitle&&i.push(n("long-title")),i.push(' title">'),i.push(n(this.text)),i.push('</span>\n  <span class="icon-checked"></span>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/components/city_selector/empty"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="tt-empty"><p>Aucune commune trouv\xe9e</p></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/components/city_selector/suggestion"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push("<p>"),i.push(n(this.code_postal)),i.push(" - "),i.push(n(this.nom)),i.push("</p>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/helpers/errors"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="container container-height-margin global-error visible-xs visible-sm hidden-md hidden-lg">\n  '),i.push(n(this.message)),i.push("\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/helpers/star"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,n,o,r,s,a;for(r=this.filledStars,t=0,n=r.length;n>t;t++)a=r[t],i.push('\n  <span class="icon-star-filled2"></span>\n');for(i.push("\n\n"),s=this.emptyStars,e=0,o=s.length;o>e;e++)a=s[e],i.push('\n  <span class="icon-star-empty2"></span>\n');i.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/heating_simulations/result/invoice"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.in_percentage&&i.push('\n  <div class="top-indication">\n    Les r\xe9sultats de votre simulation sont donn\xe9s ici en\n    <span class="font-medium">pourcentages d\'\xe9conomies</span>\n    sur votre facture \xe9nerg\xe9tique. Si vous souhaitez obtenir des \xe9conomies chiffr\xe9es, renseignez votre facture annuelle de chauffage\n    <a href="/simulateur-chauffage/formulaire">\xe0 l\'\xe9tape pr\xe9c\xe9dente</a>.\n  </div>\n'),i.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/loader"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="row">\n  <div class="col-md-12 main-content">\n\n    <h1 class="big-title center-block">Calculs en cours...</h1>\n\n    <div id="simulation_progress" class="progress">\n\n      <div class="progress-bar" aria-valuemax="100" aria-valuemin="1" aria-valuenow="1"\n           role="progressbar" style="width: 1%;"></div>\n\n    </div>\n\n    <div class="alert alert-info">\n      <h4 class="invisible charg_step1">\n        R\xe9cup\xe9ration de la base de donn\xe9es prix...\n      </h4>\n      <h4 class="invisible charg_step2">\n        Segmentation par localit\xe9...\n      </h4>\n      <h4 class="invisible charg_step3">\n        Segmentation par caract\xe9ristique technique...\n      </h4>\n      <h4 class="invisible charg_step4">\n        Estimation du co\xfbt de vos travaux...\n      </h4>\n      <h4 class="invisible charg_step5">\n        Redirection vers la page de r\xe9sultats...\n      </h4>\n    </div>\n\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_product"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="col-sm-4">\n  <div class="product">\n    <div>\n      <img class="img-responsive" src="'),i.push(n(this.image_path)),i.push('" />\n    </div>\n    <h4 class="text-center">Son point fort</h4>\n    <p>\n      '),i.push(n(this.description)),i.push('\n    </p>\n    <h4 class="text-center">Son prix</h4>\n    <div class="row">\n      <div class="text-center price-icon">\n        <span class="glyphicon glyphicon-euro '),this.price_level>=1&&i.push(n("price-selected")),i.push('"></span>\n        <span class="glyphicon glyphicon-euro '),this.price_level>=2&&i.push(n("price-selected")),i.push('"></span>\n        <span class="glyphicon glyphicon-euro '),this.price_level>=3&&i.push(n("price-selected")),i.push('"></span>\n      </div>\n      <div class="text-center price-text">\n          '),i.push(n(this.price_description())),i.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_products"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push("<div>\n  <h3>"),i.push(n(this.title())),i.push('</h3>\n  <div id="products" class="row">\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_project"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="highlighted-bg">\n  <div class="container">\n    <div class="tabbable tabs-left">\n      <div class="title">\n        <span class="icon-tools-black"></span> Votre projet\n      </div>\n    </div>\n    <div id="project-list-region" class="tabbable tabs-left"></div>\n    <div class="tabbable tabs-left">\n      <div id="products-region" class="tab-content"></div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_project_item"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<a role="tab" data-toggle="tab">'),i.push(n(this.title)),i.push("</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_solution"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="'),i.push(n(this.col_class())),i.push(" "),i.push(n(this.offset_class())),i.push('">\n  <div class="price-solution">\n    <h3 class="text-center">'),i.push(n(this.title)),i.push('</h3>\n    <div class="solution-picture clearfix">\n      <img src="'),i.push(n(this.solution_picture)),i.push('" />\n      <div class="highlighted text-center pull-right">\n        <div class="text">\n          <div class="amount">\n            '),i.push(n(this.cost)),i.push('\n            <sup>\n              <a class="information-button icon-mini-info3"></a>\n            </sup>\n          </div>\n          <div class="detail">'),i.push(n(this.unit_cost)),i.push('</div>\n        </div>\n      </div>\n    </div>\n    <div>\n      <ul class="recommend-list">\n        '),this.complement&&(i.push("\n        <li>"),i.push(n(this.complement)),i.push("</li>\n        ")),i.push("\n        "),"all"!==this.ci_eligibility&&(i.push("\n        <li>Co\xfbt de l'\xe9quipement&nbsp;: <strong>"),i.push(n(this.equipment_cost)),i.push("</strong></li>\n        <li>Co\xfbt de la pose&nbsp;: <strong>"),i.push(n(this.worforce_cost)),i.push("</strong></li>\n        ")),i.push("\n        "),this.ci_eligibility&&(i.push("\n        <li>"),i.push(n(this.ci_eligibility_message())),i.push("</li>\n        ")),i.push('\n      </ul>\n    </div>\n    <div class="text-center clearfix">\n      <em>'),i.push(n(this.ask_quote_message())),i.push("</em>\n      "),this.quote_requested?i.push('\n      <button type="button" class="btn btn-positive btn-static">\n        <span class=\'icon-mini-checked\'></span>\n        Demande Enregistr\xe9e\n      </button>\n      '):(i.push('\n      <button type="button" class="btn btn-simulator btn-static ask-quote" data-cee-url="/simulation/inscription-prime-energie/nouvelle?quote=1&solutions='),i.push(n(this.french_label)),i.push('">\n        Obtenir un devis\n      </button>\n      ')),i.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/price_simulations/result/price_solutions"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="main-title color2">\n  <h1>Les r\xe9sultats de votre simulation</h1>\n</div>\n<div class="content-list">\n  <h2 class="text-center">\n    <span class="icon-coins"></span>\n    Estimation du co\xfbt global de votre projet&nbsp;:\n    <span class="amount">\n    '),i.push(n(this.project_cost)),i.push('\n    <sup>\n      <a class="information-button icon-mini-info3"></a>\n    </sup>\n    </span>\n    <br class="visible-xs visible-sm">\n    <em>prix constat\xe9s compris entre '),i.push(n(this.lower_cost)),i.push(" et "),i.push(n(this.higher_cost)),i.push('</em>\n  </h2>\n  <div id="solutions" class="row">\n  </div>\n</div>\n<div class="do-you-know">\n  <div class="main-title color1">\n    <h1>Le saviez-vous&nbsp;?</h1>\n  </div>\n  <div class="content-list">\n    <div class="row">\n      <div class="col-sm-4">\n        <img class="img-responsive" src="//static3.quelleenergie.net/assets/simulators/aides-769498894c073d8103ac8ebf4968df08.jpg"></img>\n      </div>\n      <div class="col-sm-8">\n        <ul class="recommend-list">\n          <li>\n            Il existe une multitude d\'aides pour <strong>r\xe9duire le co\xfbt de votre projet</strong> de r\xe9novation.\n            Ces aides peuvent financer <strong>jusqu\'\xe0 80% du prix des travaux&nbsp;!</strong>\n          </li>\n          <li>\n            Pour en b\xe9n\xe9ficier, pensez \xe0 faire appel \xe0 <strong>un professionnel RGE</strong>\n          </li>\n        </ul>\n        <div class="text-center">\n          <a class="btn btn-action btn-static" href="/simulateur-aides-et-subventions/formulaire">Calculer mes aides</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/ask_bonus"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="color2">\n<h1 class="main-mobile-title">Profitez d\'une prime \xe9nergie pour vos travaux de r\xe9novation \xe9nerg\xe9tique</h1>\n</div>\n\n<div class="content-list">\n  <div class="content-list">\n    <div class="img"><img alt="Cee" src="//static2.quelleenergie.net/assets/simulators/cee-5ea8d1b705f49cf70ebeb6c7d9da446e.jpg"></div>\n    <div class="infos">\n      <ul class="with-tick">\n      <li>\n      La prime \xe9nergie est une prime vers\xe9e aux particuliers par les\n      <strong>grands fournisseurs d\u2019\xe9nergie</strong>\n      pour leurs travaux de r\xe9novation \xe9nerg\xe9tique\n      <a href="javscript:void(0);" class="italic link-cee-modal">&gt;&nbsp;en savoir plus</a>\n      </li>\n      <li>\n      La prime que nous vous proposons est vers\xe9e sous la forme d\u2019\n      <strong>un ch\xe8que pouvant atteindre plusieurs centaines d\u2019euros.</strong>\n      </li>\n      <li>\n      Pour \xeatre valable, votre demande de prime doit \xeatre faite\n      <strong>avant la signature des devis.</strong>\n      </li>\n      </ul>\n      <div class="txt-c">\n        <a href="javascript:void(0);" class="btn btn-simulator register link-cee-modal">Demander ma prime</a>\n        <div class="indication-text">Gratuit et sans engagement</div>\n      </div>\n    </div>\n  </div>\n  <div class="more italic">\n    Vous souhaitez conna\xeetre toutes les aides dont vous pouvez b\xe9n\xe9ficier pour vos travaux ? Testez notre <a href="/simulateur-aides-et-subventions/formulaire">simulateur gratuit aides et subventions</a>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/feedback"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div id="feedback-region"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/feedback_form"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;i.push('<div class="row">\n  <h2>\n    '),i.push("subsidies_simulation"===(t=this.simulation)||"quote_request"===t||"price_simulation"===t?"\n      Votre avis nous int\xe9resse ! R\xe9agissez, proposez, rectifiez...\n    ":"\n      Que pensez-vous de ce bilan energ\xe9tique ?\n    "),i.push('\n  </h2>\n\n  <div class="form">\n    <textarea placeholder="Faites nous un retour pour nous aider \xe0 am\xe9liorer notre service..."></textarea>\n    <div class="bg-success" style="display: none"></div>\n    <div class="form-error" style="display: none">\n      <div class="msg">\n        <span class="icon-error"></span> <span class="text"></span>\n      </div>\n    </div>\n    <button class="btn btn-action" type="button">Envoyer</button>\n  </div>\n</div>\n')
}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/house"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o,r,s,a;if(i.push('<div class="main-title color1">\n  '),i.push("house"===this.housing_type?'\n    <span class="icon-flat-home"></span> <h2>Votre maison</h2>\n  ':'\n    <span class="icon-flat-apartment"></span> <h2>Votre appartement</h2>\n  '),i.push('\n</div>\n\n<div class="content-list eco-content">\n  <ul class="house-list">\n\n    '),"global_simulation"===this.simulation_type&&(i.push('\n      <li>\n        <div class="ib hidden-md hidden-lg" >\n          <span class="badge">\n            <img src="//static2.quelleenergie.net/assets/simulators/facture-annuelle-587b59de80b833f05e689908b3e85599.png"></img>\n          </span>\n        </div>\n        <div class="ib" >\n          <span>Facture annuelle :  '),i.push(n(this.annualInvoice())),i.push(" \u20ac</span>\n        </div>\n      </li>\n    ")),i.push("\n\n    "),o="global_simulation"===this.simulation_type?"hidden-xs hidden-sm":"",i.push("\n\n    "),"thermal_envelope_simulation"!==this.simulation_type&&null!==this.heating_score&&(i.push('\n      <li class="'),i.push(n(o)),i.push('">\n        <div class="ib">\n          <span class="badge hidden-md hidden-lg">\n            <img src="//static1.quelleenergie.net/assets/simulators/niveau-chauffage-c0d20246998fec55a78450a5eb31ed77.png"></img>\n          </span>\n        </div>\n        <div class="ib">\n          <span>Niveau de chauffage :</span>\n          <span class="star-component">\n            '),i.push(this.star({filledStars:this.heating_score,totalStars:3})),i.push("\n          </span>\n        </div>\n      </li>\n    ")),i.push("\n\n    "),"heating_simulation"!==this.simulation_type&&null!==this.insulation_score?(i.push('\n      <li class="'),i.push(n(o)),i.push('">\n        <div class="ib" >\n          <span class="badge hidden-md hidden-lg">\n            <img src="//static3.quelleenergie.net/assets/simulators/niveau-isolation-315f468bcba57d80779ad6eac040f9d3.png"></img>\n          </span>\n        </div>\n        <div class="ib" >\n          <span>Niveau d\u2019isolation :</span>\n          <span class="star-component">\n            '),i.push(this.star({filledStars:this.insulation_score,totalStars:3})),i.push("\n          </span>\n        </div>\n      </li>\n    ")):(i.push('\n      <li class="hidden-xs hidden-sm"><span>Type de chauffage : '),i.push(n(this.heating_energy)),i.push("</span></li>\n    ")),i.push("\n\n    "),"thermal_envelope_simulation"===this.simulation_type&&(i.push('\n      <li class="hidden-xs hidden-sm"><span>Mat\xe9riau des murs : '),i.push(n(this.wall_material)),i.push("</span></li>\n    ")),i.push("\n\n    "),!this.in_percentage&&"thermal_envelope_simulation"!==this.simulation_type&&""!==this.label_energy){for(i.push('\n      <li class="multi-lines">\n        <div class="ib hidden-md hidden-lg" >\n          <span class="badge hidden-md hidden-lg"><img src="//static2.quelleenergie.net/assets/simulators/house-dpe-white-462cbd1f17fad5df8fee3a1c40acfe4b.png"></img></span>\n        </div>\n        <div class="ib" ><span>Votre \xe9tiquette \xe9nerg\xe9tique&nbsp;:</span></div>\n        <div>\n          <span class="title">\n            <span class="energy-label label-'),i.push(n(this.label_energy.toLowerCase())),i.push('">\n              '),i.push(n(this.label_energy)),i.push("\n            </span> "),i.push(n(this.labelEnergyTitle())),i.push("\n          </span>\n        </div>\n        <div>\n          "),a=["a","b","c","d","e","f","g"],r=0,s=a.length;s>r;r++)e=a[r],i.push("\n            "),t=e===this.label_energy.toLowerCase(),i.push('\n            <span class="eco-label label-'),i.push(n(e)),i.push(" "),t&&i.push(n("active")),i.push('">\n              '),i.push(n(e.toUpperCase())),i.push('\n              <span class="mini-checked"></span>\n            </span>\n          ');i.push("\n        </div>\n      </li>\n    ")}i.push('\n  </ul>\n  <div id="invoice-region"></div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/information"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog modal-lg modal-md modal-sm">\n  <button type="button" class="close" data-dismiss="modal">\n      <span class="icon-close"></span>\n      <span class="sr-only">Fermer</span>\n  </button>\n  <div class="modal-content">\n\n    <div class="modal-header">\n\n      <h4 class="modal-title">Demande enregistr\xe9e, que va t\u2019il se passer maintenant ?</h4>\n    </div>\n\n    <div class="modal-body"></div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/loader"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="row">\n  <div class="col-md-12 main-content">\n\n    <h1 class="big-title center-block">Calculs en cours...</h1>\n\n    <div id="simulation_progress" class="progress">\n\n      <div class="progress-bar" aria-valuemax="100" aria-valuemin="1" aria-valuenow="1"\n        role="progressbar" style="width: 1%;"></div>\n\n    </div>\n\n    <div class="alert alert-info">\n      <h4 class="invisible charg_step1">\n        Station M\xe9t\xe9o France de <b class="station-name"></b> : R\xe9cup\xe9ration des donn\xe9es...\n      </h4>\n      <h4 class="invisible charg_step2">\n        Evaluation des consommations actuelles...\n      </h4>\n      <h4 class="invisible charg_step3">\n        Simulation de travaux et d\'installation d\'\xe9quipements...\n      </h4>\n      <h4 class="invisible charg_step4">\n        Calcul des consommations en kWh apr\xe8s travaux...\n      </h4>\n      <h4 class="invisible charg_step5">\n        Conversion des kWh en euros...\n      </h4>\n      <h4 class="invisible charg_step6">\n        Comparaison des r\xe9sultats...\n      </h4>\n    </div>\n\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/pes_solution"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="pes-bg">\n  <div class="container">\n    <div class="row">\n      <div class="row">\n        <div class="col-sm-12">\n          <h3><b>Offre exceptionnelle d\'isolation des combles perdus \xe0 1&nbsp;\u20ac&ast;</b></h3>\n          <div>&ast; Offre soumise \xe0 conditions</div>\n        </div>\n        <div class="col-sm-8">\n          <div class="box-info-pes">\n            <ul class="recommend-list">\n              <li>Offre issue d\'un programme <strong>valid\xe9 par le Minist\xe8re de l\'\xc9cologie et du D\xe9veloppement durable</strong></li>\n              <li>Financement assur\xe9 par les fournisseurs d\'\xe9nergie</li>\n              <li>Plus de <strong>'),i.push(n(this.nb_benef_pes)),i.push(' familles</strong> en ont d\xe9j\xe0 b\xe9n\xe9fici\xe9</li>\n            </ul>\n            <div class="text-center">\n              &nbsp;<a href="javascript:void(0);" class="link-pes-modal arrow-link"><span class="icon-arrow-title4"></span>En savoir plus sur l\'offre d\'isolation des combles</a>&nbsp;\n            </div>\n            <div class="text-center">\n              <a href="javascript:void(0);" class="link-pes-modal btn btn-simulator">Demander \xe0 \xeatre contact\xe9</a>\n            </div>\n            <div class="text-center">\n              <a href="javascript:void(0);" class="link-pes-created btn btn-positive btn-static hidden">Demande enregistr\xe9e</a>\n            </div>\n          </div>\n        </div>\n        <div class="col-sm-4">\n          <div class="box-info-pes">\n            <h4><b>Pourquoi isoler vos combles perdus&nbsp;?</b></h4>\n            <ul class="recommend-list">\n              <li>Jusqu\'\xe0 <strong>-25% sur votre facture</strong gr\xe2ce \xe0 l\'isolation des combles</li>\n              <li><strong>+4\xb0C</strong> : gagnez en confort</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/project"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="highlighted-bg">\n  <div class="container">\n    <div class="row">\n\n      <div class="tabbable tabs-left">\n        <div class="title">\n          <span class="icon-tools"></span> Votre projet\n        </div>\n      </div>\n\n      <div id="project-select-region" class="hidden-md hidden-lg form-line"></div>\n      <div id="project-list-region" class="tabbable tabs-left"></div>\n      <div class="tabbable tabs-left">\n        <div id="solutions-region" class="tab-content"></div>\n      </div>\n\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/project_item"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<a role="tab" data-toggle="tab">'),i.push(n(this.title)),i.push("</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/project_select"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o,r;for(i.push('<select data-width="300px">\n  '),r=this.items,t=0,e=r.length;e>t;t++)o=r[t],i.push("\n    "),o.active?(i.push('\n      <option name="'),i.push(n(o.title)),i.push('" selected="selected">'),i.push(n(o.title)),i.push("</option>\n    ")):(i.push('\n      <option name="'),i.push(n(o.title)),i.push('">'),i.push(n(o.title)),i.push("</option>\n    ")),i.push("\n  ");i.push("\n</select>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/quote_created"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="main-title color1">\n  <h2>Demande enregistr\xe9e</h2>\n</div>\n\n<div class="content-list eco-content">\n  <ul class="house-list">\n    <li>\n      <div class="ib">\n        <span class="badge hidden-md hidden-lg">\n          <img src="//static1.quelleenergie.net/assets/simulators/quotation-white-5839e29b343362cafa50684f1e649d6b.png"></img>\n        </span>\n      </div>\n      <div class="ib">\n        <span>Nous avons bien enregistr\xe9 votre demande de mise en relation pour vos travaux '),i.push(this.solutionTitle()),i.push('</span>\n      </div>\n    </li>\n    <li>\n      <div class="ib">\n        <span class="badge hidden-md hidden-lg">\n          <img src="//static1.quelleenergie.net/assets/simulators/call-white-063d472d2f1ae092923448ffff325dec.png"></img>\n        </span>\n      </div>\n      <div class="ib">\n        <span>Un conseiller Quelle Energie va vous recontacter pour vous conseiller sur votre projet, et valider votre demande de devis</span>\n      </div>\n    </li>\n  </ul>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/recommended_solution"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o,r;for(i.push('<div class="main-title color2">\n  <span class="icon-list"></span>\n    <h2>\n      '),i.push(this.highlighted?"\n      <span>Votre projet : </span>\n      ":"\n      <span>Notre recommandation : </span>\n      "),i.push('\n      <span class="text-uppercase">'),i.push(n(this.title)),i.push('</span>\n\n    </h2>\n  <a class="icon-mini-info information-button"></a>\n</div>\n\n<div class="content-list">\n\n\n  <div class="left solution-picture">\n    '),this.replacement?i.push('\n      <span class="flaticon stroke repeat-4"></span>\n    '):this.thermal&&!this.economic?i.push('\n      <span class="flaticon stroke gauge-1"></span>\n    '):this.acoustic&&!this.economic&&i.push('\n      <span class="flaticon stroke speaker-2"></span>\n    '),i.push('\n    <img src="'),i.push(n(this.recommandation_picture)),i.push('" />\n  </div>\n\n\n  <div class="left">\n    <ul class="recommend-list">\n      '),(this.acoustic||this.economic||this.thermal)&&(i.push('\n        <li>\n          <span class="highlighted">\n            '),this.economic?(i.push("\n              Gain : "),i.push(n(this.annual_saving_text)),i.push("\n            ")):this.thermal&&this.acoustic?i.push("\n              Am\xe9lioration du confort global\n            "):this.thermal?i.push("\n              Am\xe9lioration du confort thermique\n            "):this.acoustic&&i.push("\n              Am\xe9lioration du confort phonique\n            "),i.push("\n          </span>\n        </li>\n      ")),i.push("\n      "),r=this.benefits,e=0,o=r.length;o>e;e++)t=r[e],i.push("\n        <li>"),i.push(t),i.push("</li>\n      ");i.push("\n    </ul>\n    "),this.quote_requested?i.push('\n      <button type="button" class="btn btn-positive btn-static">\n        <span class=\'icon-mini-checked\'></span>\n        Demande Enregistr\xe9e\n      </button>\n    '):(i.push('\n      <button type="button" class="btn btn-simulator btn-static" data-cee-url="/simulation/inscription-prime-energie/nouvelle?quote=1&solutions='),i.push(n(this.french_label)),i.push('">Obtenir un Devis Gratuit</button>\n    ')),i.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/result"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="container" id="loader-region"></div>\n\n<div class="container main-content">\n  <div class="row">\n    <div id="invoice-region" class="col-md-12"></div>\n  </div>\n  <div class="row">\n    <div id="quote-created-region" class="col-md-4 hidden-md hidden-lg"></div>\n    <div id="solution-region" class="col-md-12"></div>\n    <div id="house-region" class="col-md-4"></div>\n    <div id="recommended-solution-region" class="col-md-8 hidden-xs hidden-sm"></div>\n    <div id="simulations-mobile-region" class="col-md-8 hidden-md hidden-lg"></div>\n    <div id="ask-bonus-region" class="col-md-8 hidden-md hidden-lg"></div>\n  </div>\n</div>\n\n<div id="social-share" class="container main-content"></div>\n\n<div id="project-region" class="hidden-xs hidden-sm"></div>\n\n<div id="price-project-region"></div>\n\n<div id="pes-solution-region"></div>\n\n<div id="region-modal-cee"></div>\n\n<div id="region-form"></div>\n\n<div id="region-modal-pes"></div>\n\n<div id="information-region"></div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/social_sharing"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="social-share row">\n  <div class="col-sm-offset-1 col-md-offset-1 col-lg-offset-1 col-lg-5 col-md-5 col-sm-5 col-xs-12" style="margin-top: 5px;">\n    <h6 class="txt-c text-uppercase">\n      Partagez votre \xe9tiquette \xe9nerg\xe9tique\n    </h6>\n  </div>\n  <div class="clearfix col-md-6 col-sm-6 col-xs-12 txt-l no-margin-top">\n    <a href="'),i.push(n(this.facebookUrl())),i.push('" class="facebook social-link col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1 col-md-2 col-sm-2 col-xs-2 txt-c" title="Partagez votre \xe9tiquette \xe9nerg\xe9tique sur Facebook">\n      <div class="social-icon icon-a-facebook"></div>\n    </a>\n    <a href="'),i.push(n(this.twitterUrl())),i.push('" class="twitter social-link col-md-2 col-sm-2 col-xs-2 txt-c" title="Partagez votre \xe9tiquette \xe9nerg\xe9tique sur Twitter">\n      <div class="social-icon icon-a-twitter"></div>\n    </a>\n    <a href="'),i.push(n(this.googlePlusUrl())),i.push('" class="googleplus social-link col-md-2 col-sm-2 col-xs-2 txt-c" title="Partagez votre \xe9tiquette \xe9nerg\xe9tique sur Google Plus">\n      <div class="social-icon icon-a-googleplus"></div>\n    </a>\n    <a href="'),i.push(n(this.linkedInUrl())),i.push('" class="linkedin social-link col-md-2 col-sm-2 col-xs-2 txt-c" title="Partagez votre \xe9tiquette \xe9nerg\xe9tique sur LinkedIn">\n      <div class="social-icon icon-a-linkedin"></div>\n    </a>\n    <a href="'),i.push(n(this.mailUrl())),i.push('" class="mailshare col-md-2 col-sm-2 col-xs-2 txt-c" title="Partagez votre \xe9tiquette \xe9nerg\xe9tique par mail">\n      <div class="social-icon icon-a-mailshare"></div>\n    </a>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/solution"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o,r;if(this.valid){for(i.push('\n  <a class="information-button icon-mini-info2"></a>\n  <h3>'),i.push(n(this.title)),i.push('</h3>\n\n  <div class="solution-picture">\n    '),this.replacement?i.push('\n      <span class="flaticon stroke repeat-4"></span>\n    '):this.thermal&&!this.economic?i.push('\n      <span class="flaticon stroke gauge-1"></span>\n    '):this.acoustic&&!this.economic&&i.push('\n      <span class="flaticon stroke speaker-2"></span>\n    '),i.push('\n    <img src="'),i.push(n(this.carousel_picture)),i.push('" />\n  </div>\n\n  '),this.quote_requested?i.push('\n    <button type="button" class="btn btn-positive ask-quote">Enregistr\xe9</button>\n  '):(i.push('\n    <button type="button" class="btn btn-simulator ask-quote" data-cee-url="/simulation/inscription-prime-energie/nouvelle?quote=1&solutions='),i.push(n(this.french_label)),i.push('" data-workprojectform-url="/demande-devis/questions?solution='),i.push(n(this.french_label)),i.push('">Obtenir un Devis gratuit</button>\n  ')),i.push('\n\n  <ul class="recommend-list">\n    '),(this.acoustic||this.economic||this.thermal)&&(i.push('\n      <li>\n        <span class="highlighted">\n          '),this.economic?(i.push("\n            Gain : "),i.push(n(this.annual_saving_text)),i.push("\n          ")):this.thermal&&this.acoustic?i.push("\n            Am\xe9lioration du confort global\n          "):this.thermal?i.push("\n            Am\xe9lioration du confort thermique\n          "):this.acoustic&&i.push("\n            Am\xe9lioration du confort phonique\n          "),i.push("\n        </span>\n      </li>\n    ")),i.push("\n    "),r=this.benefits,e=0,o=r.length;o>e;e++)t=r[e],i.push("\n      <li>"),i.push(t),i.push("</li>\n    ");i.push("\n  </ul>\n\n")}else i.push('\n  <a class="information-button icon-mini-info2"></a>\n  <h3>'),i.push(n(this.title)),i.push('</h3>\n\n  <div class="solution-picture">\n    '),this.replacement&&i.push('\n      <span class="flaticon stroke repeat-4"></span>\n    '),i.push('\n    <img src="'),i.push(n(this.carousel_picture)),i.push('" />\n  </div>\n\n  '),this.quotable&&this.quote_requested?i.push('\n    <button type="button" class="btn btn-positive ask-quote">Enregistr\xe9</button>\n  '):this.quotable&&!this.quote_requested?i.push('\n    <button type="button" class="btn btn-simulator ask-quote">Obtenir un Devis gratuit</button>\n  '):this.quotable||i.push('\n    <div class="empty-zone"></div>\n  '),i.push('\n\n  <ul class="recommend-list not-retained">\n    <li>\n      <span class="flaticon stroke info-1"></span>\n      <span class="not-retained-text">'),i.push(n(this.message)),i.push("</span>\n    </li>\n  </ul>\n\n");i.push("\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/solution_mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('\n\n<div class="visible-xs-custom">\n  <div class="title-mobile">\n    <h1><span class="badge">'),i.push(n(this.index())),i.push("</span>"),i.push(n(this.title)),i.push('</h1>\n    <a class="icon-mini-info2 information-button"></a>\n  </div>\n\n  <div class="solution-picture">\n    <img src="'),i.push(n(this.carousel_mobile_picture)),i.push('" />\n    '),this.highlights()&&(i.push('\n      <span class="highlighted">\n        '),this.economic?(i.push('\n          <span class="gain big">'),i.push(n(this.annual_saving_text)),i.push('</span>\n          <span class="saved">\xc9conomis\xe9s</span>\n        ')):this.thermal&&this.acoustic?i.push('\n          <span class="gain small">Am\xe9lioration du confort global</span>\n        '):this.thermal?i.push('\n          <span class="gain small">Am\xe9lioration du confort thermique</span>\n        '):this.acoustic&&i.push('\n          <span class="gain small">Am\xe9lioration du confort phonique</span>\n        '),i.push("\n      </span>\n    ")),i.push('\n  </div>\n\n  <div class="get-prospect">\n    '),this.quote_requested?i.push('\n      <button type="button" class="btn btn-positive btn-static">\n        <span class=\'icon-mini-checked\'></span>\n        Demande Enregistr\xe9e\n      </button>\n    '):(i.push('\n      <button type="button" class="btn btn-simulator btn-static" data-cee-url="/simulation/inscription-prime-energie/nouvelle?quote=1&solutions='),i.push(n(this.french_label)),i.push('" data-workprojectform-url="/demande-devis/questions?solution='),i.push(n(this.french_label)),i.push('">Obtenir un Devis Gratuit</button>\n    ')),i.push("\n  </div>\n</div>\n\n"),i.push('\n\n<table class="visible-sm-custom" cellspacing="0" cellpadding="0">\n  <tbody>\n    <td class="title-mobile">\n      <h1><span class="badge">'),i.push(n(this.index())),i.push('</span><span class="solution-title">'),i.push(n(this.title)),i.push('</span></h1>\n      <a class="icon-mini-info2 information-button"></a>\n    </td>\n\n    <td class="solution-picture">\n      <img src="'),i.push(n(this.carousel_picture)),i.push('" />\n      '),this.economic?(i.push('\n        <span class="highlighted">\n          <span class="gain">'),i.push(n(this.annual_saving_text)),i.push('</span>\n          <span class="saved">\xc9conomis\xe9s</span>\n        </span>\n      ')):this.thermal&&this.acoustic?i.push('\n        <span class="highlighted big">\n          <span class="gain small">Am\xe9lioration du confort global</span>\n        </span>\n      '):this.thermal?i.push('\n        <span class="highlighted big">\n          <span class="gain small">Am\xe9lioration du confort thermique</span>\n        </span>\n      '):this.acoustic&&i.push('\n        <span class="highlighted big">\n          <span class="gain small">Am\xe9lioration du confort phonique</span>\n        </span>\n      '),i.push('\n    </td>\n\n    <td class="get-prospect">\n      '),this.quote_requested?i.push('\n        <button type="button" class="btn btn-positive btn-static"><span class=\'icon-mini-checked\'></span>Demande Enregistr\xe9e</button>\n      '):(i.push('\n        <button type="button" class="btn btn-simulator btn-static" data-cee-url="/simulation/inscription-prime-energie/nouvelle?quote=1&solutions='),i.push(n(this.french_label)),i.push('" data-workprojectform-url="/demande-devis/questions?solution='),i.push(n(this.french_label)),i.push('">Obtenir un Devis Gratuit</button>\n      ')),i.push("\n    </td>\n</table>\n")}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/solutions"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},o=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push("<h2>\n  "),this.activeProjectAltTitle()?(i.push("\n    "),i.push(n(this.activeProjectAltTitle())),i.push(" d'\xe9conomies d'\xe9nergie pour votre logement :\n  ")):(i.push("\n    "),"invalid_solutions"===this.activeProjectName()?(i.push("\n      "),1===this.numberOfSolutions()?i.push("\n        La solution non-retenue\n      "):(i.push("\n        les "),i.push(n(this.numberOfSolutions())),i.push(" solutions non-retenues\n      ")),i.push("\n    ")):(i.push("\n      "),1===this.numberOfSolutions()?(i.push("\n        L'autre solution pour "),i.push(n(this.activeProjectTitle())),i.push("\n      ")):(i.push("\n        Les "),i.push(n(this.numberOfSolutions())),i.push(" autres solutions pour "),i.push(n(this.activeProjectTitle())),i.push("\n      ")),i.push("\n    ")),i.push("\n  ")),i.push('\n</h2>\n\n<div class="form-line">\n  '),"invalid_solutions"!==this.activeProjectName()&&this.numberOfSolutions()>1&&(i.push('\n    <div class="dropdown filter">\n      <a href="#" data-toggle="dropdown" role="button" id="drop1">\n        '),i.push(n(this.sortTitle)),i.push(' <span class="caret"></span>\n      </a>\n\n      <ul role="menu" class="dropdown-menu" id="sort-dropdown">\n        <li><a data-sort="annualSaving">par \xe9conomie</a></li>\n        <li><a data-sort="price">par prix</a></li>\n      </ul>\n    </div>\n  ')),i.push('\n</div>\n\n<div class="jcarousel-wrapper carousel-tab">\n  <div class="jcarousel">\n    <ul id="solution-view"></ul>\n  </div>\n  <a class="jcarousel-control-prev"></a>\n  <a class="jcarousel-control-next"></a>\n  <a class="gradient"></a>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=r,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/simulations/result/solutions_mobile"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<h1 class="main-mobile-title">\n  '),i.push(this.isQuoteRequest()||this.quoteCreated()?"\n    Pour aller plus loin\n  ":this.collectionSize()>1?"\n    Nos recommandations\n  ":"\n    Notre recommandation\n  "),i.push("\n</h1>\n"),this.isQuoteRequest()?i.push('\n  <div class="bouquet">\n    <p>\n      Pensez aux <b>Bouquets travaux : </b> en combinant des travaux, vous profiterez d\'aides plus importantes et ferez une <b>r\xe9novation compl\xe8te</b> de votre logement.\n    </p>\n    <a class="btn btn-action" href="/demande-devis/formulaire">Ajouter des travaux</a>\n  </div>\n  <h4 class="other-solutions"><b>Les autres solutions d\'\xe9conomies d\'\xe9nergie pour votre logement :</b></h4>\n'):this.quoteCreated()&&i.push("\n  <p>\n    Pensez aux bouquets de travaux : en combinant des travaux, vous profiterez d'aides plus importantes et ferez une <b>r\xe9novation compl\xe8te de votre logement !</b>\n  </p>\n"),i.push('\n<div id="solutions-mobile"></div>\n'),this.collectionSize()>5&&i.push('\n  <a href="#" class="see-more-solutions">\n    <span>Voir plus de solutions</span>\n    <span class="flaticon stroke down-2"></span>\n    <span class="flaticon stroke up-2 hidden"></span>\n  </a>\n'),i.push("\n")}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/subsidies_simulations/result/cee"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog modal-lg modal-md modal-sm">\n  <button type="button" class="close" data-dismiss="modal">\n      <span class="icon-close"></span>\n      <span class="sr-only">Fermer</span>\n  </button>\n  <div class="modal-content">\n\n    <div class="modal-header"></div>\n\n    <div class="modal-body"></div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/subsidies_simulations/result/informations"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;
("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog modal-lg modal-md modal-sm">\n  <button type="button" class="close" data-dismiss="modal">\n      <span class="icon-close"></span>\n      <span class="sr-only">Fermer</span>\n  </button>\n  <div class="modal-content">\n\n    <div class="modal-header">\n      <h4 class="modal-title"></h4>\n    </div>\n\n    <div class="modal-body"></div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/subsidies_simulations/result/loader"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="row">\n  <div class="col-md-12 main-content">\n\n    <h1 class="big-title center-block">Calculs en cours...</h1>\n\n    <div id="simulation_progress" class="progress">\n\n      <div class="progress-bar" aria-valuemax="100" aria-valuemin="1" aria-valuenow="1"\n        role="progressbar" style="width: 1%;"></div>\n\n    </div>\n\n    <div class="alert alert-info">\n      <h4 class="invisible charg_step1">\n        Composition du foyer fiscal...\n      </h4>\n      <h4 class="invisible charg_step2">\n        Calcul des d\xe9penses \xe9ligibles au cr\xe9dit d\'imp\xf4t...\n      </h4>\n      <h4 class="invisible charg_step3">\n        Estimation du montant \xe9conomis\xe9 en kWh cumac...\n      </h4>\n      <h4 class="invisible charg_step4">\n        V\xe9rification de votre \xe9ligibilit\xe9 au programme Habiter Mieux de l\'Anah...\n      </h4>\n      <h4 class="invisible charg_step5">\n        Identification des compatibilit\xe9s et cumuls des aides...\n      </h4>\n      <h4 class="invisible charg_step6">\n        Redirection vers la page de r\xe9sultats...\n      </h4>\n    </div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["front_v3/templates/views/subsidies_simulations/result/pes"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog modal-lg modal-md">\n  <button type="button" class="close" data-dismiss="modal">\n      <span class="icon-close"></span>\n      <span class="sr-only">Fermer</span>\n  </button>\n  <div class="modal-content">\n\n    <div class="modal-header"></div>\n\n    <div class="modal-body"></div>\n\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Backbone.Marionette.ModalView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.className="modal",i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.hideModal()},i.prototype.showModal=function(t){return null==t&&(t=null),t?$.ajax({url:t,method:"GET",type:"GET",dataType:"HTML",success:function(t){return function(e){return t.$el.find(".modal-body").html(e),t.$el.modal("show"),t.trigger("loaded")}}(this)}):this.$el.modal("show")},i.prototype.hideModal=function(){return this.$el.modal("hide")},i}(Backbone.Marionette.ItemView)}.call(this),function(){QuelleEnergie.Lib.Component=function(){function t(t,e){var i,n,o;if(this.el=t,this.$el=$(t),this.options=$.extend(this.defaults,e),void 0!==this.templatePath)if(_.isObject(this.templatePath)){this.template=[],n=this.templatePath;for(i in n)o=n[i],this.template[i]=JST["front_v3/templates/"+o]}else this.template=JST["front_v3/templates/"+this.templatePath];void 0!==this.initialize&&this.initialize()}return t}()}.call(this),function(){_.mixin({uncapitalize:function(t){return""+t.charAt(0).toLowerCase()+t.slice(1)},capitalize:function(t){return""+t.charAt(0).toUpperCase()+t.slice(1)},sum:function(t){return _.reduce(t,function(t,e){return t+parseInt(e)},0)},average:function(t){return _.sum(t)/t.length},numberWithSpaces:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}})}.call(this),function(){window.TEMPLATE=function(t){return JST["front_v3/templates/views/"+t]}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Components.Checkbox=function(i){function n(){return this.onClick=t(this.onClick,this),this.onMove=t(this.onMove,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.templatePath="components/checkbox",n.prototype.defaults={activeClass:"checked"},n.prototype.initialize=function(){return this.name=this.$el.data("checkbox-name"),this.text=this.$el.find("label").text(),this.icon=this.$el.data("checkbox-icon"),this.stitle=this.$el.hasClass("long-title"),this.$input=this.$el.find("input"),this.render()},n.prototype.render=function(){var t;return t=this.template({checked:this.$input.is(":checked")?this.options.activeClass:"",value:this.$input.val(),name:this.name,icon:this.icon,text:this.text,stitle:this.stitle}),this.$checkbox=this.$el.hide().after(t).next(),this.bindRadioEvents()},n.prototype.bindRadioEvents=function(){return isMobile.any||this.$checkbox.on("click",this.onClick),isMobile.any?this.$checkbox.on("touchend",this.onClick).on("touchmove",this.onMove):void 0},n.prototype.onMove=function(t){return this.$checkbox.off("touchend",this.onClick),t.preventDefault(),this.$checkbox.on("touchend",this.onClick)},n.prototype.onClick=function(t){var e,i;return e=$(t.currentTarget),i=e.hasClass(this.options.activeClass),i?e.removeClass(this.options.activeClass):e.addClass(this.options.activeClass),this.$input.prop("checked",i).trigger("change").trigger("click"),e.trigger("QeCheckBox:clicked")},n.prototype.getActiveRadio=function(){return $(".item-choice[data-name='"+this.name+"']."+this.options.activeClass)},n}(QuelleEnergie.Lib.Component)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Components.CitySelector=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.templatePath={empty:"components/city_selector/empty",suggestion:"components/city_selector/suggestion"},i.prototype.defaults={hint:!1,highlight:!1,minLength:5},i.prototype.initialize=function(){return this.cities=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"/communes?search=%SEARCH",replace:function(t,e){var i;return i=encodeURIComponent(this.$el),t.replace("%SEARCH",e)}}}),this.cities.initialize(),this.render()},i.prototype.render=function(){return this.$el.data("minlength")&&(this.options.minLength=parseInt(this.$el.data("minlength"))),this.$el.typeahead(this.options,{name:"cities",limit:50,displayKey:function(t){return t.code_postal+" - "+t.nom},source:this.cities.ttAdapter(),engine:this.engine,templates:{empty:this.template.empty,suggestion:this.template.suggestion}})},i.prototype.engine=function(){return{compile:function(t){return{render:function(e){return t(e)}}}}},i}(QuelleEnergie.Lib.Component)}.call(this),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({html:!0}),$('[data-toggle="popover"]').popover({html:!0,trigger:"hover"})}),function(){$(document).ready(function(){var t,e;return t=function(t){return $("#new_callback_request").on("ajax:error",function(e,i){var n;return n=JSON.parse(i.responseText),t.find(".errors").empty(),_.each(n,function(e){return t.find(".errors").append('<p class="text-danger">'+e+"</p>")})}).on("ajax:success",function(e,i){return t.find(".errors").empty(),t.find(".modal-body").html('<br/><br/><br/><div class="row"><div class="col-xs-3 col-sm-3 col-md-3 txt-c" style=""><i class="flaticon stroke checkmark-1 x4 text-success"></i></div><div class="col-xs-9 col-sm-9 col-md-9"><p class="ok h4">'+i.success+"</p></div></div>")})},(e=function(){return $(".call-me-back").click(function(){var e,i;return i=$("#callback-request-modal-content").html(),e=$("#main-modal"),e.find(".modal-content").html(i),isMobile.any||e.find("select").selectpicker({dropupAuto:!1}),e.modal("show"),t(e)})})()})}.call(this),function(){$(function(){return $(".simple-carousel, .multi-carousel").each(function(){var t,e;return t=$(this).jcarousel(),e=t.parent(".jcarousel-wrapper").find(".simple-carousel-pagination, .multi-carousel-pagination"),e.length?e.on("jcarouselpagination:active","a",function(){return $(this).addClass("active")}).on("jcarouselpagination:inactive","a",function(){return $(this).removeClass("active")}).jcarouselPagination({carousel:t}):void 0}),$("#carousel-press, #carousel-question").each(function(){var t;return t=$(this).jcarousel({vertical:!0}),t.find(".carousel-control-prev").jcarouselControl({target:"-=1",carousel:t}).on("jcarouselcontrol:inactive",function(){return $(this).addClass("inactive")}).on("jcarouselcontrol:active",function(){return $(this).removeClass("inactive")}),t.find(".carousel-control-next").jcarouselControl({target:"+=1",carousel:t}).on("jcarouselcontrol:inactive",function(){return $(this).addClass("inactive")}).on("jcarouselcontrol:active",function(){return $(this).removeClass("inactive")})})})}.call(this),function(){jQuery(function(t){return isMobile.any||t("select").selectpicker({dropupAuto:!1}),t(".check-box").each(function(t,e){return new QuelleEnergie.Components.Checkbox(e)}),t(".typeahead.city_selector").each(function(t,e){return new QuelleEnergie.Components.CitySelector(e)}),QuelleEnergie.Helpers.Form().mobileErrors()})}.call(this),function(){!function(t){t.fn.goTo=function(){return t("html, body").animate({scrollTop:t(this).offset().top+"px"},"fast"),this}}(jQuery)}.call(this),$(document).ready(function(){$("body").on("hidden.bs.modal",".modal",function(){$(this).removeData("bs.modal")})}),function(){$(function(){return $("body").on("change",".item-choice input:radio",function(t){var e;return e=$(t.currentTarget).attr("name"),$("input:radio[name='"+e+"']").each(function(t,e){var i;return i=$(e),i.is(":checked")?i.closest(".item-choice").addClass("checked"):i.closest(".item-choice").removeClass("checked")})}),$(".item-choice input:radio").trigger("change")})}.call(this),function(){$(function(){var t,e;return t=$(".social-share"),t.length&&(t.find("a.social-link").on("click",function(){var t;return t="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600",window.open(this.href,"",t),e(),!1}),t.find("a.mailshare").on("click",function(){return e(),!0})),e=function(){return dataLayer.push({event:"GAEvent",ga_event_action:"Affichage modal box partage reseaux sociaux",ga_event_category:"parcours client"})}})}.call(this),jQuery(document).ready(function(t){t(".espace-partenaire-top-page").length&&t(window).scroll(function(){var e=t(window).scrollTop();e=450>e?Math.round(e/3-150):0,t(".espace-partenaire-top-page").css("background-position","center "+e+"px")})}),jQuery(function(t){"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(t("body").addClass("touch"),initTouchByPass()):t("body").addClass("no-touch")}),function(){QuelleEnergie.Controllers.GlobalSimulation=function(){function t(){}return t.result=function(){return this.load(!1)},t.loader=function(){return this.load(!0)},t.load=function(t){var e;return window.resultView=new QuelleEnergie.Views.SimulationResult({simulator_path:QuelleEnergie.simulator_paths.GLOBAL,simulator_name:"simulateur g\xe9n\xe9rique",simulation:new QuelleEnergie.Models.GlobalSimulation,withLoader:t,showSocialSharing:!0}),resultView.render(),e=new QuelleEnergie.Views.SimulationFeedback({simulationName:"global_simulation"}),e.render()},t}()}.call(this),function(){QuelleEnergie.Controllers.HeatingSimulation=function(){function t(){}return t.result=function(){return this.load(!1)},t.loader=function(){return this.load(!0)},t.load=function(t){var e;return window.resultView=new QuelleEnergie.Views.SimulationResult({simulator_path:QuelleEnergie.simulator_paths.HEATING,simulator_name:"simulateur chauffage",simulation:new QuelleEnergie.Models.HeatingSimulation,withLoader:t}),resultView.render(),e=new QuelleEnergie.Views.SimulationFeedback({simulationName:"heating_simulation"}),e.render()},t}()}.call(this),function(){QuelleEnergie.Controllers.PriceSimulation=function(){function t(){}return t.result=function(){return this.load(!1)},t.loader=function(){return this.load(!0)},t.load=function(t){var e;return window.resultView=new QuelleEnergie.Views.SimulationResult({simulator_path:QuelleEnergie.simulator_paths.PRICE,simulator_name:"simulateur de prix",simulation:new QuelleEnergie.Models.PriceSimulation,withLoader:t}),resultView.render(),e=new QuelleEnergie.Views.SimulationFeedback({simulationName:"price_simulation"}),e.render()},t}()}.call(this),function(){QuelleEnergie.Controllers.QuoteRequest=function(){function t(){}return t.result=function(){var t;return window.resultView=new QuelleEnergie.Views.QuoteRequestResult,resultView.render(),t=new QuelleEnergie.Views.SimulationFeedback({simulationName:"quote_request"}),t.render()},t}()}.call(this),function(){QuelleEnergie.Controllers.SubsidiesSimulation=function(){function t(){}return t.result=function(){var t,e;return e=new QuelleEnergie.Views.SubsidiesSimulationResult,e.render(),t=new QuelleEnergie.Views.SimulationFeedback({simulationName:"subsidies_simulation"}),t.render()},t.loader=function(){var t;return t=new QuelleEnergie.Views.SubsidiesSimulationLoader,t.render()},t}()}.call(this),function(){QuelleEnergie.Controllers.ThermalSimulation=function(){function t(){}return t.result=function(){return this.load(!1)},t.loader=function(){return this.load(!0)},t.load=function(t){var e;return window.resultView=new QuelleEnergie.Views.SimulationResult({simulator_path:QuelleEnergie.simulator_paths.THERMAL,simulator_name:"simulateur isolation",simulation:new QuelleEnergie.Models.ThermalSimulation,withLoader:t}),resultView.render(),e=new QuelleEnergie.Views.SimulationFeedback({simulationName:"thermal_envelope_simulation"}),e.render()},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.GlobalSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.GlobalSimulation,i.prototype.appRoutes={"bilan-energetique/resultats":"result","bilan-energetique/calcul":"loader"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.HeatingSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.HeatingSimulation,i.prototype.appRoutes={"simulateur-chauffage/calcul":"loader","simulateur-chauffage/resultats":"result"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.PriceSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.PriceSimulation,i.prototype.appRoutes={"simulateur-prix-travaux/calcul":"loader","simulateur-prix-travaux/resultats":"result"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.QuoteRequest=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.QuoteRequest,i.prototype.appRoutes={"demande-devis/resultats":"result"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.SubsidiesSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.SubsidiesSimulation,i.prototype.appRoutes={"simulateur-aides-et-subventions/resultats":"result","simulateur-aides-et-subventions/calcul":"loader"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Routers.ThermalSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.controller=QuelleEnergie.Controllers.ThermalSimulation,i.prototype.appRoutes={"simulateur-isolation/calcul":"loader","simulateur-isolation/resultats":"result"},i}(Backbone.Marionette.AppRouter)}.call(this),function(){QuelleEnergie.Helpers.Form=function(){var t,e;return e=JST["front_v3/templates/helpers/errors"],t=$(".global-error"),{mobileErrors:function(){var i;return t.size()?(i=e({message:t.html()}),$(".top-page .container h1").after(i)):void 0}}}}.call(this),function(){QuelleEnergie.Helpers.Star=function(t){var e,i,n,o;return o=JST["front_v3/templates/helpers/star"],e=o({filledStars:function(){i=[];for(var e=1,n=t.filledStars;n>=1?n>=e:e>=n;n>=1?e++:e--)i.push(e);return i}.apply(this),emptyStars:function(){n=[];for(var e=1,i=t.totalStars-t.filledStars;i>=1?i>=e:e>=i;i>=1?e++:e--)n.push(e);return n}.apply(this)})}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.PriceSimulationLoader=function(i){function n(){return this.loadResults=t(this.loadResults,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("price_simulations/result/loader"),n.prototype.progression=0,n.prototype.ui={stationName:".station-name",progressBar:".progress-bar"},n.prototype.onRender=function(){return this.ui.stationName.text(this.options.stationName),this.loadResults()},n.prototype.loadResults=function(){var t,e,i,n,o,r;for(n=this.progression.toString()+"%",this.ui.progressBar.css({width:n}),o=[15,30,60,85],e=t=0,i=o.length;i>t;e=++t)r=o[e],this.progression===r&&this.$el.find(".charg_step"+(e+1)).removeClass("invisible");return this.progression<97?(this.wait=setTimeout(this.loadResults,this.calculateDelay()),this.progression++):this.loaded()},n.prototype.calculateDelay=function(){var t;return t=30,t+=function(){switch(!1){case!(this.progression>15&&this.progression<30):return 50;case!(this.progression>30&&this.progression<60):return 80;case!(this.progression>85&&this.progression<94):return 40}}.call(this)},n.prototype.loaded=function(){return clearTimeout(this.wait),setTimeout(function(t){return function(){return t.$el.hide(),t.trigger("finish")}}(this),2e3)},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.PriceProduct=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("price_simulations/result/price_product"),i.prototype.templateHelpers=function(){return{price_description:function(t){return function(){switch(t.model.get("price_level")){case 1:return"Entr\xe9e de gamme";case 2:return"Prix moyen";default:return"Haut de gamme"}}}(this)}},i}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.PriceProducts=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("price_simulations/result/price_products"),i.prototype.childView=QuelleEnergie.Views.PriceProduct,i.prototype.childViewContainer="#products",i.prototype.className="tab-pane active",i.prototype.initialize=function(){return this.collection=this.options.collection,this.activeSolution=this.options.activeSolution},i.prototype.templateHelpers=function(){return{title:function(t){return function(){return t.activeSolution.get("product_title")}}(this)}},i}(Backbone.Marionette.CompositeView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.PriceSimulationProject=function(i){function n(){return this.onChangeActive=t(this.onChangeActive,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("price_simulations/result/price_project"),n.prototype.regions={regionProjectList:"#project-list-region",regionProducts:"#products-region"},n.prototype.initialize=function(){this.simulation=this.options.simulation,this.simulation.solutions.on("changeActive",this.onChangeActive),this.activeSolution=this.simulation.solutions.activeSolution(),this.activeSolution.get("active")||this.activeSolution.set({active:!0})},n.prototype.onRender=function(){return this.projectListView=new QuelleEnergie.Views.PriceSimulationProjectList({collection:this.simulation.solutions}),this.regionProjectList.show(this.projectListView),this.productsView=new QuelleEnergie.Views.PriceProducts({collection:this.activeSolution.get("products"),activeSolution:this.activeSolution}),this.regionProducts.show(this.productsView)},n.prototype.onChangeActive=function(){return this.activeSolution=this.simulation.solutions.activeSolution(),this.render()},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.PriceSimulationProjectItem=function(i){function n(){return this.onClick=t(this.onClick,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("price_simulations/result/price_project_item"),n.prototype.tagName="li",n.prototype.events={"click a":"onClick"},n.prototype.onRender=function(){return this.model.get("active")?this.$el.addClass("active"):void 0},n.prototype.onClick=function(){return this.model.collection.resetActiveSolution(),this.model.set({active:!0}),this.model.collection.trigger("changeActive")},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.PriceSimulationProjectList=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.childView=QuelleEnergie.Views.PriceSimulationProjectItem,i.prototype.tagName="ul",i.prototype.onRender=function(){return this.$el.addClass("nav nav-tabs").attr({role:"tablist"})},i}(Backbone.Marionette.CollectionView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.PriceSolution=function(i){function n(){return this.onQuoteCreated=t(this.onQuoteCreated,this),this.onQuoteRequested=t(this.onQuoteRequested,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("price_simulations/result/price_solution"),n.prototype.ui={button:".ask-quote",informationButton:".information-button"},n.prototype.templateHelpers=function(){return{col_class:function(t){return function(){return t.simulation.solutions.size()<=2?"col-md-6":"col-md-4"}}(this),offset_class:function(t){return function(){return 1===t.simulation.solutions.size()?"col-md-offset-3":""}}(this),ask_quote_message:function(t){return function(){return 3===t.simulation.solutions.size()?"Affinez ce prix en recevant jusqu'\xe0 3 devis gratuits":"Affinez cette estimation en recevant jusqu'\xe0 3 devis gratuits"}}(this),ci_eligibility_message:function(t){return function(){return"all"===t.model.get("ci_eligibility")?"Travaux \xe9ligibles au cr\xe9dit d'imp\xf4t de 30% (\xe9quipement et main d'oeuvre)":"material"===t.model.get("ci_eligibility")?"chaudiere_fioul_condensation"===t.model.get("french_label")?"Travaux \xe9ligibles au cr\xe9dit d'imp\xf4t de 30% (\xe9quipement) pour tout devis sign\xe9 avant le 1er Janvier 2018":"Travaux \xe9ligibles au cr\xe9dit d'imp\xf4t de 30% (\xe9quipement)":""}}(this)}},n.prototype.initialize=function(){return this.simulation=this.options.simulation,this.model.on("quoteRequested",this.onQuoteRequested),this.model.on("quoteCreated",this.onQuoteCreated),this.model.set({simulator_path:this.options.simulator_path})},n.prototype.onRender=function(){return this.ui.button.on("click",this.onQuoteRequested),this.ui.informationButton.tooltip({html:!0,title:"Pour ce type de projet, les prix constat\xe9s varient entre "+this.model.get("lower_cost")+" et "+this.model.get("higher_cost")+"."})},n.prototype.onQuoteRequested=function(t){return this.requestingQuote||this.ui.button.hasClass("btn-positive")?void 0:(this.requestingQuote=!0,this.simulation.trigger("clickGetQuote",t),this.model.set({quote_requested:!0}),this.model.askForQuote())},n.prototype.onQuoteCreated=function(){return this.requestingQuote=!1,this.$el.find(".ask-quote").addClass("btn-positive").removeClass("btn-simulator"),this.$el.find(".ask-quote").html("<span class='icon-mini-checked'></span>&nbsp;Demande Enregistr\xe9e"),window.resultView.renderQuoteCreatedView?window.resultView.renderQuoteCreatedView(this.model.get("title")):void 0},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.PriceSolutions=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("price_simulations/result/price_solutions"),i.prototype.childView=QuelleEnergie.Views.PriceSolution,i.prototype.childViewContainer="#solutions",i.prototype.ui={informationButton:".information-button"},i.prototype.initialize=function(){return this.simulation=this.options.simulation,this.model=this.options.model,this.collection=this.options.collection,this.simulator_path=this.options.simulator_path},i.prototype.onRender=function(){return this.ui.informationButton.tooltip({html:!0,title:"Co\xfbt moyen calcul\xe9 \xe0 partir de votre localisation et des caract\xe9ristiques techniques de votre projet."})},i.prototype.templateHelpers=function(){return{collectionSize:function(t){return function(){return t.collection.size()}}(this)}},i}(Backbone.Marionette.CompositeView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.QuoteRequestForm=function(i){function n(){return this.associateSolution=t(this.associateSolution,this),this.onSubmitSuccess=t(this.onSubmitSuccess,this),this.onLoadedModal=t(this.onLoadedModal,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("subsidies_simulations/result/cee"),n.prototype.className="modal fade",n.prototype.button="#btn-modal-form",n.prototype.errorMsg=".global-error",n.prototype.initialize=function(){var t,e,i,n,o;for(this.on("loaded",this.onLoadedModal),i=this.options.solutions.models,n=[],t=0,e=i.length;e>t;t++)o=i[t],n.push(o.on("display::form",this.associateSolution));return n},n.prototype.onLoadedModal=function(){return isMobile.any||this.$el.find("select").selectpicker(),this.$el.find("[data-display-if]").conditionallyDisplayed(),this.initRadioButtons(),this.$el.find("form").on("ajax:success",this.onSubmitSuccess)},n.prototype.onSubmitSuccess=function(t,e){return e.error_message?this.$el.find(this.errorMsg).html(e.error_message):(this.$el.find(this.button).addClass("btn-positive").removeClass("btn-simulator").val("Enregistr\xe9"),this.solution.trigger("quoteCreated"),setTimeout(function(t){return function(){return t.hideModal()}}(this),1e3))},n.prototype.associateSolution=function(t){return this.solution=t},n.prototype.initRadioButtons=function(){return this.$el.find(".item-choice input:radio").on("change",function(t){var e;return e=$(t.currentTarget).attr("name"),$("input:radio[name='"+e+"']").each(function(t,e){var i;return i=$(e),i.is(":checked")?i.closest(".item-choice").addClass("checked"):i.closest(".item-choice").removeClass("checked")})}).trigger("change")},n}(Backbone.Marionette.ModalView)}.call(this),function(){QuelleEnergie.Views.QuoteRequestModal=function(){function t(){$(".results").on("click",".link-cee-modal",function(t){return function(){return t.showIspModal()}}(this)),this.ceeView=new QuelleEnergie.Views.SubsidiesSimulationCee({model:new QuelleEnergie.Models.User}),this.ceeView.render()}return t.prototype.showIspModal=function(){return $(".modal").hasClass("in")?void 0:(this.ceeView.showModal("/simulation/inscription-prime-energie/nouvelle?isp=1"),this.ceeView.trackGoogleEvent())},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.QuoteRequestResult=function(i){function n(){return this.onClickGetQuote=t(this.onClickGetQuote,this),this.renderQuoteRequest=t(this.renderQuoteRequest,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/result"),n.prototype.el="#result-layout",n.prototype.simulator_path="demande-devis",n.prototype.regions={regionProject:"#project-region",regionSimulationsMobile:"#simulations-mobile-region",regionCee:"#region-modal-cee",regionForm:"#region-form",regionInformation:"#information-region"},n.prototype.initialize=function(){return this.quoteRequest=new QuelleEnergie.Models.QuoteRequest,this.quoteRequest.result(),this.quoteRequest.on("change",this.renderQuoteRequest),this.quoteRequest.on("clickGetQuote",this.onClickGetQuote),isMobile.any||setTimeout(function(t){return function(){return t.quoteRequest.user.viewedCeeModal?void 0:t.showIspModal()}}(this),12e4),$(".results").on("click",".link-cee-modal",function(t){return function(){return t.showIspModal()}}(this))},n.prototype.renderQuoteRequest=function(){return this.projectView=new QuelleEnergie.Views.SimulationProject({simulation:this.quoteRequest,simulator_path:this.simulator_path}),this.regionProject.show(this.projectView),this.ceeView=new QuelleEnergie.Views.SubsidiesSimulationCee({model:this.quoteRequest.user}),this.regionCee.show(this.ceeView),this.formView=new QuelleEnergie.Views.QuoteRequestForm({simulation:this.quoteRequest,solutions:this.quoteRequest.solutions}),this.regionForm.show(this.formView),this.informationView=new QuelleEnergie.Views.SimulationInformation({solutions:this.quoteRequest.solutions,user:this.quoteRequest.user}),this.regionInformation.show(this.informationView),this.solutionsMobileCollection=this.quoteRequest.solutions,this.solutionsMobileView=new QuelleEnergie.Views.SolutionsMobile({simulation:this.quoteRequest,simulator_path:this.simulator_path,collection:this.solutionsMobileCollection,childViewOptions:{simulator_path:this.simulator_path,user:this.quoteRequest.user,simulation:this.quoteRequest,collection:this.solutionsMobileCollection}}),this.regionSimulationsMobile.show(this.solutionsMobileView)
},n.prototype.showIspModal=function(){return $(".modal").hasClass("in")?void 0:(this.ceeView.showModal("/simulation/inscription-prime-energie/nouvelle?isp=1"),this.ceeView.trackGoogleEvent())},n.prototype.onClickGetQuote=function(t){return this.formView.showModal(t)},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.AskBonus=function(i){function n(){return this.toggleButton=t(this.toggleButton,this),this.onRender=t(this.onRender,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/ask_bonus"),n.prototype.initialize=function(t){return this.user=t.user,this.collection=t.collection},n.prototype.ui={askBonus:".btn-simulator"},n.prototype.onRender=function(){return window.resultView.regionPesSolution&&window.resultView.regionPesSolution.el?$(window.resultView.regionPesSolution.el).addClass("hidden-xs hidden-sm"):void 0},n.prototype.toggleButton=function(){return this.ui.askBonus.removeClass("btn-simulator").addClass("btn-positive"),this.ui.askBonus.html("<span class='icon-mini-checked'></span>Demande Enregistr\xe9e")},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.SimulationFeedback=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("simulations/result/feedback"),i.prototype.el="#feedback-layout",i.prototype.className="container",i.prototype.regions={regionFeedback:"#feedback-region"},i.prototype.onRender=function(){return this.feedbackView=new QuelleEnergie.Views.SimulationFeedbackForm({model:new QuelleEnergie.Models.Feedback({simulation:this.options.simulationName})}),this.regionFeedback.show(this.feedbackView)},i}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationFeedbackForm=function(i){function n(){return this.onClick=t(this.onClick,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/feedback_form"),n.prototype.className="container",n.prototype.ui={form:".form",textarea:"textarea",button:".btn",success:".bg-success",error:".form-error",errorText:".form-error .text"},n.prototype.events={"click .btn":"onClick"},n.prototype.onClick=function(t){return t.stopPropagation(),this.model.send({message:this.ui.textarea.val(),simulation:this.model.simulation,success:function(t){return function(e){return t.ui.error.hide(),t.ui.success.show().text(e),t.ui.textarea.prop({disabled:!0}),t.ui.button.prop({disabled:!0})}}(this),error:function(t){return function(e){return t.ui.error.show(),t.ui.errorText.text(e)}}(this)})},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.SimulationHouse=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("simulations/result/house"),i.prototype.regions={regionInvoice:"#invoice-region"},i.prototype.templateHelpers={star:QuelleEnergie.Helpers.Star,annualInvoice:function(){return _.numberWithSpaces(this.annual_invoice)},labelEnergyTitle:function(){switch(this.label_energy){case"A":case"B":return"- Logement \xe9conome";case"C":case"D":return"- Logement dans la moyenne";case"E":case"F":case"G":return"- Logement \xe9nergivore"}}},i.prototype.onRender=function(){return this.model.get("in_percentage")?(this.invoiceView=new QuelleEnergie.Views.Invoice({model:this.model,additionalClasses:"hidden-md hidden-lg"}),this.regionInvoice.show(this.invoiceView)):void 0},i}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationInformation=function(i){function n(){return this.onHideModal=t(this.onHideModal,this),this.onClickQuoteRequest=t(this.onClickQuoteRequest,this),this.displayInformations=t(this.displayInformations,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/information"),n.prototype.className="modal fade",n.prototype.ui={body:".modal-body",title:".modal-title"},n.prototype.initialize=function(){var t,e,i,n,o;for(this.options.recommendedSolution&&this.options.recommendedSolution.on("display::informations",this.displayInformations),i=this.options.solutions.models,n=[],t=0,e=i.length;e>t;t++)o=i[t],n.push(o.on("display::informations",this.displayInformations));return n},n.prototype.displayInformations=function(t){return this.solution=t,this.solution.informationsModal({success:function(t){return function(e){return t.ui.body.html(e),t.ui.title.text(t.solution.get("title")),t.initQuoteRequest(),t.$el.find("p").addClass("classic"),t.$el.modal("show")}}(this)})},n.prototype.initQuoteRequest=function(){var t;return t=this.$el.find(".btn"),this.solution.get("quote_requested")?t.removeClass("btn-simulator").addClass("btn-positive").text("Demande Enregistr\xe9e"):t.on("click",this.onClickQuoteRequest)},n.prototype.onClickQuoteRequest=function(t){return t.preventDefault(),this.$el.on("hidden.bs.modal",this.onHideModal),this.hideModal()},n.prototype.onHideModal=function(){return this.$el.off("hidden.bs.modal"),this.solution.trigger("quoteRequested")},n}(Backbone.Marionette.ModalView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.Invoice=function(i){function n(){return this.className=t(this.className,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("heating_simulations/result/invoice"),n.prototype.className=function(){return this.options.additionalClasses},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationLoader=function(i){function n(){return this.loadResults=t(this.loadResults,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/loader"),n.prototype.progression=0,n.prototype.ui={stationName:".station-name",progressBar:".progress-bar"},n.prototype.onRender=function(){return this.ui.stationName.text(this.options.stationName),this.loadResults()},n.prototype.loadResults=function(){var t,e,i,n,o,r;for(n=this.progression.toString()+"%",this.ui.progressBar.css({width:n}),o=[15,23,40,50,65,85],e=t=0,i=o.length;i>t;e=++t)r=o[e],this.progression===r&&this.$el.find(".charg_step"+(e+1)).removeClass("invisible");return this.progression<97?(this.wait=setTimeout(this.loadResults,this.calculateDelay()),this.progression++):this.loaded()},n.prototype.calculateDelay=function(){var t;return t=30,t+=function(){switch(!1){case!(this.progression>15&&this.progression<23):return 50;case!(this.progression>50&&this.progression<65):return 80;case!(this.progression>85&&this.progression<94):return 40}}.call(this)},n.prototype.loaded=function(){return clearTimeout(this.wait),setTimeout(function(t){return function(){return t.$el.hide(),t.trigger("finish")}}(this),2e3)},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.PesSolution=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("simulations/result/pes_solution"),i.prototype.onPesAsked=function(){return this.$el.find(".link-pes-modal").addClass("hidden"),this.$el.find(".link-pes-created").removeClass("hidden")},i}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationProject=function(i){function n(){return this.onChangeActive=t(this.onChangeActive,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/project"),n.prototype.regions={regionProjectSelect:"#project-select-region",regionProjectList:"#project-list-region",regionSolutions:"#solutions-region"},n.prototype.initialize=function(){return this.simulation=this.options.simulation,this.simulation.projects.on("changeActive",this.onChangeActive),this.solutions=this.simulation.solutions,this.activeProject=this.simulation.projects.activeProject()},n.prototype.onRender=function(){return this.projectListView=new QuelleEnergie.Views.SimulationProjectList({collection:this.simulation.projects}),this.projectListView.on("click",this.onSelectProject),this.regionProjectList.show(this.projectListView),this.projectSelectView=new QuelleEnergie.Views.SimulationProjectSelect({collection:this.simulation.projects}),this.projectSelectView.on("click",this.onSelectProject),this.regionProjectSelect.show(this.projectSelectView),this.simulation.solutions.length>0?(this.solutionsView=new QuelleEnergie.Views.SimulationSolutions({collection:this.solutions.getActiveSolutionsByProject(this.activeProject),activeProject:this.activeProject,childViewOptions:{user:this.simulation.user,simulator_path:this.options.simulator_path,simulation:this.simulation}}),this.regionSolutions.show(this.solutionsView)):($(window.resultView.regions.regionProject).hide(),$(window.resultView.regions.regionSimulationsMobile).hide())},n.prototype.onChangeActive=function(){return this.activeProject=this.simulation.projects.activeProject(),this.render()},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationProjectItem=function(i){function n(){return this.onClick=t(this.onClick,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/project_item"),n.prototype.tagName="li",n.prototype.events={"click a":"onClick"},n.prototype.onRender=function(){return this.model.get("active")&&this.$el.addClass("active"),this.model.get("last")?this.$el.addClass("last"):void 0},n.prototype.onClick=function(){return this.model.collection.resetActiveProject(),this.model.set({active:!0}),this.model.collection.trigger("changeActive")},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.SimulationProjectList=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.childView=QuelleEnergie.Views.SimulationProjectItem,i.prototype.tagName="ul",i.prototype.onRender=function(){return this.$el.addClass("nav nav-tabs hidden-xs hidden-sm").attr({role:"tablist"})},i}(Backbone.Marionette.CollectionView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationProjectSelect=function(i){function n(){return this.onChange=t(this.onChange,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/project_select"),n.prototype.tagName="center",n.prototype.ui={select:"select",selectpicker:".selectpicker"},n.prototype.onRender=function(){return this.ui.select.on("change",this.onChange),isMobile.any?void 0:this.ui.select.selectpicker()},n.prototype.onChange=function(){var t,e;return e=this.ui.select.find(":selected").text(),this.collection.resetActiveProject(),t=this.collection.getByTitle(e),t.set({active:!0}),this.collection.trigger("changeActive")},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.QuoteCreated=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("simulations/result/quote_created"),i.prototype.initialize=function(){return this.solutionTitle=this.options.title.toLowerCase(),this.solutionTitle=_.contains(["a","e","i","o","u","y"],this.solutionTitle[0])?"d'<b>"+this.solutionTitle+"</b>":"de <b>"+this.solutionTitle+"</b>"},i.prototype.templateHelpers=function(){return{solutionTitle:function(t){return function(){return t.solutionTitle}}(this)}},i.prototype.onRender=function(){return $("html").width()<992&&$("html,body").scrollTop($("#quote-created-region").offset().top-50),$(window.resultView.regionHouse.el).addClass("hidden-xs hidden-sm")},i}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationRecommendedSolution=function(i){function n(){return this.onQuoteCreated=t(this.onQuoteCreated,this),this.onQuoteRequested=t(this.onQuoteRequested,this),this.onClickInformation=t(this.onClickInformation,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/recommended_solution"),n.prototype.ui={button:"button",informationButton:".information-button",linkModal:".link-cee-modal"},n.prototype.requestingQuote=!1,n.prototype.initialize=function(){return this.user=this.options.user,this.simulation=this.options.simulation,this.model.on("quoteRequested",this.onQuoteRequested),this.model.on("quoteCreated",this.onQuoteCreated),this.model.set({simulator_path:this.options.simulator_path})},n.prototype.onRender=function(){return this.ui.button.on("click",this.onQuoteRequested),this.ui.informationButton.on("click",this.onClickInformation),this.ui.linkModal.replaceWith(function(){return $("<a>",{"class":this.className,href:"javascript:void(0);"}).html(this.innerHTML)})},n.prototype.onClickInformation=function(){return this.model.trigger("display::informations",this.model)},n.prototype.onQuoteRequested=function(t){return window.resultView.renderQuoteCreatedView&&window.resultView.renderQuoteCreatedView(this.model.get("title")),this.requestingQuote||this.ui.button.hasClass("btn-positive")?void 0:(window.resultView.renderQuoteCreatedView(this.model.get("title")),this.requestingQuote=!0,this.user.viewedCeeModal||this.simulation.trigger("clickGetQuote",t),this.model.set({quote_requested:!0}),this.model.askForQuote())},n.prototype.onQuoteCreated=function(){return this.requestingQuote=!1,this.$el.find("button").addClass("btn-positive").removeClass("btn-simulator"),this.$el.find("button").html("<span class='icon-mini-checked'></span>Demande Enregistr\xe9e"),window.resultView.renderQuoteCreatedView?window.resultView.renderQuoteCreatedView(this.model.get("title")):void 0},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationResult=function(i){function n(){return this.isPriceSimulator=t(this.isPriceSimulator,this),this.renderQuoteCreatedView=t(this.renderQuoteCreatedView,this),this.onClickGetQuote=t(this.onClickGetQuote,this),this.onSimulationLoaded=t(this.onSimulationLoaded,this),this.onLoaderViewFinish=t(this.onLoaderViewFinish,this),this.renderStandardSimulation=t(this.renderStandardSimulation,this),this.renderPriceSimulation=t(this.renderPriceSimulation,this),this.renderSimulation=t(this.renderSimulation,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/result"),n.prototype.el="#result-layout",n.prototype.isGlobalSimulationLoaded=!1,n.prototype.isLoaderFinished=!1,n.prototype.showInvoiceView=!1,n.prototype.showSocialSharing=!1,n.prototype.regions={regionLoader:"#loader-region",regionQuoteCreated:"#quote-created-region",regionInvoice:"#invoice-region",regionHouse:"#house-region",regionRecommendedSolution:"#recommended-solution-region",regionSimulationsMobile:"#simulations-mobile-region",regionAskBonus:"#ask-bonus-region",regionProject:"#project-region",regionPriceProject:"#price-project-region",regionPesSolution:"#pes-solution-region",regionCee:"#region-modal-cee",regionPesModal:"#region-modal-pes",regionInformation:"#information-region",socialShare:"#social-share",regionSolution:"#solution-region"},n.prototype.initialize=function(){var t;return this.simulator_path=this.options.simulator_path,this.simulator_name=this.options.simulator_name,this.showInvoiceView=this.options.showInvoiceView,this.showSocialSharing=this.options.showSocialSharing,this.options.withLoader?(t=this.$el.attr("data-nearestStationName"),this.loaderView=this.simulator_path===QuelleEnergie.simulator_paths.PRICE?new QuelleEnergie.Views.PriceSimulationLoader({stationName:t}):new QuelleEnergie.Views.SimulationLoader({stationName:t}),this.loaderView.on("finish",this.onLoaderViewFinish)):this.onLoaderViewFinish(),this.simulation=this.options.simulation,this.simulation.result(),this.simulation.on("change",this.onSimulationLoaded),this.simulation.on("clickGetQuote",this.onClickGetQuote)},n.prototype.renderSimulation=function(){return this.showPes=this.simulation.user.get("show_pes"),this.pesLeadSent=this.simulation.user.get("pes_lead_sent"),this.viewedPesModal=!this.showPes||this.pesLeadSent,this.simulation.user.viewedCeeModal=this.simulation.solutions.hasAskedAQuote()||!this.viewedPesModal,this.isPriceSimulator()?this.renderPriceSimulation():this.renderStandardSimulation(),this.ceeView=new QuelleEnergie.Views.SubsidiesSimulationCee({model:this.simulation.user}),this.regionCee.show(this.ceeView),this.showPes&&(this.pesSolutionView=new QuelleEnergie.Views.PesSolution({model:this.simulation.user}),this.regionPesSolution.show(this.pesSolutionView),this.viewedPesModal||(this.pesView=new QuelleEnergie.Views.SubsidiesSimulationPes({model:this.simulation.user,ceeView:this.ceeView,pesSolutionView:this.pesSolutionView,pesTrackingName:"Mise en relation PES - "+this.simulator_name}),this.regionPesModal.show(this.pesView)),this.pesLeadSent&&this.pesSolutionView.onPesAsked()),this.options.withLoader?this.hideLoader():void 0},n.prototype.renderPriceSimulation=function(){return this.solutionView=new QuelleEnergie.Views.PriceSolutions({simulation:this.simulation,simulator_path:this.simulator_path,model:this.simulation.global_cost,collection:this.simulation.solutions,childViewOptions:{simulator_path:this.simulator_path,user:this.simulation.user,simulation:this.simulation}}),this.regionSolution.show(this.solutionView),this.projectView=new QuelleEnergie.Views.PriceSimulationProject({simulation:this.simulation,simulator_path:this.simulator_path}),this.regionPriceProject.show(this.projectView)},n.prototype.renderStandardSimulation=function(){return this.showInvoiceView&&(this.invoiceView=new QuelleEnergie.Views.Invoice({model:this.simulation.situation}),this.regionInvoice.show(this.invoiceView)),this.houseView=new QuelleEnergie.Views.SimulationHouse({model:this.simulation.situation}),this.regionHouse.show(this.houseView),this.simulation.recommendedSolution&&(this.recommendedSolutionView=new QuelleEnergie.Views.SimulationRecommendedSolution({model:this.simulation.recommendedSolution,user:this.simulation.user,simulation:this.simulation,simulator_path:this.simulator_path}),this.regionRecommendedSolution.show(this.recommendedSolutionView)),this.projectView=new QuelleEnergie.Views.SimulationProject({simulation:this.simulation,simulator_path:this.simulator_path}),this.regionProject.show(this.projectView),this.informationView=new QuelleEnergie.Views.SimulationInformation({solutions:this.simulation.solutions,recommendedSolution:this.simulation.recommendedSolution,user:this.simulation.user}),this.regionInformation.show(this.informationView),this.showSocialSharing&&(this.socialSharingView=new QuelleEnergie.Views.SocialSharing({accommodation:this.simulation}),this.socialShare.show(this.socialSharingView)),this.solutionsMobileCollection=this.simulation.solutions.getActiveSolutionsByProject(this.simulation.projects.activeProject()),this.solutionsMobileCollection.add(this.simulation.recommendedSolution,{at:0}),this.solutionsMobileView=new QuelleEnergie.Views.SolutionsMobile({simulation:this.simulation,simulator_path:this.simulator_path,collection:this.solutionsMobileCollection,childViewOptions:{simulator_path:this.simulator_path,user:this.simulation.user,simulation:this.simulation,collection:this.solutionsMobileCollection}}),this.regionSimulationsMobile.show(this.solutionsMobileView),this.quoteCreatedSolution=_.find(this.solutionsMobileCollection.models,function(t){return t.get("quote_requested")===!0}),this.quoteCreatedSolution?this.renderQuoteCreatedView(this.quoteCreatedSolution.get("title")):void 0},n.prototype.onRender=function(){return this.regionLoader.show(this.loaderView),this.options.withLoader&&$("#reviews-layout, #feedback-layout, #back-layout").hide(),isMobile.any||setTimeout(function(t){return function(){return t.simulation.user.viewedCeeModal||t.showIspModal(),t.viewedPesModal?void 0:t.showPesModal()}}(this),12e4),$(".results").on("click",".link-cee-modal",function(t){return function(){return t.showIspModal()}}(this)),$(".results").on("click",".link-pes-modal",function(t){return function(){return t.showPesModal()}}(this))},n.prototype.showPesModal=function(){return $(".modal").hasClass("in")?void 0:(this.pesView.showModal("/pes_subscriptions/new"),this.pesView.trackGoogleEvent(),this.viewedPesModal=!0)},n.prototype.showIspModal=function(){return $(".modal").hasClass("in")?void 0:(this.ceeView.showModal("/simulation/inscription-prime-energie/nouvelle?isp=1"),this.ceeView.trackGoogleEvent(),this.simulation.user.viewedCeeModal=!0)},n.prototype.hideLoader=function(){return Backbone.history.navigate("/"+this.simulator_path+"/resultats"),dataLayer.push({event:"VirtualPage",virtual_path:"/"+this.simulator_path+"/resultats"}),this.regionLoader.$el.hide(),$("#reviews-layout, #feedback-layout, #back-layout").show()},n.prototype.onLoaderViewFinish=function(){return this.isLoaderFinished=!0,this.isSimulationLoaded?this.renderSimulation():void 0},n.prototype.onSimulationLoaded=function(){return this.isSimulationLoaded=!0,this.isLoaderFinished?this.renderSimulation():void 0},n.prototype.onClickGetQuote=function(t){return isMobile.any?void 0:(this.ceeView.showModal($(t.currentTarget).data("ceeUrl")),this.simulation.user.viewedCeeModal=!0,this.viewedPesModal=!0)},n.prototype.renderQuoteCreatedView=function(t){return this.regionQuoteCreated.currentView||(this.quoteCreatedView=new QuelleEnergie.Views.QuoteCreated({title:t}),this.regionQuoteCreated.show(this.quoteCreatedView),this.isPriceSimulator()||this.regionSimulationsMobile.currentView.renderQuoteCreated()),this.isPriceSimulator()||this.regionAskBonus.currentView?void 0:(this.askBonusView=new QuelleEnergie.Views.AskBonus({user:this.simulation.user,collection:this.solutionsMobileCollection}),this.regionAskBonus.show(this.askBonusView))},n.prototype.isPriceSimulator=function(){return this.simulator_path===QuelleEnergie.simulator_paths.PRICE},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.SocialSharing=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}var n;return t(i,e),i.prototype.template=TEMPLATE("simulations/result/social_sharing"),i.prototype.ui={section:".social-share a.social-link",mail:".social-share a.mailshare"},i.prototype.initialize=function(t){return this.simulation=t.accommodation||null,this.url=document.URL.replace(/resultats/,"formulaire"),this.url.match(/www\.quelleenergie\.fr/)?void 0:this.url=this.url.replace(location.host,"www.quelleenergie.fr")},i.prototype.onRender=function(){return this.ui.mail.on("click",function(){return n(),!0}),this.ui.section.on("click",function(t){var e;return e="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600",window.open(t.currentTarget.href,"",e),n(),!1})},n=function(){return dataLayer.push({event:"GAEvent",ga_event_action:"Affichage modal box partage reseaux sociaux",ga_event_category:"parcours client"})},i.prototype.shareSocialTitle=function(){var t;return this.text||(this.text=this.simulation&&void 0!==this.simulation.situation.attributes.label_energy?(t=function(){switch(this.simulation.situation.attributes.housing_type){case"house":return"ma maison";case"apartment":return"mon appart"}}.call(this),"L\u2019\xe9tiquette e\u0301nerge\u0301tique de "+t+" est "+this.simulation.situation.attributes.label_energy+" et vous ?"):"Texte \xe0 d\xe9finir..."),this.text},i.prototype.shareSocialWording=function(){return"Testez le 1er bilan \xe9nerg\xe9tique gratuit sur QuelleEnergie.fr !\n2 minutes pour tout savoir sur la consommation de votre maison."},i.prototype.shareSocialUrl=function(t){return void 0!==t?this.url+"?"+this.utms(t):this.url},i.prototype.utms=function(t){var e;return e={utm_source:t,utm_medium:"partage-reseaux-sociaux",utm_campaign:"simulateur-global"},_.map(e,function(t,e){return e+"="+t}).join("&")},i.prototype.templateHelpers=function(){return{linkedInUrl:function(t){return function(){return encodeURI("https://www.linkedin.com/shareArticle?mini=true&title="+t.shareSocialTitle()+("&url="+t.shareSocialUrl("linkedin")+"&summary="+t.shareSocialWording()+"&source=LinkedIn"))}}(this),facebookUrl:function(t){return function(){return encodeURI("http://www.facebook.com/sharer/sharer.php?u="+t.shareSocialUrl("facebook")+"&title="+t.shareSocialTitle())}}(this),twitterUrl:function(t){return function(){var e,i,n;return n=t.shareSocialWording().replace(/QuelleEnergie\.fr/,"@quelleenergie").replace(/\n.*/,""),i=t.simulation instanceof QuelleEnergie.Models.GlobalSimulation?"http://QuelleEnergie.fr/7rtu2p":t.shareSocialUrl(),e=""+t.shareSocialTitle()+" "+(n+" "+i+"?"+t.utms("twitter")),encodeURI("https://twitter.com/intent/tweet?text="+e+"&source=webclient")}}(this),googlePlusUrl:function(t){return function(){return encodeURI("https://plus.google.com/share?url="+t.shareSocialUrl("googleplus")+"&hl=fr")}}(this),mailUrl:function(t){return function(){return"mailto:?subject="+encodeURIComponent(t.shareSocialTitle())+("&body="+encodeURIComponent(t.shareSocialWording()+"\n\n"+t.shareSocialUrl("email")))}}(this)}},i}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SimulationSolution=function(i){function n(){return this.onClickInformation=t(this.onClickInformation,this),this.onQuoteCreated=t(this.onQuoteCreated,this),this.onQuoteRequested=t(this.onQuoteRequested,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/solution"),n.prototype.tagName="li",n.prototype.ui={button:".ask-quote",informationButton:".information-button",linkModal:".link-cee-modal"},n.prototype.requestingQuote=!1,n.prototype.initialize=function(){return this.user=this.options.user,this.simulation=this.options.simulation,this.model.on("quoteRequested",this.onQuoteRequested),this.model.on("quoteCreated",this.onQuoteCreated),this.model.set({simulator_path:this.options.simulator_path})},n.prototype.onRender=function(){return this.ui.button.on("click",this.onQuoteRequested),this.ui.informationButton.on("click",this.onClickInformation),this.ui.linkModal.replaceWith(function(){return $("<a>",{"class":this.className,href:"javascript:void(0);"}).html(this.innerHTML)})},n.prototype.onQuoteRequested=function(t){var e;return this.requestingQuote||this.ui.button.hasClass("btn-positive")?void 0:(this.requestingQuote=!0,"demande-devis"===this.options.simulator_path?(e=$(t.currentTarget).data("workprojectformUrl"),this.model.needFormForQuote({success:function(t){return function(i){return i===!0?(t.simulation.trigger("clickGetQuote",e),t.requestingQuote=!1,t.model.trigger("display::form",t.model)):t.model.askForQuote()}}(this)})):(this.user.viewedCeeModal||this.simulation.trigger("clickGetQuote",t),this.model.set({quote_requested:!0}),this.model.askForQuote()))},n.prototype.onQuoteCreated=function(){return this.requestingQuote=!1,this.$el.find(".ask-quote").addClass("btn-positive").removeClass("btn-simulator"),this.$el.find(".ask-quote").text("Enregistr\xe9"),window.resultView.renderQuoteCreatedView?window.resultView.renderQuoteCreatedView(this.model.get("title")):void 0},n.prototype.onClickInformation=function(){return this.model.trigger("display::informations",this.model)},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SolutionMobile=function(i){function n(){return this.onQuoteCreated=t(this.onQuoteCreated,this),this.onQuoteRequested=t(this.onQuoteRequested,this),this.onClickInformation=t(this.onClickInformation,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/solution_mobile"),n.prototype.className=function(){var t;return t="content-list xs-or-sm",this.index()>5&&(t+=" hidden more-5"),t},n.prototype.ui={button:"button",informationButton:".information-button",linkModal:".link-cee-modal"},n.prototype.requestingQuote=!1,n.prototype.templateHelpers=function(){return{index:function(t){return function(){return t.index()}}(this),collectionSize:function(t){return function(){return t.collection.length}}(this),highlights:function(t){return function(){return t.simulation.highlights}}(this)}},n.prototype.index=function(){return this.collection.indexOf(this.model)+1},n.prototype.initialize=function(){return this.user=this.options.user,this.collection=this.options.collection,this.simulation=this.options.simulation,this.model.on("quoteRequested",this.onQuoteRequested),this.model.on("quoteCreated",this.onQuoteCreated),this.model.set({simulator_path:this.options.simulator_path})},n.prototype.onRender=function(){return this.ui.button.on("click",this.onQuoteRequested),this.ui.informationButton.on("click",this.onClickInformation),this.ui.linkModal.replaceWith(function(){return $("<a>",{"class":this.className,href:"javascript:void(0);"}).html(this.innerHTML)
})},n.prototype.onClickInformation=function(){return this.model.trigger("display::informations",this.model)},n.prototype.onQuoteRequested=function(t){var e;return this.requestingQuote||this.ui.button.hasClass("btn-positive")?void 0:(this.requestingQuote=!0,"demande-devis"===this.options.simulator_path?(e=$(t.currentTarget).data("workprojectformUrl"),this.model.needFormForQuote({success:function(t){return function(i){return i===!0?(t.simulation.trigger("clickGetQuote",e),t.requestingQuote=!1,t.model.trigger("display::form",t.model)):(t.requestingQuote=!0,t.model.askForQuote())}}(this)})):(this.requestingQuote=!0,this.user.viewedCeeModal||this.simulation.trigger("clickGetQuote",t),this.model.set({quote_requested:!0}),this.model.askForQuote()))},n.prototype.onQuoteCreated=function(){return this.requestingQuote=!1,this.$el.find(".btn").addClass("btn-positive").removeClass("btn-simulator"),this.$el.find(".btn").html("<span class='icon-mini-checked'></span>Demande Enregistr\xe9e"),window.resultView.renderQuoteCreatedView?window.resultView.renderQuoteCreatedView(this.model.get("title")):void 0},n}(Backbone.Marionette.ItemView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Views.SimulationSolutions=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=TEMPLATE("simulations/result/solutions"),i.prototype.childView=QuelleEnergie.Views.SimulationSolution,i.prototype.childViewContainer="#solution-view",i.prototype.className="tab-pane active",i.prototype.ui={carousel:".jcarousel",solutionsView:"#solution-view",filter:".filter",sortDropdown:"#sort-dropdown",carouselPrevious:".jcarousel-control-prev",carouselNext:".jcarousel-control-next"},i.prototype.events={"click .jcarousel-control-prev":"onClickCarouselPrev","click .jcarousel-control-next":"onClickCarouselNext","click #sort-dropdown a":"onClickSortDropdown"},i.prototype.sortTitle="Trier par",i.prototype.templateHelpers=function(){return{sortTitle:this.sortTitle,activeProjectTitle:function(t){return function(){return _.uncapitalize(t.options.activeProject.get("title"))}}(this),activeProjectAltTitle:function(t){return function(){return t.options.activeProject.get("alt_title")}}(this),activeProjectName:function(t){return function(){return t.options.activeProject.get("name")}}(this),numberOfSolutions:function(t){return function(){return t.collection.size()}}(this)}},i.prototype.onRender=function(){var t;return this.solutionDisplayed=this.collection.first(),this.ui.carouselPrevious.addClass("inactive"),t=this.collection.size(),2>=t?(this.ui.carouselPrevious.addClass("hidden-lg hidden-md"),this.ui.carouselNext.addClass("hidden-lg hidden-md")):void 0},i.prototype.onClickCarouselPrev=function(){var t;return t=this.collection.indexOf(this.solutionDisplayed),0!==t?(this.ui.solutionsView.animate({left:"+=274"}),this.solutionDisplayed=this.collection.at(t-1),this.changeCarouselControls(t-1)):void 0},i.prototype.onClickCarouselNext=function(){var t;return t=this.collection.indexOf(this.solutionDisplayed),t+1!==this.collection.size()?(this.ui.solutionsView.animate({left:"-=274"}),this.solutionDisplayed=this.collection.at(t+1),this.changeCarouselControls(t+1)):void 0},i.prototype.changeCarouselControls=function(t){return 0===t?(this.ui.carouselPrevious.addClass("inactive"),this.ui.carouselNext.removeClass("inactive")):t+1===this.collection.size()?(this.ui.carouselPrevious.removeClass("inactive"),this.ui.carouselNext.addClass("inactive")):(this.ui.carouselPrevious.removeClass("inactive"),this.ui.carouselNext.removeClass("inactive"))},i.prototype.onClickSortDropdown=function(t){var e;return e=$(t.currentTarget),this.sortTitle=e.text(),this.collection.order=e.attr("data-sort"),this.collection.sort(),this.render()},i}(Backbone.Marionette.CompositeView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SolutionsMobile=function(i){function n(){return this.seeMore=t(this.seeMore,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("simulations/result/solutions_mobile"),n.prototype.childView=QuelleEnergie.Views.SolutionMobile,n.prototype.childViewContainer="#solutions-mobile",n.prototype.ui={seeMoreButton:".see-more-solutions"},n.prototype.quoteCreated=!1,n.prototype.initialize=function(){return this.simulation=this.options.simulation,this.simulator_path=this.options.simulator_path,this.simulation.projects.on("changeActive",this.onChangeActive),this.solutions=this.simulation.solutions,this.activeProject=this.simulation.projects.activeProject(),this.collection=this.options.collection},n.prototype.templateHelpers=function(){return{collectionSize:function(t){return function(){return t.collection.size()}}(this),isQuoteRequest:function(t){return function(){return"demande-devis"===t.simulator_path}}(this),quoteCreated:function(t){return function(){return t.quoteCreated}}(this)}},n.prototype.onRender=function(){return this.ui.seeMoreButton.on("click",this.seeMore)},n.prototype.seeMore=function(t){return this.moreDisplayed=!this.moreDisplayed,t.preventDefault(),$(this.el).find(".more-5, .down-2, .up-2").toggleClass(this.moreDisplayed?"hidden":"hidden")},n.prototype.renderQuoteCreated=function(){return this.quoteCreated=!0,this.render()},n}(Backbone.Marionette.CompositeView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SubsidiesSimulationCee=function(i){function n(){return this.onClickGetQuote=t(this.onClickGetQuote,this),this.onASSubmit=t(this.onASSubmit,this),this.onSubmit=t(this.onSubmit,this),this.onLoadedModal=t(this.onLoadedModal,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("subsidies_simulations/result/cee"),n.prototype.className="modal fade",n.prototype.ceeBoxSelector='.subsidie-box[data-name="cee"]',n.prototype.quoteButtons=".btn-demande-devis",n.prototype.initialize=function(){return this.ceeBox=$(this.ceeBoxSelector),this.on("loaded",this.onLoadedModal)},n.prototype.onLoadedModal=function(){return isMobile.any||this.$("select").selectpicker(),this.$("#subsidies").length?this.$(".cee-form").on("ajax:success",this.onASSubmit):this.$("form").on("submit",this.onSubmit),this.formAction=this.$("form").attr("action"),this.$("#show-form-button").on("click",function(t){return function(e){return t.$(e.currentTarget).parent().hide(),t.$(".cee-explanations").addClass("hidden")}}(this)),this.$("#cee-suscribe-form-button").on("click",function(){return function(t){return setTimeout(function(){return $(t.currentTarget).attr("disabled",!0)},500)}}(this)),this.$(".js_toggle_ceilings").on("click",function(t){return function(){return t.$("a span.flaticon.stroke").toggleClass("arrow-down-1 arrow-up-1")}}(this)),this.$("#completion_certificate_household_size").on("change",function(){return function(t){return $.ajax({url:"/espace_perso/demandes-primes/niveaux-de-revenus",type:"post",data:{household_size:$(t.currentTarget).val()},success:function(t){return $("#completion_certificate_precarity_level").empty().html(t).selectpicker("refresh")}})}}(this)),this.$("form span.icon-info").hover(function(t){return function(){return t.$(event.currentTarget).next("span.msg").toggleClass("no-display")}}(this))},n.prototype.onSubmit=function(t){return t.preventDefault(),this.model.registerCee({datas:Backbone.Syphon.serialize(this),action:this.formAction,success:function(t){return function(e){var i;return e.success===!0?(i=t.ceeBox.find("a.register"),t.$("form").hide(),t.$(".fail, .cee-projects-infos, .title-centered.total").addClass("hidden"),t.$(".confirmation").removeClass("hidden"),t.$("#cee-amount-value").empty().html(e.amount),e.cee_plus===!0&&t.$(".cee-plus-true").removeClass("hidden"),dataLayer.push({event:"VirtualPage",virtual_path:"/inscription-prime-energie/tracking"}),i.first().addClass("smaller").html("Demande enregistr\xe9e").attr("disabled","disabled"),i.off().on("click",function(){return!1}),$(".modal").scrollTop(0),t.$el.on("ajax:success",t.quoteButtons,t.onClickGetQuote)):t.$(".fail").removeClass("hidden")}}(this)})},n.prototype.onASSubmit=function(t){return t.preventDefault(),$(t.currentTarget).hide(),this.$(".fail, .cee-projects-infos, .title-centered.total, .cee-explanations").addClass("hidden"),this.$(".confirmation").removeClass("hidden"),$("#cee a.register").first().addClass("smaller").html("Demande enregistr\xe9e").attr("disabled","disabled").addClass("btn-positive").removeClass("btn-simulator")},n.prototype.onClickGetQuote=function(t,e){return $(".phone-confirmation").is(":visible")&&($(".confirmation .bg-success, .title-centered.total").addClass("hidden"),$(".quote-confirmation").removeClass("hidden"),$(".ask-quote").length)?($(t.currentTarget).html("Enregistr\xe9").addClass("btn-positive").removeClass("btn-simulator"),dataLayer.push({event:"VEInteractiveConversion",user_email:e.email}),$("<iframe>").attr("src",e.tracking_url).attr("style","height:0; width:0; display:none;").appendTo($("body"))):void 0},n.prototype.trackGoogleEvent=function(){return dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:"affichage modalbox CEE ISP"})},n}(Backbone.Marionette.ModalView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SubsidiesSimulationInformations=function(i){function n(){return this.displayInformations=t(this.displayInformations,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("subsidies_simulations/result/informations"),n.prototype.className="modal fade",n.prototype.ui={body:".modal-body",title:"h4.modal-title"},n.prototype.initialize=function(){return this.options.subsidies.on("display:informations",this.displayInformations)},n.prototype.displayInformations=function(t){return t.getInformations({success:function(e){return function(i){return e.ui.body.html(i),e.ui.title.text(t.get("title")),e.$el.modal("show")}}(this)})},n}(Backbone.Marionette.ModalView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SubsidiesSimulationLoader=function(i){function n(){return this.loadResults=t(this.loadResults,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("subsidies_simulations/result/loader"),n.prototype.el="#loader-layout",n.prototype.progression=0,n.prototype.ui={stationName:".station-name",progressBar:".progress-bar"},n.prototype.onRender=function(){return this.loadResults()},n.prototype.loadResults=function(){var t,e,i,n,o,r;for(n=this.progression.toString()+"%",this.ui.progressBar.css({width:n}),o=[15,23,40,50,65,85],e=t=0,i=o.length;i>t;e=++t)r=o[e],this.progression===r&&this.$el.find(".charg_step"+(e+1)).removeClass("invisible");return this.progression<97?(this.wait=setTimeout(this.loadResults,this.calculateDelay()),this.progression++):this.loaded()},n.prototype.calculateDelay=function(){var t;return t=30,t+=function(){switch(!1){case!(this.progression>15&&this.progression<23):return 50;case!(this.progression>50&&this.progression<65):return 80;case!(this.progression>85&&this.progression<94):return 40}}.call(this)},n.prototype.loaded=function(){return clearTimeout(this.wait),window.onunload=function(){},setTimeout(function(){return window.location="/simulateur-aides-et-subventions/resultats"+document.location.search},2e3)},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SubsidiesSimulationPes=function(i){function n(){return this.onClickGetQuote=t(this.onClickGetQuote,this),this.showInviteFriends=t(this.showInviteFriends,this),this.onCreateSubmit=t(this.onCreateSubmit,this),this.onEligibilitySubmit=t(this.onEligibilitySubmit,this),this.onLoadedModal=t(this.onLoadedModal,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=TEMPLATE("subsidies_simulations/result/pes"),n.prototype.className="modal fade",n.prototype.pesBoxSelector="#pes-subscription-modal",n.prototype.quoteButtons=".btn-demande-devis",n.prototype.initialize=function(){return this.ceeView=this.options.ceeView,this.pesSolutionView=this.options.pesSolutionView,this.pesTrackingName=this.options.pesTrackingName,this.subsidy=this.options.subsidy,this.pesBox=$(this.pesBoxSelector),this.on("loaded",this.onLoadedModal)},n.prototype.onLoadedModal=function(){return isMobile.any||this.$el.find("select").selectpicker(),this.$("[data-display-if]").conditionallyDisplayed(),this.eligibilityForm=this.$el.find("#pes-subscription-eligibility-form"),this.eligibilityForm.find(".btn-simulator").on("click",function(t){return function(e){return e.preventDefault(),t.onEligibilitySubmit()}}(this)),this.createForm=this.$el.find("#pes-subscription-create-form"),this.createForm.find(".btn-simulator").on("click",function(t){return function(e){return e.preventDefault(),t.onCreateSubmit()}}(this)),$(".item-choice input:radio").trigger("change"),$(".number_of_occupiers").on("change",function(){return function(t){var e;return e=$(t.currentTarget).val(),e&&""!==e?$.ajax({url:"/espace_perso/demandes-primes/niveaux-de-revenus",type:"post",data:{household_size:e},success:function(t){return $("#personal_information_precarity_level").empty().html(t).selectpicker("refresh")}}):void 0}}(this)),this.inviteFriendsOnly?this.showInviteFriends():void 0},n.prototype.onEligibilitySubmit=function(){var t;return t=Backbone.Syphon.serialize(this),t.subsidy=this.subsidy,this.model.send({datas:t,action:this.eligibilityForm.attr("action"),success:function(t){return function(e){return e.success===!0?(t.$el.find("#pes-subscription-eligibility").addClass("hidden"),e.eligible?t.$el.find("#pes-subscription-eligible").removeClass("hidden"):(t.$el.find(".js_not_eligible_modal_title").html(e.not_eligible_modal_title),t.$el.find("#pes-subscription-not-eligible").removeClass("hidden"),t.$el.on("ajax:success",t.quoteButtons,t.onClickGetQuote)),$("span#pes-price").html(e.pes_price),$(".not-at-1euro").length&&!e.eligible_one_euro&&($("span#pes-attics-surface").html(e.attics_surface),$(".at-1euro").addClass("hidden"),$(".not-at-1euro").removeClass("hidden")),$(".modal").scrollTop(0)):t.eligibilityForm.find(".fail").removeClass("hidden")}}(this)})},n.prototype.onCreateSubmit=function(){var t;return t=this.eligibilityForm.find("#personal_information_precarity_level").val(),this.model.send({datas:{utilisateur:{civilite:this.createForm.find("#utilisateur_civilite").val(),nom:this.createForm.find("#utilisateur_nom").val(),prenom:this.createForm.find("#utilisateur_prenom").val(),email:this.createForm.find("#utilisateur_email").val(),telephone_perso:this.createForm.find("#utilisateur_telephone_perso").val()},number_of_occupiers:this.eligibilityForm.find("#accommodation_number_of_occupiers").val(),precarity_level:t,subsidy:this.subsidy,authenticity_token:this.eligibilityForm.find("input[name=authenticity_token]").val()},action:this.createForm.attr("action"),success:function(e){return function(i){return i.success===!0?e.showInviteFriends(t):e.createForm.find(".fail").removeClass("hidden")}}(this)})},n.prototype.showInviteFriends=function(t){return this.trackGooglePESEvent(),this.subsidy&&(this.$el.find("#pes-subscription-eligibility").addClass("hidden"),$(".btn-demande-pes").removeClass("btn-simulator").addClass("btn-positive btn-static").html("&nbsp;Demande enregistr\xe9e").prepend($("<span>").addClass("icon-mini-checked")).off(),$(".link-pes-modal, span.free-mention").addClass("hidden")),this.$el.find("#pes-subscription-eligible").addClass("hidden"),this.subsidy||this.pesSolutionView.onPesAsked(),this.initAddFriends(t)},n.prototype.initAddFriends=function(t){var e;return e=this.$el.find("#pes-subscription-created"),e.removeClass("hidden"),"very_modest"===t&&e.find(".js_led_offer").removeClass("hidden"),this.createForm.length&&e.find(".nom-utilisateur").html(this.createForm.find(".civilite .selectpicker").attr("title")+" "+this.createForm.find("#utilisateur_nom").val()+" "+this.createForm.find("#utilisateur_prenom").val()),e.find(".plus-2").on("click",function(){var t;return t=e.find(".friends input").length+1,e.find(".friends").append('<input name="friends[friend_'+t+']" class="friend-input form-control" placeholder="Inscrivez l\'email de vos amis"></input>')}),e.find("form").on("ajax:success",function(t,i){return e.find("form").remove(),e.append('<h4 class="text-success text-center"><br><br>'+i.notice+"</h4>")}),e.find("form").on("ajax:error",function(t,i){return e.find(".friends .messages").html('<p class="text-danger">'+i.responseJSON.error+"</p>")})},n.prototype.onClickGetQuote=function(t,e){return $(".phone-confirmation").is(":visible")&&($(".title-centered.before-quote").addClass("hidden"),$(".quote-confirmation").removeClass("hidden"),$(".ask-quote").length)?($(t.currentTarget).html("Enregistr\xe9").addClass("btn-positive").removeClass("btn-simulator"),dataLayer.push({event:"VEInteractiveConversion",user_email:e.email}),$("<iframe>").attr("src",e.tracking_url).attr("style","height:0; width:0; display:none;").appendTo($("body"))):void 0},n.prototype.trackGoogleEvent=function(){return dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:"affichage modalbox PES"})},n.prototype.trackGooglePESEvent=function(){return dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:"Mise en relation PES"}),dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:this.pesTrackingName}),dataLayer.push({event:"MiseEnRelationPES"})},n}(Backbone.Marionette.ModalView)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;QuelleEnergie.Views.SubsidiesSimulationResult=function(i){function n(){return this.onClickCreateCee=t(this.onClickCreateCee,this),this.onClickGetQuote=t(this.onClickGetQuote,this),this.inviteFriends=t(this.inviteFriends,this),this.submitPes=t(this.submitPes,this),this.showPesModal=t(this.showPesModal,this),this.onClickInfosCee=t(this.onClickInfosCee,this),this.onClickInfosSubsidy=t(this.onClickInfosSubsidy,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.template=!1,n.prototype.el="#result-layout",n.prototype.ui={subsidies:".grant-detail-items",btnGetQuote:".get-quote a",btnPostCee:".cee .btn",btnCgu:".form-agree a",linkPesModal:".link-pes-modal",btnDemandePes:".btn-demande-pes"},n.prototype.regions={regionInformations:"#region-modal-informations",regionCee:"#region-modal-cee",regionPesModal:"#region-modal-pes",regionPesSolution:"#pes-solution-region"},n.prototype.onRender=function(){return this.initSubsidies(),this.informationView=new QuelleEnergie.Views.SubsidiesSimulationInformations({subsidies:this.subsidies}),this.regionInformations.show(this.informationView),this.user=new QuelleEnergie.Models.User,this.viewedPesModal=!1,this.ceeView=new QuelleEnergie.Views.SubsidiesSimulationCee({model:this.user}),this.regionCee.show(this.ceeView),this.regionPesModal.$el.length&&(this.pesView=new QuelleEnergie.Views.SubsidiesSimulationPes({model:this.user,ceeView:this.ceeView,subsidy:"1",pesTrackingName:"Mise en relation PES - simulateur A&S"}),this.regionPesModal.show(this.pesView),this.ui.linkPesModal.on("click",this.showPesModal),this.ui.btnDemandePes.on("click",this.submitPes),isMobile.any||$(".disp-pes-modal").length&&setTimeout(function(t){return function(){return t.viewedPesModal?void 0:t.showPesModal()}}(this),12e4)),this.ui.btnGetQuote.on("click",this.onClickGetQuote),this.ui.btnPostCee.on("click",this.onClickCreateCee),this.ui.btnCgu.on("click",this.onClickCgu)},n.prototype.initSubsidies=function(){return this.subsidies=new QuelleEnergie.Collections.Subsidies,this.ui.subsidies.find(".subsidie-box").each(function(t){return function(e,i){var n;return n=$(i),i=new QuelleEnergie.Models.Subsidy({title:n.find(".title").text(),name:n.attr("data-name"),eligible:n.attr("data-eligible")}),t.subsidies.add(i),"cee"===i.get("name")&&t.initSubsidyCEE(n),n.find(".info-click").on("click",t.onClickInfosSubsidy),n.find(".info-click-cee").on("click",t.onClickInfosCee)}}(this))},n.prototype.initSubsidyCEE=function(t){return"true"===t.attr("data-eligible")?t.find(".register").on("click",this.onClickCreateCee):void 0},n.prototype.onClickInfosSubsidy=function(t){var e,i;return t.preventDefault(),e=$(t.currentTarget).parents(".subsidie-box").attr("data-name"),i=this.subsidies.findByName(e),i.trigger("display:informations",i)},n.prototype.onClickInfosCee=function(t){return t.preventDefault(),this.ceeView.showModal("/inscription-prime-energie/new?more_infos=1")},n.prototype.showPesModal=function(){return $(".modal").hasClass("in")?void 0:(this.pesView.showModal("/pes_subscriptions/new?subsidy=1"),this.viewedPesModal=!0)},n.prototype.submitPes=function(){return this.pesView.showModal("/pes_subscriptions/new?subsidy=1"),this.viewedPesModal=!0},n.prototype.inviteFriends=function(){return this.pesView.inviteFriendsOnly=!0,this.pesView.showModal("/pes_subscriptions/new?invite_friends_only=1"),this.viewedPesModal=!0},n.prototype.onClickGetQuote=function(t){return this.ceeView.showModal($(t.currentTarget).data("ceeUrl")),this.user.viewedCeeModal=!0},n.prototype.onClickCreateCee=function(t){var e;return t.preventDefault(),e=this.$el.find("a.register"),e.first().html("Chargement..."),this.user.registerCee({action:"/inscription-prime-energie",data:{},success:function(t){return function(i){return i===!0?(t.ceeView.showModal("/inscription-prime-energie/confirm"),dataLayer.push({event:"VirtualPage",virtual_path:"/inscription-prime-energie/tracking"}),e.first().addClass("smaller").html("Demande enregistr\xe9e").attr("disabled","disabled").addClass("btn-positive").removeClass("btn-simulator"),e.off().on("click",function(){return!1}),$(".modal").scrollTop(0)):void 0}}(this)})},n}(Backbone.Marionette.LayoutView)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.Feedback=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.send=function(t){return $.ajax({url:"/a_propos/commentaire_simulation?simulateur_type="+this.get("simulation")+"&version=V3",method:"POST",type:"POST",dataType:"JSON",data:{commentaires:t.message},success:function(e){return t.success(e.message)},error:function(e){return t.error(e.responseJSON.message)}})},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.GlobalCost=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.GlobalSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.solutions=null,i.prototype.projects=null,i.prototype.situation=null,i.prototype.highlights=!0,i.prototype.result=function(){var t;return t=Date.now(),$.getJSON("/bilan-energetique/resultats.json?ts="+t,function(t){return function(e){var i,n,o,r,s,a,u,l,c,h,d,p,f,m;t.solutions=new QuelleEnergie.Collections.Solutions,e.recommended_solution&&(t.recommendedSolution=new QuelleEnergie.Models.Solution,t.recommendedSolution.set(e.recommended_solution),t.recommendedSolution.set({valid:!0})),t.user=new QuelleEnergie.Models.User(e.user),d=e.solutions;for(c in d)r=d[c],m=new QuelleEnergie.Models.Solution,m.set(r),m.set({valid:!0,idName:c}),t.solutions.add(m);for(p=e.invalid_solutions,o=0,u=p.length;u>o;o++)n=p[o],m=new QuelleEnergie.Models.Solution,m.set(n),m.set({valid:!1}),m.set({idName:n.name}),t.solutions.add(m);for(t.projects=new QuelleEnergie.Collections.Projects,f=e.projects,a=0,l=f.length;l>a;a++)i=f[a],i.solutions.length>0&&(h=new QuelleEnergie.Models.Project,h.set(i),t.projects.add(h));return s=_.chain(t.solutions.models).reject(function(t){return t.get("valid")}).map(function(t){return t.get("name")}).value(),_.any(s)&&(h=new QuelleEnergie.Models.Project,h.set({title:"Les solutions non-retenues",name:"invalid_solutions",solutions:s,last:!0}),t.projects.add(h)),t.situation=new QuelleEnergie.Models.Situation,t.situation.set(e.current_situation),t.trigger("change")}}(this))},i.prototype.getSources=function(t){return $.getJSON("/bilan-energetique/sources",function(){return function(e){return t.success(e)}}(this))},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.HeatingSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.solutions=null,i.prototype.projects=null,i.prototype.situation=null,i.prototype.highlights=!0,i.prototype.result=function(){var t;return t=Date.now(),$.getJSON("/simulateur-chauffage/resultats.json?ts="+t,function(t){return function(e){var i,n,o,r,s,a,u,l,c,h,d,p,f,m;t.solutions=new QuelleEnergie.Collections.Solutions,e.recommended_solution&&(t.recommendedSolution=new QuelleEnergie.Models.Solution,t.recommendedSolution.set(e.recommended_solution),t.recommendedSolution.set({valid:!0})),t.user=new QuelleEnergie.Models.User(e.user),d=e.solutions;for(c in d)r=d[c],m=new QuelleEnergie.Models.Solution,m.set(r),m.set({valid:!0,idName:c}),t.solutions.add(m);for(p=e.invalid_solutions,o=0,u=p.length;u>o;o++)n=p[o],m=new QuelleEnergie.Models.Solution,m.set(n),m.set({valid:!1}),m.set({idName:n.name}),t.solutions.add(m);for(t.projects=new QuelleEnergie.Collections.Projects,f=e.projects,a=0,l=f.length;l>a;a++)i=f[a],i.solutions.length>0&&(h=new QuelleEnergie.Models.Project,h.set(i),t.projects.add(h));return s=_.chain(t.solutions.models).reject(function(t){return t.get("valid")}).map(function(t){return t.get("name")}).value(),_.any(s)&&(h=new QuelleEnergie.Models.Project,h.set({title:"Les solutions non-retenues",name:"invalid_solutions",solutions:s,last:!0}),t.projects.add(h)),t.situation=new QuelleEnergie.Models.Situation,t.situation.set(e.current_situation),t.trigger("change")}}(this))},i.prototype.getSources=function(t){return $.getJSON("/simulateur-chauffage/sources",function(){return function(e){return t.success(e)}}(this))},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.PriceSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.situation=null,i.prototype.highlights=!1,i.prototype.result=function(){var t;return t=Date.now(),$.getJSON("/simulateur-prix-travaux/resultats.json?ts="+t,function(t){return function(e){var i,n,o,r,s,a,u,l;t.user=new QuelleEnergie.Models.User(e.user),t.global_cost=new QuelleEnergie.Models.GlobalCost(e.global_cost),t.solutions=new QuelleEnergie.Collections.Solutions,a=e.solutions;for(r in a){o=a[r],l=new QuelleEnergie.Models.Solution,l.set(o),l.set({valid:!0,idName:r}),s=new QuelleEnergie.Collections.Products,u=o.products;for(n in u)i=u[n],s.add(i);l.set({products:s}),t.solutions.add(l)}return t.trigger("change")}}(this))},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.Project=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.recommendedSolution=function(){return _.chain(this.solutions).first().value()},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.QuoteRequest=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.solutions=null,i.prototype.projects=null,i.prototype.situation=null,i.prototype.highlights=!1,i.prototype.result=function(){var t;return t=Date.now(),$.getJSON("/demande-devis/resultats.json?ts="+t,function(t){return function(e){var i,n,o,r,s,a,u,l,c;t.solutions=new QuelleEnergie.Collections.Solutions,t.user=new QuelleEnergie.Models.User(e.user),u=e.solutions;for(s in u)o=u[s],c=new QuelleEnergie.Models.Solution,c.set(o),c.set({valid:!0,idName:s}),t.solutions.add(c);for(t.projects=new QuelleEnergie.Collections.Projects,l=e.projects,n=0,r=l.length;r>n;n++)i=l[n],i.solutions.length>0&&(a=new QuelleEnergie.Models.Project,a.set(i),t.projects.add(a));return t.trigger("change")}}(this))},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.Situation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.Solution=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.recommended=!1,i.prototype.highlighted=!1,i.prototype.askForQuote=function(){return $.ajax({url:"/"+this.get("simulator_path")+"/projets?name="+this.get("french_label"),method:"POST",type:"POST",dataType:"JSON",complete:function(t){return function(){return t.quoteRequested=!0}}(this),success:function(t){return function(e){return t.trigger("quoteCreated"),dataLayer.push({event:"VEInteractiveConversion",user_email:e.email}),$("<iframe>").attr("src",e.tracking_url).attr("style","height:0; width:0; display:none;").appendTo($("body"))}}(this)})},i.prototype.needFormForQuote=function(t){return $.ajax({url:"/demande-devis/avec-questions?solution="+this.get("french_label"),method:"POST",type:"POST",dataType:"JSON",success:function(){return function(e){return t.success(e)}}(this)})},i.prototype.informationsModal=function(t){return $.ajax({url:"/"+this.get("simulator_path")+"/solutions/"+this.get("french_label"),method:"GET",type:"GET",dataType:"HTML",success:function(){return function(e){return t.success(e)}}(this)})},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.Subsidy=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.getInformations=function(t){return $.ajax({url:"/simulateur-aides-et-subventions/subvention/"+this.get("name"),method:"GET",type:"GET",dataType:"HTML",success:function(){return function(e){return t.success(e)
}}(this)})},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.ThermalSimulation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.solutions=null,i.prototype.projects=null,i.prototype.situation=null,i.prototype.highlights=!0,i.prototype.result=function(){var t;return t=Date.now(),$.getJSON("/simulateur-isolation/resultats.json?ts="+t,function(t){return function(e){var i,n,o,r,s,a,u,l,c,h,d,p,f,m;t.solutions=new QuelleEnergie.Collections.Solutions,e.recommended_solution&&(t.recommendedSolution=new QuelleEnergie.Models.Solution,t.recommendedSolution.set(e.recommended_solution),t.recommendedSolution.set({valid:!0})),t.user=new QuelleEnergie.Models.User(e.user),d=e.solutions;for(c in d)r=d[c],m=new QuelleEnergie.Models.Solution,m.set(r),m.set({valid:!0,idName:c}),t.solutions.add(m);for(p=e.invalid_solutions,o=0,u=p.length;u>o;o++)n=p[o],m=new QuelleEnergie.Models.Solution,m.set(n),m.set({valid:!1}),m.set({idName:n.name}),t.solutions.add(m);for(t.projects=new QuelleEnergie.Collections.Projects,f=e.projects,a=0,l=f.length;l>a;a++)i=f[a],i.solutions.length>0&&(h=new QuelleEnergie.Models.Project,h.set(i),t.projects.add(h));return s=_.chain(t.solutions.models).reject(function(t){return t.get("valid")}).map(function(t){return t.get("name")}).value(),_.any(s)&&(h=new QuelleEnergie.Models.Project,h.set({title:"Les solutions non-retenues",name:"invalid_solutions",solutions:s,last:!0}),t.projects.add(h)),t.situation=new QuelleEnergie.Models.Situation,t.situation.set(e.current_situation),t.trigger("change")}}(this))},i.prototype.getSources=function(t){return $.getJSON("/simulateur-isolation/sources",function(){return function(e){return t.success(e)}}(this))},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Models.User=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.viewedCeeModal=!1,i.prototype.getSources=function(t){return $.getJSON("/bilan-energetique/sources",function(){return function(e){return t.success(e)}}(this))},i.prototype.registerCee=function(t){return $.ajax({url:t.action,method:"POST",type:"POST",dataType:"JSON",data:t.datas,success:function(e){return t.success(e)}})},i.prototype.registerCeeFromQuote=function(t){return $.ajax({url:"/simulation/inscription-prime-energie/enregistrer",method:"POST",type:"POST",dataType:"JSON",data:t.params,success:function(e){return t.success(e)}})},i.prototype.send=function(t){return $.ajax({url:t.action,method:"POST",type:"POST",dataType:"JSON",data:t.datas,success:function(e){return t.success(e)}})},i}(Backbone.Model)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Collections.Products=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(Backbone.Collection)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Collections.Projects=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.activeProject=function(){var t;return t=_.find(this.models,function(t){return t.get("active")}),void 0===t?_.first(this.models):t},i.prototype.getByTitle=function(t){return _.find(this.models,function(e){return e.get("title")===t})},i.prototype.resetActiveProject=function(){var t,e,i,n,o;for(n=this.models,o=[],t=0,e=n.length;e>t;t++)i=n[t],o.push(i.set({active:!1}));return o},i}(Backbone.Collection)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Collections.Solutions=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.model=QuelleEnergie.Models.Solution,i.prototype.order="annualSaving",i.prototype.comparator=function(t){var e;switch(this.order){case"annualSaving":return t.get("replacement")?-Number.MAX_VALUE:-t.get("annual_saving");case"price":return e=t.get("price"),_.isNumber(e)?e:Number.MAX_VALUE}},i.prototype.getActiveSolutionsByProject=function(t){var e,i,n,o,r;for(r=new QuelleEnergie.Collections.Solutions,o=t.get("solutions"),e=0,i=o.length;i>e;e++)n=o[e],r.add(this.findWhere({idName:n}),{sort:!1});return r.sort()},i.prototype.hasAskedAQuote=function(){return!_.isEmpty(this.where({quote_requested:!0}))},i.prototype.activeSolution=function(){var t;return t=_.find(this.models,function(t){return t.get("active")}),void 0===t?_.first(this.models):t},i.prototype.resetActiveSolution=function(){var t,e,i,n,o;for(i=this.models,n=[],t=0,e=i.length;e>t;t++)o=i[t],n.push(o.set({active:!1}));return n},i}(Backbone.Collection)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;QuelleEnergie.Collections.Subsidies=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.findByName=function(t){return _.find(this.models,function(e){return e.get("name")===t})},i}(Backbone.Collection)}.call(this),function(){!function(t){var e;return e=function(){function e(e,i){var n;this.el=e,this.triggerChangeEvent=null!=i?i:!1,n=this.el.data("display-if"),this.relyOnSelector=t.isArray(n)?_.map(n,function(t){return"[name='"+t+"']"}).join(","):"[name='"+this.el.data("display-if")+"']",this.expectedValues=this.el.data("has-value"),this.keepValues=this.el.data("keep-values")===!0,this.bindEvents(),this.updateDisplay()}return e.prototype.relyOnObject=function(){return t(this.relyOnSelector)},e.prototype.bindEvents=function(){var e;return e=function(t){return function(){return t.updateDisplay()}}(this),t("body").on("change",this.relyOnSelector,e)},e.prototype.updateDisplay=function(){return _.intersection(this.expectedValues,this.valueOfAssociatedNode()).length?this.el.is(":hidden")&&(this.el.show(),"OPTION"!==this.el.prop("tagName")&&this.el.data("noHighlight")!==!0&&(t(jQuery.ui).length?(this.el.css({backgroundColor:"#fff"}),this.el.effect("highlight",{color:"#AFFFAF"},1e3)):this.el.addClass("highlight"))):(this.el.hide(),t(jQuery.ui).length||this.el.removeClass("highlight"),this.keepValues||this.resetFields()),this.triggerChangeEvent===!0?this.el.parent().trigger("change"):void 0},e.prototype.valueOfAssociatedNode=function(){return _.map(this.relyOnObject(),function(e){return"radio"===t(e).attr("type")||"checkbox"===t(e).attr("type")?t(e).filter(":checked").val():t(e).val()})},e.prototype.resetFields=function(){return this.el.find("input[type=text], select").each(function(e,i){return t(i).val("")}),this.el.find("input[type=checkbox], input[type=radio]").each(function(e,i){return t(i).attr("checked",!1)})},e}(),t.fn.reattachable=function(){var t,e;return e=this.parent(),t=this.nextAll(),this.attach=function(){var i;return this.is(":hidden")?(i=t.filter(":visible").get(0),i?this.insertBefore(i):this.appendTo(e)):void 0}},t.fn.conditionallyDisplayed=function(){return this.each(function(){var i,n;return i=t(this),n=!1,("OPTION"===i.prop("tagName")||"true"===i.attr("data-detach"))&&("OPTION"===i.prop("tagName")&&(n=!0),i.reattachable(),i.hide=i.detach,i.show=i.attach),new e(i,n)})}}(jQuery)}.call(this),function(){jQuery(function(t){var e,i,n,o,r,s,a,u,l;return u=function(){var e,i,n;return n=t("#accommodation_roof_pitch").val(),e=t("#house-inclinaison-illustration"),i=""===n?4:n/10+1,e.removeAttr("class").addClass(t(".v3").length?"icon-house-inclinaison-"+i:"house house-inclinaison-"+i)},t("#accommodation_roof_pitch").change(u),u(),"house"===t("#accommodation_housing_type").val()&&t("#accommodation_dhw_system option[data-display-if]").html("La chaudi\xe8re"),t(".selectpicker").length&&(t("select").selectpicker("refresh"),t("form").on("change","select",function(e){return t(e.target).hasClass("not-select-picker")?void 0:setTimeout(function(){return function(){return t(e.target).selectpicker("refresh")}}(this),250)})),t("[data-display-if]").conditionallyDisplayed(),i=function(e){return t(".niveaux-habitables").each(function(i,n){return t(t(n).find("span")[1]).html("&nbsp;"+e[i])}),t('input[name="accommodation\\[human_levels\\]"]').each(function(i,n){return t(n).parents(".item-choice").find(".title").html(e[i])})},a=function(t){return i("habitable_attics"===t?[2,3,4]:[1,2,3])},t("input[name=accommodation\\[roof_type\\]]").change(function(e){return a(t(e.target).val())}),e=t("input[name='accommodation[roof_type]']:checked"),e.length&&a(e.val()),this.selectEnergy=t("#accommodation_heating_system_1_attributes_category"),r=function(e){return function(){var i;return i=e.selectEnergy.find("option:selected").data("energyAnnualInvoice")||"",t("#energyAnnualInvoiceText").html(i)}}(this),this.selectEnergy.change(function(){return function(){return r()}}(this)),this.selectEnergy.trigger("change"),-(this.simulationWorksContainer=t("#sws_container")),n=function(t,e,i,n){var o,r,s,a,u,l,c,h;for(h=parseInt(i.val()),a=isNaN(h)||!n?1:h,u=["Equipment","Installation"],l=[],r=0,s=u.length;s>r;r++)c=u[r],o=t.data("amount"+c)*a,void 0!==o&&(o+=" \u20ac"),l.push(e.find(".amount_"+c.toLowerCase()).val(o));return l},s=function(e,i){var o,r,s,a,u,l,c,h,d;return null==i&&(i=!0),h=e.closest(".simulation_work"),c=t("#sws_container .solutions input:checkbox[value='"+t(e).val()+"']"),r=t(h.find(".first_condition_value")),o=c.data("calculatedAmounts"),-(o===!0?r.on("blur",function(){return n(c,h,r,o)}):r.off("blur")),-function(){var e,n,o,r;for(o=["first","second"],r=[],e=0,n=o.length;n>e;e++)d=o[e],l=t(h.find("span."+d+"_condition_label")),a=c.data(d+"ConditionLabel"),u=c.data(d+"ConditionValue"),s=c.data(d+"ConditionHelp"),l.html(a),i!==!1&&t(h.find("."+d+"_condition_value")).val(u),r.push(t(l.closest(".form-line").find(".help-content")).html(s));return r}(),i!==!1?-n(c,h,r,o):void 0},-(o=function(t,e){return null==e&&(e=!0),s(t,e)}),this.simulationWorksContainer.on("change",".simulation_work_solution_name",function(){return o(t(this))}),this.simulationWorksContainer.on("changeWithoutDefault",".simulation_work_solution_name",function(){return o(t(this),!1)}),t(".simulation_work_solution_name").trigger("changeWithoutDefault"),- -(t("#quote-request").length?(l=t("input[name=accommodation\\[housing_type\\]],input[name=accommodation\\[heating_system_1_attributes\\][\\sharing_heating_mode\\]]"),t(".form-content").on("change",l,function(){return t("#accommodation_housing_type_apartment").is(":checked")&&t("#accommodation_heating_system_1_attributes_sharing_heating_mode_collective").is(":checked")?t(".hideable").hide():t(".hideable").show()})):void 0),t(".selectpicker").length?t("select").selectpicker("refresh"):void 0})}.call(this),function(){jQuery(function(t){var e,i,n,o,r,s,a,u,l;return i=t("#accommodation_user_attributes_email"),i&&i.length>0?(n=t("#existing-user").detach(),l=n.find("#password"),o=t("#email_message"),a=t("#password_message"),s=t("#new-user").detach(),r=s.find(".single-pw-field"),u=t(".password_wrapper"),t(".v3").length?i.loader=t("<div></div>").addClass("small spinner-progress").insertAfter(i).hide():(i.loader=t('<img alt="loader">'),i.loader.attr("src","/images/layouts/principal/ajax-loader.gif").css({paddingLeft:"4px"}).insertAfter(i).hide()),e=function(e,i,c,h){return t.each([o,a],function(t,e){return e.find(".form-error").detach()}),t(".v3").length&&o.parent().find(".form-error").detach(),h.getResponseHeader("X-Password-Related")?a.html(i):(h.getResponseHeader("X-Email-Taken")?(s.detach(),u.append(n),l.focus()):(n.detach(),u.append(s),r.focus()),o.html(i))},l.val("").focus(function(){return l.val("")}),t(".password_wrapper").on("ajax:before","a#new_password",function(){return i.loader.show(),t(this).data("params",{email:i.val()})}).on("ajax:complete","a#new_password",function(){return i.loader.hide()}).on("ajax:success","a#new_password",e),i.on("ajax:before",function(){return i.loader.show()}).on("ajax:complete",function(){return i.loader.hide()}).on("ajax:success",e),i.val().length>0&&i.trigger("change.rails"),t("#email_message").on("click","a[data-email_suggestion]",function(){return i.val(t(this).data("email_suggestion")).trigger("change.rails"),o.html("")})):void 0})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};jQuery(function(e){var i;return i=function(){function i(i){this.notifyEvent=t(this.notifyEvent,this),this.toggle=t(this.toggle,this),this.visible=t(this.visible,this),this.hide=t(this.hide,this),this.show=t(this.show,this),this.$link=e(i),this.$link&&(this.$tooltip=this.$link.next(".help-text")),this.$link&&this.$tooltip&&(this.$link.on("mouseover",this.show),this.$link.on("mouseout",this.hide),this.$link.on("click",this.toggle))}return i.prototype.show=function(){return this.$tooltip.show(),this.notifyEvent()},i.prototype.hide=function(){return this.$tooltip.hide()},i.prototype.visible=function(){return this.$tooltip.is(":visible")},i.prototype.toggle=function(){return this.visible()?this.hide():this.show()},i.prototype.notifyEvent=function(){var t,e;return t=this.$link.parents("form:first").data("form-name"),e=this.$link.data("question-name"),t&&e?window.dataLayer.push({event:"GAEvent",ga_event_category:t,ga_event_action:"Survol des bulles d'aide",ga_event_label:e}):void 0},i}(),window.help_tooltip=function(){return e("a.help-question").each(function(t,e){return new i(e)})},window.help_tooltip()})}.call(this),function(){jQuery(function(t){return window.hide_error_on_change=function(){return t(".form-line").each(function(){var e;return e=t(this),t("input, select",e).on("change.hideError",function(){return e.removeClass("line-error").find("label").removeClass("with_error").end().find("field_with_errors").removeClass("field_with_errors").end().find(".form-error").detach().end(),t(this).off(".hideError")})})},window.hide_error_on_change()})}.call(this),function(){var t;t=function(){var t,e;return e=window.location.search,t={},e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,o){return t[i]=o}),t},jQuery(function(e){var i;return i=function(){var t;return t=e('<div class="wait_wrapper">').css({height:document.body.offsetHeight+"px",width:"100%","z-index":"1500",display:"none",position:"absolute","background-color":"rgba(5,5,5,0.5)"}).prependTo("body").fadeIn("fast")},e("body.global_simulations_controller, body.heating_simulations_controller, body.thermal_envelope_simulations_controller").on("change","input[name='accommodation[housing_type]']",function(n){var o,r,s;return i(),o=e(n.currentTarget).val(),s=t(),s.housing_type=o,r="?",e.each(s,function(t,e){return r+=t+"="+e+"&"}),r=r.replace(/(&)$/,""),window.location=window.location.protocol+"//"+window.location.hostname+(""+(e.inArray(window.location.port,[null,void 0,""])<0?":"+window.location.port:""))+(""+window.location.pathname)+(""+r)+(""+window.location.hash)}),e("body.price_simulations_controller").on("change","input[name='accommodation[housing_type]']",function(t){return e("#solutions .js_solution").hide(),e("#solutions .js_"+t.target.value).show()})})}.call(this),function(){jQuery(function(t){var e,i,n;return i=e=!1,n=null,t("html").is(".ie6, .ie7, .ie8")&&(e=i=!0,n=parseInt(document.getElementsByTagName("html")[0].className.match(/\d$/))),navigator.userAgent.match(/msie|trident/i)&&(e=!0),e?t("label img").click(function(){var e,i;return i=t(this).parents("label:first").attr("for"),e=t("input[type='radio']#"+i),e.trigger("click"),n&&9>n?document.getElementById(e.attr("id")).fireEvent("onclick"):void 0}):void 0})}.call(this),function(){jQuery(function(t){var e;return t("#solutions .item-choice").on("QeCheckBox:clicked",function(i){var n;return n=t(i.currentTarget),t("#sol-count-error").addClass("hidden"),t(".solutions .item-choice.checked").length>3&&(i.preventDefault(),n.trigger(isMobile.any?"touchend":"click"),e()),!1}),e=function(){var e,i;e=t("#sol-count-error"),e.removeClass("hidden"),i=isMobile.any?35:0,t("html, body").animate({scrollTop:e.offset().top-20-i},500)}})}.call(this),jQuery(function(t){function e(){var e=t("#confirmation-modal-content").html(),n=t("#main-modal");n.find(".modal-content").html(e),n.modal("show"),i(n)}function i(t){t.find(".plus-2").on("click",function(){var e=t.find(".friends input").length+1;t.find(".friends").append('<input name="friends[friend_'+e+']" class="friend-input form-control" placeholder="Inscrivez l\'email de vos amis"></input>')}),t.find("form").on("ajax:success",function(e,i){t.find(".modal-body .classic, .modal-body form").remove(),t.find(".modal-body").append('<h4 class="text-success text-center"><br><br>'+i.notice+"</h4>")}).on("ajax:error",function(e,i){t.find(".friends .messages").html('<p class="text-danger">'+i.responseJSON.error+"</p>")})}function n(){t(".get-prospect-form").on("ajax:error",function(e,i){t(".get-prospect-form").find(".message").html('<p class="text-danger">'+i.responseJSON+"</p>")}).on("ajax:success",function(t){window.prospectCreated=!0,o(t)}),window.prospectCreated&&t(".btn-positive").on("click",o)}function o(e){e.preventDefault(),t(".get-prospect-form").after('<span class="btn btn-action green"><span class="icon-mini-checked"></span>&nbsp;&nbsp;Demande enregistr\xe9e</span>'),t(".get-prospect-form").remove(),$modal=t("#main-modal"),$modal.modal("hide");var i=t("#get-prospect-modal-content").html();$modal.find(".modal-content").html(i),window.ceeCreated&&($modal.find(".form-user").hide(),$modal.find(".confirmation").show(),$modal.find(".cee-form").html('<br><br><h4 class="text-success text-center">Votre demande a \xe9t\xe9 enregistr\xe9e</h4><br><br>')),setTimeout(function(){$modal.modal("show"),$modal.find("select").selectpicker(),r()},400)}function r(){$modal=t("#main-modal"),$form=$modal.find(".cee-form"),$form.on("ajax:success",function(t,e){1==e.success?($modal.find(".fail, .cee-explanations, .cee-projects-infos, .title-centered.total, .cee-form, .quote-confirmation, hr").addClass("hidden"),$modal.find(".confirmation").removeClass("hidden"),$modal.find("#cee-amount-value").empty().html(e.amount),1==e.cee_plus&&$modal.find(".cee-plus-true").removeClass("hidden"),window.ceeCreated=!0):$modal.find(".fail").removeClass("hidden")}).on("ajax:error",function(t){$modal.find(".cee-form .error").text(t.responseText).show()})}t("#pes-simulation-result").length&&(t(".not-eligible").click(function(e){e.preventDefault();var i=t("#not-eligible-modal-content").html(),o=t("#main-modal");o.find(".modal-content").html(i),o.modal("show"),window.prospectCreated&&(t(".get-prospect-form").after('<a href= "#" class="btn btn-positive btn-static"><span class="icon-mini-checked"></span>&nbsp;&nbsp;Demande enregistr\xe9e</a>'),t(".get-prospect-form").remove()),n()}),t("#show-invitation-modal").length&&e(),t(".contact-me").on("click",function(e){e.preventDefault(),t("#contact-me-form").submit()}),t("#contact-me-form").on("ajax:success",function(){dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:"Mise en relation PES"}),dataLayer.push({event:"GAEvent",ga_event_category:"parcours client",ga_event_action:"Mise en relation PES - simulateur PES"}),dataLayer.push({event:"MiseEnRelationPES"}),e(),t(".contact-me").html('<span class="icon-mini-checked"></span>&nbsp;&nbsp;Demande enregistr\xe9e').removeClass("contact-me orange").addClass("green"),t("#contact-me-link").hide()}),t("body").on("change","#completion_certificate_household_size",function(e){t.ajax({url:"/espace_perso/demandes-primes/niveaux-de-revenus",type:"post",data:{household_size:t(e.currentTarget).val()},success:function(e){t("#completion_certificate_precarity_level").empty().html(e).selectpicker("refresh")}})}),n())}),function(){jQuery(function(t){var e,i,n,o,r,s;return t(".simulator").length?(r="#accommodation_user_attributes_telephone_perso",o=t(r)):(r="#utilisateur_telephone_perso",o=t(r)),n=t("#phone_message"),o&&o.length?(s=function(){return o[0].setCustomValidity("")},10===o.val().length&&o.val().match(/^0[1-9](?:\s?\d{2}){4}$/)||s(),e=function(t,e,i,r){switch(r.getResponseHeader("X-Phone-Error")){case"impossible":return o[0].setCustomValidity("Le num\xe9ro doit \xeatre valide"),n.html(e).show();case"unlikely":return s(),n.html(e).show();default:return s(),n.hide()}},o.bind("ajax:before",function(){return o.loader.show()}).bind("ajax:complete",function(){return o.loader.hide()}).bind("ajax:success",e),i=t("body"),i.on("click","a[data-phone_confirm]",function(){return s(),n.hide()}),i.on("click","a[data-phone_correction]",function(){return o.val("").focus()}),i.on("change.rails",r,function(){return o.val(o.val().replace(/\D/g,"")),o.val().length>=10&&o.val().match(/^0[1-9](?:\s?\d{2}){4}$/)?void 0:!1}),t(".v3").length?o.loader=t("<div></div>").addClass("small spinner-progress").insertAfter(o).hide():(o.loader=t('<img alt="loader">'),o.loader.attr("src","/images/layouts/principal/ajax-loader.gif").css({paddingLeft:"4px"}).insertAfter(o).hide())):void 0})}.call(this),function(){jQuery(function(t){var e,i;return i=t("body"),i.length&&i.hasClass("responsive")?(e=function(e){var i,n,o;i=t(e).find("input[type=radio]"),o=i.attr("id"),"checked"===i.attr("checked")&&(n=t(e).parents(".form-field").find(".form-radio"),n.each(function(e,i){t(i).removeClass("active")}),t(e).addClass("active"))},t(".form-radio").each(function(){var e;e=t(this).find(".form-img"),null==e.html()&&t(this).addClass("noImg")}),t("body").on("click",".form-radio",function(){e(this)}),t(".form-radio").each(function(){e(this)}),t(".form-info-window").click(function(){t(this).hide()})):void 0})}.call(this),function(){jQuery(function(t){var e;return t("#subsidies").length?(e=t(".v3").length,t(document).on("ajax:success","a.btn-demande-devis",function(i,n){t("a.btn-demande-devis").each(function(i,o){return t(o).parent().addClass("selected"),t(o).html(n.success_message).attr("href","#").removeAttr("data-remote data-method").addClass("btn-positive btn-static").removeClass("btn-simulator"),e?t(o).prepend(t("<span>").addClass("icon-mini-checked")):void 0}),dataLayer.push({event:"VEInteractiveConversion",user_email:n.email}),t("<iframe>").attr("src",n.tracking_url).attr("style","height:0; width:0; display:none;").appendTo(t("body")),e||Modalbox.hideIfInitialized()}),t(document).on("ajax:error","a.btn-demande-devis",function(e,i){t(this).parent().find(".messages").html('<br><p class="text-danger">'+JSON.parse(i.responseText)[["error_message"]]+"</p>")})):void 0})}.call(this),Pages.subsidies_simulation_form_item_works=function(){function t(t){return $("#simulation_work_1_solution_name").val()==t?$("#simulation_work_1_solution_name"):$("#simulation_work_2_solution_name").val()==t?$("#simulation_work_2_solution_name"):$("#simulation_work_3_solution_name").val()==t?$("#simulation_work_3_solution_name"):void 0}function e(){var t=$(".solutions .item-choice[data-value='external_wall_insulation']");$(".item-choice-housing_type.checked[data-value='house']").length?t.show():(t.removeClass("checked").hide(),$(".simulation_work_solution_name").each(function(t,e){("external_wall_insulation"==$(e).val()||""==$(e).val())&&$(e).val(null).trigger("change")}))}function i(t,e){$(t).closest(".form-line").find("label").html(e)}function n(){var t=$("#sol-count-error");t.removeClass("hidden"),space=isMobile.any?35:0,$("html, body").animate({scrollTop:t.offset().top-20-space},500)}function o(e){var o=e.data("value"),r=e.find("span.title").html();if($("#sol-count-error").addClass("hidden"),$(".solutions .item-choice.checked").length>3)e.trigger(isMobile.any?"touchend":"click"),n();else if(e.hasClass("checked")){var s=$(t(""));i(s,r),s.val(o).trigger("change")}else{var a=t(o);a&&a.val("").trigger("change")}}$(".simulation_work_solution_name").on("change",function(t){var e=$(t.currentTarget),i=$(e.closest(".form-line"));e.val().length?i.show():i.hide()}),$(".housing-type .item-choice").on("click",function(){setTimeout(function(){e()},20)}),$(".solutions .item-choice").on("QeCheckBox:clicked",function(t){o($(t.currentTarget))}),e()},Pages.subsidies_simulation_form_personnal_infos=function(){function t(){var t=$("#personal_information_marital_status").val();""==t&&(t="single");var e=$("#personal_information_dependant_persons").val();""==e.length&&(e="0");var i=$("#accommodation_zip_code").val().replace(/\D+/g,"");$.ajax({url:"/simulateur-aides-et-subventions/options-precarite",type:"GET",method:"GET",data:{dependant_persons:e,marital_status:t,zip_code:i},success:function(t){selectData=_.map(t,function(t){return"<option value='"+t[1]+"'>"+t[0]+"</option>"});var e=$("#personal_information_precarity_level").val();$("#personal_information_precarity_level").empty().html(selectData).selectpicker("refresh");var i=$("#personal_information_precarity_level").val();i!=e&&""!=e&&$(".precarity-level-form-line").css("border","2px solid #F45")}})}$(".item-choice-joint_taxation").on("click",function(){setTimeout(function(){t()},20)}),$("#personal_information_marital_status").on("change",t),$("#accommodation_zip_code").on("typeahead:change",t),$("#personal_information_dependant_persons").on("change",t),$("#personal_information_precarity_level").on("change",function(){$(".precarity-level-form-line").css("border","none")})};